(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const I of document.querySelectorAll('link[rel="modulepreload"]'))c(I);new MutationObserver(I=>{for(const g of I)if(g.type==="childList")for(const b of g.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&c(b)}).observe(document,{childList:!0,subtree:!0});function y(I){const g={};return I.integrity&&(g.integrity=I.integrity),I.referrerPolicy&&(g.referrerPolicy=I.referrerPolicy),I.crossOrigin==="use-credentials"?g.credentials="include":I.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function c(I){if(I.ep)return;I.ep=!0;const g=y(I);fetch(I.href,g)}})();var Kr={exports:{}},rl={};var Kf;function vg(){if(Kf)return rl;Kf=1;var s=Symbol.for("react.transitional.element"),u=Symbol.for("react.fragment");function y(c,I,g){var b=null;if(g!==void 0&&(b=""+g),I.key!==void 0&&(b=""+I.key),"key"in I){g={};for(var N in I)N!=="key"&&(g[N]=I[N])}else g=I;return I=g.ref,{$$typeof:s,type:c,key:b,ref:I!==void 0?I:null,props:g}}return rl.Fragment=u,rl.jsx=y,rl.jsxs=y,rl}var Xf;function Sg(){return Xf||(Xf=1,Kr.exports=vg()),Kr.exports}var d=Sg(),Xr={exports:{}},ne={};var Qf;function Cg(){if(Qf)return ne;Qf=1;var s=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),g=Symbol.for("react.consumer"),b=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),T=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),k=Symbol.iterator;function X(m){return m===null||typeof m!="object"?null:(m=k&&m[k]||m["@@iterator"],typeof m=="function"?m:null)}var Y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,Ee={};function se(m,H,v){this.props=m,this.context=H,this.refs=Ee,this.updater=v||Y}se.prototype.isReactComponent={},se.prototype.setState=function(m,H){if(typeof m!="object"&&typeof m!="function"&&m!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,m,H,"setState")},se.prototype.forceUpdate=function(m){this.updater.enqueueForceUpdate(this,m,"forceUpdate")};function Ie(){}Ie.prototype=se.prototype;function B(m,H,v){this.props=m,this.context=H,this.refs=Ee,this.updater=v||Y}var V=B.prototype=new Ie;V.constructor=B,P(V,se.prototype),V.isPureReactComponent=!0;var ue=Array.isArray;function oe(){}var F={H:null,A:null,T:null,S:null},te=Object.prototype.hasOwnProperty;function Q(m,H,v){var A=v.ref;return{$$typeof:s,type:m,key:H,ref:A!==void 0?A:null,props:v}}function Ae(m,H){return Q(m.type,H,m.props)}function Oe(m){return typeof m=="object"&&m!==null&&m.$$typeof===s}function He(m){var H={"=":"=0",":":"=2"};return"$"+m.replace(/[=:]/g,function(v){return H[v]})}var we=/\/+/g;function ze(m,H){return typeof m=="object"&&m!==null&&m.key!=null?He(""+m.key):H.toString(36)}function Ve(m){switch(m.status){case"fulfilled":return m.value;case"rejected":throw m.reason;default:switch(typeof m.status=="string"?m.then(oe,oe):(m.status="pending",m.then(function(H){m.status==="pending"&&(m.status="fulfilled",m.value=H)},function(H){m.status==="pending"&&(m.status="rejected",m.reason=H)})),m.status){case"fulfilled":return m.value;case"rejected":throw m.reason}}throw m}function M(m,H,v,A,z){var Z=typeof m;(Z==="undefined"||Z==="boolean")&&(m=null);var ae=!1;if(m===null)ae=!0;else switch(Z){case"bigint":case"string":case"number":ae=!0;break;case"object":switch(m.$$typeof){case s:case u:ae=!0;break;case x:return ae=m._init,M(ae(m._payload),H,v,A,z)}}if(ae)return z=z(m),ae=A===""?"."+ze(m,0):A,ue(z)?(v="",ae!=null&&(v=ae.replace(we,"$&/")+"/"),M(z,H,v,"",function(Tt){return Tt})):z!=null&&(Oe(z)&&(z=Ae(z,v+(z.key==null||m&&m.key===z.key?"":(""+z.key).replace(we,"$&/")+"/")+ae)),H.push(z)),1;ae=0;var ve=A===""?".":A+":";if(ue(m))for(var de=0;de<m.length;de++)A=m[de],Z=ve+ze(A,de),ae+=M(A,H,v,Z,z);else if(de=X(m),typeof de=="function")for(m=de.call(m),de=0;!(A=m.next()).done;)A=A.value,Z=ve+ze(A,de++),ae+=M(A,H,v,Z,z);else if(Z==="object"){if(typeof m.then=="function")return M(Ve(m),H,v,A,z);throw H=String(m),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return ae}function q(m,H,v){if(m==null)return m;var A=[],z=0;return M(m,A,"","",function(Z){return H.call(v,Z,z++)}),A}function $(m){if(m._status===-1){var H=m._result;H=H(),H.then(function(v){(m._status===0||m._status===-1)&&(m._status=1,m._result=v)},function(v){(m._status===0||m._status===-1)&&(m._status=2,m._result=v)}),m._status===-1&&(m._status=0,m._result=H)}if(m._status===1)return m._result.default;throw m._result}var he=typeof reportError=="function"?reportError:function(m){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof m=="object"&&m!==null&&typeof m.message=="string"?String(m.message):String(m),error:m});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",m);return}console.error(m)},fe={map:q,forEach:function(m,H,v){q(m,function(){H.apply(this,arguments)},v)},count:function(m){var H=0;return q(m,function(){H++}),H},toArray:function(m){return q(m,function(H){return H})||[]},only:function(m){if(!Oe(m))throw Error("React.Children.only expected to receive a single React element child.");return m}};return ne.Activity=U,ne.Children=fe,ne.Component=se,ne.Fragment=y,ne.Profiler=I,ne.PureComponent=B,ne.StrictMode=c,ne.Suspense=p,ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,ne.__COMPILER_RUNTIME={__proto__:null,c:function(m){return F.H.useMemoCache(m)}},ne.cache=function(m){return function(){return m.apply(null,arguments)}},ne.cacheSignal=function(){return null},ne.cloneElement=function(m,H,v){if(m==null)throw Error("The argument must be a React element, but you passed "+m+".");var A=P({},m.props),z=m.key;if(H!=null)for(Z in H.key!==void 0&&(z=""+H.key),H)!te.call(H,Z)||Z==="key"||Z==="__self"||Z==="__source"||Z==="ref"&&H.ref===void 0||(A[Z]=H[Z]);var Z=arguments.length-2;if(Z===1)A.children=v;else if(1<Z){for(var ae=Array(Z),ve=0;ve<Z;ve++)ae[ve]=arguments[ve+2];A.children=ae}return Q(m.type,z,A)},ne.createContext=function(m){return m={$$typeof:b,_currentValue:m,_currentValue2:m,_threadCount:0,Provider:null,Consumer:null},m.Provider=m,m.Consumer={$$typeof:g,_context:m},m},ne.createElement=function(m,H,v){var A,z={},Z=null;if(H!=null)for(A in H.key!==void 0&&(Z=""+H.key),H)te.call(H,A)&&A!=="key"&&A!=="__self"&&A!=="__source"&&(z[A]=H[A]);var ae=arguments.length-2;if(ae===1)z.children=v;else if(1<ae){for(var ve=Array(ae),de=0;de<ae;de++)ve[de]=arguments[de+2];z.children=ve}if(m&&m.defaultProps)for(A in ae=m.defaultProps,ae)z[A]===void 0&&(z[A]=ae[A]);return Q(m,Z,z)},ne.createRef=function(){return{current:null}},ne.forwardRef=function(m){return{$$typeof:N,render:m}},ne.isValidElement=Oe,ne.lazy=function(m){return{$$typeof:x,_payload:{_status:-1,_result:m},_init:$}},ne.memo=function(m,H){return{$$typeof:T,type:m,compare:H===void 0?null:H}},ne.startTransition=function(m){var H=F.T,v={};F.T=v;try{var A=m(),z=F.S;z!==null&&z(v,A),typeof A=="object"&&A!==null&&typeof A.then=="function"&&A.then(oe,he)}catch(Z){he(Z)}finally{H!==null&&v.types!==null&&(H.types=v.types),F.T=H}},ne.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},ne.use=function(m){return F.H.use(m)},ne.useActionState=function(m,H,v){return F.H.useActionState(m,H,v)},ne.useCallback=function(m,H){return F.H.useCallback(m,H)},ne.useContext=function(m){return F.H.useContext(m)},ne.useDebugValue=function(){},ne.useDeferredValue=function(m,H){return F.H.useDeferredValue(m,H)},ne.useEffect=function(m,H){return F.H.useEffect(m,H)},ne.useEffectEvent=function(m){return F.H.useEffectEvent(m)},ne.useId=function(){return F.H.useId()},ne.useImperativeHandle=function(m,H,v){return F.H.useImperativeHandle(m,H,v)},ne.useInsertionEffect=function(m,H){return F.H.useInsertionEffect(m,H)},ne.useLayoutEffect=function(m,H){return F.H.useLayoutEffect(m,H)},ne.useMemo=function(m,H){return F.H.useMemo(m,H)},ne.useOptimistic=function(m,H){return F.H.useOptimistic(m,H)},ne.useReducer=function(m,H,v){return F.H.useReducer(m,H,v)},ne.useRef=function(m){return F.H.useRef(m)},ne.useState=function(m){return F.H.useState(m)},ne.useSyncExternalStore=function(m,H,v){return F.H.useSyncExternalStore(m,H,v)},ne.useTransition=function(){return F.H.useTransition()},ne.version="19.2.4",ne}var Wf;function $r(){return Wf||(Wf=1,Xr.exports=Cg()),Xr.exports}var le=$r(),Qr={exports:{}},cl={},Wr={exports:{}},Zr={};var Zf;function xg(){return Zf||(Zf=1,(function(s){function u(M,q){var $=M.length;M.push(q);e:for(;0<$;){var he=$-1>>>1,fe=M[he];if(0<I(fe,q))M[he]=q,M[$]=fe,$=he;else break e}}function y(M){return M.length===0?null:M[0]}function c(M){if(M.length===0)return null;var q=M[0],$=M.pop();if($!==q){M[0]=$;e:for(var he=0,fe=M.length,m=fe>>>1;he<m;){var H=2*(he+1)-1,v=M[H],A=H+1,z=M[A];if(0>I(v,$))A<fe&&0>I(z,v)?(M[he]=z,M[A]=$,he=A):(M[he]=v,M[H]=$,he=H);else if(A<fe&&0>I(z,$))M[he]=z,M[A]=$,he=A;else break e}}return q}function I(M,q){var $=M.sortIndex-q.sortIndex;return $!==0?$:M.id-q.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var g=performance;s.unstable_now=function(){return g.now()}}else{var b=Date,N=b.now();s.unstable_now=function(){return b.now()-N}}var p=[],T=[],x=1,U=null,k=3,X=!1,Y=!1,P=!1,Ee=!1,se=typeof setTimeout=="function"?setTimeout:null,Ie=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function V(M){for(var q=y(T);q!==null;){if(q.callback===null)c(T);else if(q.startTime<=M)c(T),q.sortIndex=q.expirationTime,u(p,q);else break;q=y(T)}}function ue(M){if(P=!1,V(M),!Y)if(y(p)!==null)Y=!0,oe||(oe=!0,He());else{var q=y(T);q!==null&&Ve(ue,q.startTime-M)}}var oe=!1,F=-1,te=5,Q=-1;function Ae(){return Ee?!0:!(s.unstable_now()-Q<te)}function Oe(){if(Ee=!1,oe){var M=s.unstable_now();Q=M;var q=!0;try{e:{Y=!1,P&&(P=!1,Ie(F),F=-1),X=!0;var $=k;try{t:{for(V(M),U=y(p);U!==null&&!(U.expirationTime>M&&Ae());){var he=U.callback;if(typeof he=="function"){U.callback=null,k=U.priorityLevel;var fe=he(U.expirationTime<=M);if(M=s.unstable_now(),typeof fe=="function"){U.callback=fe,V(M),q=!0;break t}U===y(p)&&c(p),V(M)}else c(p);U=y(p)}if(U!==null)q=!0;else{var m=y(T);m!==null&&Ve(ue,m.startTime-M),q=!1}}break e}finally{U=null,k=$,X=!1}q=void 0}}finally{q?He():oe=!1}}}var He;if(typeof B=="function")He=function(){B(Oe)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,ze=we.port2;we.port1.onmessage=Oe,He=function(){ze.postMessage(null)}}else He=function(){se(Oe,0)};function Ve(M,q){F=se(function(){M(s.unstable_now())},q)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(M){M.callback=null},s.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<M?Math.floor(1e3/M):5},s.unstable_getCurrentPriorityLevel=function(){return k},s.unstable_next=function(M){switch(k){case 1:case 2:case 3:var q=3;break;default:q=k}var $=k;k=q;try{return M()}finally{k=$}},s.unstable_requestPaint=function(){Ee=!0},s.unstable_runWithPriority=function(M,q){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var $=k;k=M;try{return q()}finally{k=$}},s.unstable_scheduleCallback=function(M,q,$){var he=s.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?he+$:he):$=he,M){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=$+fe,M={id:x++,callback:q,priorityLevel:M,startTime:$,expirationTime:fe,sortIndex:-1},$>he?(M.sortIndex=$,u(T,M),y(p)===null&&M===y(T)&&(P?(Ie(F),F=-1):P=!0,Ve(ue,$-he))):(M.sortIndex=fe,u(p,M),Y||X||(Y=!0,oe||(oe=!0,He()))),M},s.unstable_shouldYield=Ae,s.unstable_wrapCallback=function(M){var q=k;return function(){var $=k;k=q;try{return M.apply(this,arguments)}finally{k=$}}}})(Zr)),Zr}var Jf;function Og(){return Jf||(Jf=1,Wr.exports=xg()),Wr.exports}var Jr={exports:{}},gt={};var Pf;function Ng(){if(Pf)return gt;Pf=1;var s=$r();function u(p){var T="https://react.dev/errors/"+p;if(1<arguments.length){T+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)T+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+p+"; visit "+T+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function y(){}var c={d:{f:y,r:function(){throw Error(u(522))},D:y,C:y,L:y,m:y,X:y,S:y,M:y},p:0,findDOMNode:null},I=Symbol.for("react.portal");function g(p,T,x){var U=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:I,key:U==null?null:""+U,children:p,containerInfo:T,implementation:x}}var b=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function N(p,T){if(p==="font")return"";if(typeof T=="string")return T==="use-credentials"?T:""}return gt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=c,gt.createPortal=function(p,T){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!T||T.nodeType!==1&&T.nodeType!==9&&T.nodeType!==11)throw Error(u(299));return g(p,T,null,x)},gt.flushSync=function(p){var T=b.T,x=c.p;try{if(b.T=null,c.p=2,p)return p()}finally{b.T=T,c.p=x,c.d.f()}},gt.preconnect=function(p,T){typeof p=="string"&&(T?(T=T.crossOrigin,T=typeof T=="string"?T==="use-credentials"?T:"":void 0):T=null,c.d.C(p,T))},gt.prefetchDNS=function(p){typeof p=="string"&&c.d.D(p)},gt.preinit=function(p,T){if(typeof p=="string"&&T&&typeof T.as=="string"){var x=T.as,U=N(x,T.crossOrigin),k=typeof T.integrity=="string"?T.integrity:void 0,X=typeof T.fetchPriority=="string"?T.fetchPriority:void 0;x==="style"?c.d.S(p,typeof T.precedence=="string"?T.precedence:void 0,{crossOrigin:U,integrity:k,fetchPriority:X}):x==="script"&&c.d.X(p,{crossOrigin:U,integrity:k,fetchPriority:X,nonce:typeof T.nonce=="string"?T.nonce:void 0})}},gt.preinitModule=function(p,T){if(typeof p=="string")if(typeof T=="object"&&T!==null){if(T.as==null||T.as==="script"){var x=N(T.as,T.crossOrigin);c.d.M(p,{crossOrigin:x,integrity:typeof T.integrity=="string"?T.integrity:void 0,nonce:typeof T.nonce=="string"?T.nonce:void 0})}}else T==null&&c.d.M(p)},gt.preload=function(p,T){if(typeof p=="string"&&typeof T=="object"&&T!==null&&typeof T.as=="string"){var x=T.as,U=N(x,T.crossOrigin);c.d.L(p,x,{crossOrigin:U,integrity:typeof T.integrity=="string"?T.integrity:void 0,nonce:typeof T.nonce=="string"?T.nonce:void 0,type:typeof T.type=="string"?T.type:void 0,fetchPriority:typeof T.fetchPriority=="string"?T.fetchPriority:void 0,referrerPolicy:typeof T.referrerPolicy=="string"?T.referrerPolicy:void 0,imageSrcSet:typeof T.imageSrcSet=="string"?T.imageSrcSet:void 0,imageSizes:typeof T.imageSizes=="string"?T.imageSizes:void 0,media:typeof T.media=="string"?T.media:void 0})}},gt.preloadModule=function(p,T){if(typeof p=="string")if(T){var x=N(T.as,T.crossOrigin);c.d.m(p,{as:typeof T.as=="string"&&T.as!=="script"?T.as:void 0,crossOrigin:x,integrity:typeof T.integrity=="string"?T.integrity:void 0})}else c.d.m(p)},gt.requestFormReset=function(p){c.d.r(p)},gt.unstable_batchedUpdates=function(p,T){return p(T)},gt.useFormState=function(p,T,x){return b.H.useFormState(p,T,x)},gt.useFormStatus=function(){return b.H.useHostTransitionStatus()},gt.version="19.2.4",gt}var $f;function bg(){if($f)return Jr.exports;$f=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(u){console.error(u)}}return s(),Jr.exports=Ng(),Jr.exports}var eh;function Mg(){if(eh)return cl;eh=1;var s=Og(),u=$r(),y=bg();function c(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function I(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function g(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function b(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function N(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(g(e)!==e)throw Error(c(188))}function T(e){var t=e.alternate;if(!t){if(t=g(e),t===null)throw Error(c(188));return t!==e?null:e}for(var a=e,i=t;;){var n=a.return;if(n===null)break;var l=n.alternate;if(l===null){if(i=n.return,i!==null){a=i;continue}break}if(n.child===l.child){for(l=n.child;l;){if(l===a)return p(n),e;if(l===i)return p(n),t;l=l.sibling}throw Error(c(188))}if(a.return!==i.return)a=n,i=l;else{for(var o=!1,r=n.child;r;){if(r===a){o=!0,a=n,i=l;break}if(r===i){o=!0,i=n,a=l;break}r=r.sibling}if(!o){for(r=l.child;r;){if(r===a){o=!0,a=l,i=n;break}if(r===i){o=!0,i=l,a=n;break}r=r.sibling}if(!o)throw Error(c(189))}}if(a.alternate!==i)throw Error(c(190))}if(a.tag!==3)throw Error(c(188));return a.stateNode.current===a?e:t}function x(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=x(e),t!==null)return t;e=e.sibling}return null}var U=Object.assign,k=Symbol.for("react.element"),X=Symbol.for("react.transitional.element"),Y=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),Ee=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),Ie=Symbol.for("react.consumer"),B=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),Q=Symbol.for("react.activity"),Ae=Symbol.for("react.memo_cache_sentinel"),Oe=Symbol.iterator;function He(e){return e===null||typeof e!="object"?null:(e=Oe&&e[Oe]||e["@@iterator"],typeof e=="function"?e:null)}var we=Symbol.for("react.client.reference");function ze(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===we?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case P:return"Fragment";case se:return"Profiler";case Ee:return"StrictMode";case ue:return"Suspense";case oe:return"SuspenseList";case Q:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Y:return"Portal";case B:return e.displayName||"Context";case Ie:return(e._context.displayName||"Context")+".Consumer";case V:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case F:return t=e.displayName||null,t!==null?t:ze(e.type)||"Memo";case te:t=e._payload,e=e._init;try{return ze(e(t))}catch{}}return null}var Ve=Array.isArray,M=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=y.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},he=[],fe=-1;function m(e){return{current:e}}function H(e){0>fe||(e.current=he[fe],he[fe]=null,fe--)}function v(e,t){fe++,he[fe]=e.current,e.current=t}var A=m(null),z=m(null),Z=m(null),ae=m(null);function ve(e,t){switch(v(Z,t),v(z,e),v(A,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?gf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=gf(t),e=yf(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}H(A),v(A,e)}function de(){H(A),H(z),H(Z)}function Tt(e){e.memoizedState!==null&&v(ae,e);var t=A.current,a=yf(t,e.type);t!==a&&(v(z,e),v(A,a))}function Et(e){z.current===e&&(H(A),H(z)),ae.current===e&&(H(ae),nl._currentValue=$)}var nt,Se;function Be(e){if(nt===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);nt=t&&t[1]||"",Se=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nt+e+Se}var wt=!1;function la(e,t){if(!e||wt)return"";wt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var w=function(){throw Error()};if(Object.defineProperty(w.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(w,[])}catch(O){var S=O}Reflect.construct(e,[],w)}else{try{w.call()}catch(O){S=O}e.call(w.prototype)}}else{try{throw Error()}catch(O){S=O}(w=e())&&typeof w.catch=="function"&&w.catch(function(){})}}catch(O){if(O&&S&&typeof O.stack=="string")return[O.stack,S.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var l=i.DetermineComponentFrameRoot(),o=l[0],r=l[1];if(o&&r){var f=o.split(`
`),_=r.split(`
`);for(n=i=0;i<f.length&&!f[i].includes("DetermineComponentFrameRoot");)i++;for(;n<_.length&&!_[n].includes("DetermineComponentFrameRoot");)n++;if(i===f.length||n===_.length)for(i=f.length-1,n=_.length-1;1<=i&&0<=n&&f[i]!==_[n];)n--;for(;1<=i&&0<=n;i--,n--)if(f[i]!==_[n]){if(i!==1||n!==1)do if(i--,n--,0>n||f[i]!==_[n]){var D=`
`+f[i].replace(" at new "," at ");return e.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",e.displayName)),D}while(1<=i&&0<=n);break}}}finally{wt=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Be(a):""}function ea(e,t){switch(e.tag){case 26:case 27:case 5:return Be(e.type);case 16:return Be("Lazy");case 13:return e.child!==t&&t!==null?Be("Suspense Fallback"):Be("Suspense");case 19:return Be("SuspenseList");case 0:case 15:return la(e.type,!1);case 11:return la(e.type.render,!1);case 1:return la(e.type,!0);case 31:return Be("Activity");default:return""}}function ft(e){try{var t="",a=null;do t+=ea(e,a),a=e,e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var ht=Object.prototype.hasOwnProperty,Bt=s.unstable_scheduleCallback,ua=s.unstable_cancelCallback,Ii=s.unstable_shouldYield,vi=s.unstable_requestPaint,pt=s.unstable_now,hl=s.unstable_getCurrentPriorityLevel,yn=s.unstable_ImmediatePriority,ml=s.unstable_UserBlockingPriority,Si=s.unstable_NormalPriority,Us=s.unstable_LowPriority,gl=s.unstable_IdlePriority,Tn=s.log,da=s.unstable_setDisableYieldValue,ni=null,C=null;function j(e){if(typeof Tn=="function"&&da(e),C&&typeof C.setStrictMode=="function")try{C.setStrictMode(ni,e)}catch{}}var G=Math.clz32?Math.clz32:Ze,ie=Math.log,Me=Math.LN2;function Ze(e){return e>>>=0,e===0?32:31-(ie(e)/Me|0)|0}var at=256,Ge=262144,qt=4194304;function je(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Je(e,t,a){var i=e.pendingLanes;if(i===0)return 0;var n=0,l=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var r=i&134217727;return r!==0?(i=r&~l,i!==0?n=je(i):(o&=r,o!==0?n=je(o):a||(a=r&~e,a!==0&&(n=je(a))))):(r=i&~l,r!==0?n=je(r):o!==0?n=je(o):a||(a=i&~e,a!==0&&(n=je(a)))),n===0?0:t!==0&&t!==n&&(t&l)===0&&(l=n&-n,a=t&-t,l>=a||l===32&&(a&4194048)!==0)?t:n}function At(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Ce(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mt(){var e=qt;return qt<<=1,(qt&62914560)===0&&(qt=4194304),e}function ta(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Ft(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function yl(e,t,a,i,n,l){var o=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var r=e.entanglements,f=e.expirationTimes,_=e.hiddenUpdates;for(a=o&~a;0<a;){var D=31-G(a),w=1<<D;r[D]=0,f[D]=-1;var S=_[D];if(S!==null)for(_[D]=null,D=0;D<S.length;D++){var O=S[D];O!==null&&(O.lane&=-536870913)}a&=~w}i!==0&&Gt(e,i,0),l!==0&&n===0&&e.tag!==0&&(e.suspendedLanes|=l&~(o&~t))}function Gt(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-G(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|a&261930}function Ci(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var i=31-G(a),n=1<<i;n&t|e[i]&t&&(e[i]|=t),a&=~n}}function Tl(e,t){var a=t&-t;return a=(a&42)!==0?1:El(a),(a&(e.suspendedLanes|t))!==0?0:a}function El(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function En(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function pl(){var e=q.p;return e!==0?e:(e=window.event,e===void 0?32:qf(e.type))}function ec(e,t){var a=q.p;try{return q.p=e,t()}finally{q.p=a}}var Ma=Math.random().toString(36).slice(2),ot="__reactFiber$"+Ma,Rt="__reactProps$"+Ma,xi="__reactContainer$"+Ma,Hs="__reactEvents$"+Ma,hh="__reactListeners$"+Ma,mh="__reactHandles$"+Ma,tc="__reactResources$"+Ma,pn="__reactMarker$"+Ma;function ws(e){delete e[ot],delete e[Rt],delete e[Hs],delete e[hh],delete e[mh]}function Oi(e){var t=e[ot];if(t)return t;for(var a=e.parentNode;a;){if(t=a[xi]||a[ot]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=If(e);e!==null;){if(a=e[ot])return a;e=If(e)}return t}e=a,a=e.parentNode}return null}function Ni(e){if(e=e[ot]||e[xi]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function An(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(c(33))}function bi(e){var t=e[tc];return t||(t=e[tc]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function lt(e){e[pn]=!0}var ac=new Set,ic={};function li(e,t){Mi(e,t),Mi(e+"Capture",t)}function Mi(e,t){for(ic[e]=t,e=0;e<t.length;e++)ac.add(t[e])}var gh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nc={},lc={};function yh(e){return ht.call(lc,e)?!0:ht.call(nc,e)?!1:gh.test(e)?lc[e]=!0:(nc[e]=!0,!1)}function Al(e,t,a){if(yh(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function Rl(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function fa(e,t,a,i){if(i===null)e.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+i)}}function Yt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function sc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Th(e,t,a){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var n=i.get,l=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(o){a=""+o,l.call(this,o)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(o){a=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Bs(e){if(!e._valueTracker){var t=sc(e)?"checked":"value";e._valueTracker=Th(e,t,""+e[t])}}function oc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),i="";return e&&(i=sc(e)?e.checked?"true":"false":e.value),e=i,e!==a?(t.setValue(e),!0):!1}function _l(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Eh=/[\n"\\]/g;function zt(e){return e.replace(Eh,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function qs(e,t,a,i,n,l,o,r){e.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?e.type=o:e.removeAttribute("type"),t!=null?o==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Yt(t)):e.value!==""+Yt(t)&&(e.value=""+Yt(t)):o!=="submit"&&o!=="reset"||e.removeAttribute("value"),t!=null?Fs(e,o,Yt(t)):a!=null?Fs(e,o,Yt(a)):i!=null&&e.removeAttribute("value"),n==null&&l!=null&&(e.defaultChecked=!!l),n!=null&&(e.checked=n&&typeof n!="function"&&typeof n!="symbol"),r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?e.name=""+Yt(r):e.removeAttribute("name")}function rc(e,t,a,i,n,l,o,r){if(l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"&&(e.type=l),t!=null||a!=null){if(!(l!=="submit"&&l!=="reset"||t!=null)){Bs(e);return}a=a!=null?""+Yt(a):"",t=t!=null?""+Yt(t):a,r||t===e.value||(e.value=t),e.defaultValue=t}i=i??n,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=r?e.checked:!!i,e.defaultChecked=!!i,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.name=o),Bs(e)}function Fs(e,t,a){t==="number"&&_l(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Di(e,t,a,i){if(e=e.options,t){t={};for(var n=0;n<a.length;n++)t["$"+a[n]]=!0;for(a=0;a<e.length;a++)n=t.hasOwnProperty("$"+e[a].value),e[a].selected!==n&&(e[a].selected=n),n&&i&&(e[a].defaultSelected=!0)}else{for(a=""+Yt(a),t=null,n=0;n<e.length;n++){if(e[n].value===a){e[n].selected=!0,i&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function cc(e,t,a){if(t!=null&&(t=""+Yt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Yt(a):""}function uc(e,t,a,i){if(t==null){if(i!=null){if(a!=null)throw Error(c(92));if(Ve(i)){if(1<i.length)throw Error(c(93));i=i[0]}a=i}a==null&&(a=""),t=a}a=Yt(t),e.defaultValue=a,i=e.textContent,i===a&&i!==""&&i!==null&&(e.value=i),Bs(e)}function ki(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var ph=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dc(e,t,a){var i=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,a):typeof a!="number"||a===0||ph.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function fc(e,t,a){if(t!=null&&typeof t!="object")throw Error(c(62));if(e=e.style,a!=null){for(var i in a)!a.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var n in t)i=t[n],t.hasOwnProperty(n)&&a[n]!==i&&dc(e,n,i)}else for(var l in t)t.hasOwnProperty(l)&&dc(e,l,t[l])}function Gs(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ah=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Il(e){return Rh.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ha(){}var Ys=null;function zs(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Li=null,Ui=null;function hc(e){var t=Ni(e);if(t&&(e=t.stateNode)){var a=e[Rt]||null;e:switch(e=t.stateNode,t.type){case"input":if(qs(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+zt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var i=a[t];if(i!==e&&i.form===e.form){var n=i[Rt]||null;if(!n)throw Error(c(90));qs(i,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(t=0;t<a.length;t++)i=a[t],i.form===e.form&&oc(i)}break e;case"textarea":cc(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Di(e,!!a.multiple,t,!1)}}}var js=!1;function mc(e,t,a){if(js)return e(t,a);js=!0;try{var i=e(t);return i}finally{if(js=!1,(Li!==null||Ui!==null)&&(us(),Li&&(t=Li,e=Ui,Ui=Li=null,hc(t),e)))for(t=0;t<e.length;t++)hc(e[t])}}function Rn(e,t){var a=e.stateNode;if(a===null)return null;var i=a[Rt]||null;if(i===null)return null;a=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(c(231,t,typeof a));return a}var ma=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vs=!1;if(ma)try{var _n={};Object.defineProperty(_n,"passive",{get:function(){Vs=!0}}),window.addEventListener("test",_n,_n),window.removeEventListener("test",_n,_n)}catch{Vs=!1}var Da=null,Ks=null,vl=null;function gc(){if(vl)return vl;var e,t=Ks,a=t.length,i,n="value"in Da?Da.value:Da.textContent,l=n.length;for(e=0;e<a&&t[e]===n[e];e++);var o=a-e;for(i=1;i<=o&&t[a-i]===n[l-i];i++);return vl=n.slice(e,1<i?1-i:void 0)}function Sl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Cl(){return!0}function yc(){return!1}function _t(e){function t(a,i,n,l,o){this._reactName=a,this._targetInst=n,this.type=i,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var r in e)e.hasOwnProperty(r)&&(a=e[r],this[r]=a?a(l):l[r]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Cl:yc,this.isPropagationStopped=yc,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Cl)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Cl)},persist:function(){},isPersistent:Cl}),t}var si={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xl=_t(si),In=U({},si,{view:0,detail:0}),_h=_t(In),Xs,Qs,vn,Ol=U({},In,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zs,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==vn&&(vn&&e.type==="mousemove"?(Xs=e.screenX-vn.screenX,Qs=e.screenY-vn.screenY):Qs=Xs=0,vn=e),Xs)},movementY:function(e){return"movementY"in e?e.movementY:Qs}}),Tc=_t(Ol),Ih=U({},Ol,{dataTransfer:0}),vh=_t(Ih),Sh=U({},In,{relatedTarget:0}),Ws=_t(Sh),Ch=U({},si,{animationName:0,elapsedTime:0,pseudoElement:0}),xh=_t(Ch),Oh=U({},si,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Nh=_t(Oh),bh=U({},si,{data:0}),Ec=_t(bh),Mh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=kh[e])?!!t[e]:!1}function Zs(){return Lh}var Uh=U({},In,{key:function(e){if(e.key){var t=Mh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Sl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Dh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zs,charCode:function(e){return e.type==="keypress"?Sl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Sl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hh=_t(Uh),wh=U({},Ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pc=_t(wh),Bh=U({},In,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zs}),qh=_t(Bh),Fh=U({},si,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gh=_t(Fh),Yh=U({},Ol,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),zh=_t(Yh),jh=U({},si,{newState:0,oldState:0}),Vh=_t(jh),Kh=[9,13,27,32],Js=ma&&"CompositionEvent"in window,Sn=null;ma&&"documentMode"in document&&(Sn=document.documentMode);var Xh=ma&&"TextEvent"in window&&!Sn,Ac=ma&&(!Js||Sn&&8<Sn&&11>=Sn),Rc=" ",_c=!1;function Ic(e,t){switch(e){case"keyup":return Kh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Hi=!1;function Qh(e,t){switch(e){case"compositionend":return vc(t);case"keypress":return t.which!==32?null:(_c=!0,Rc);case"textInput":return e=t.data,e===Rc&&_c?null:e;default:return null}}function Wh(e,t){if(Hi)return e==="compositionend"||!Js&&Ic(e,t)?(e=gc(),vl=Ks=Da=null,Hi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ac&&t.locale!=="ko"?null:t.data;default:return null}}var Zh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Zh[e.type]:t==="textarea"}function Cc(e,t,a,i){Li?Ui?Ui.push(i):Ui=[i]:Li=i,t=Ts(t,"onChange"),0<t.length&&(a=new xl("onChange","change",null,a,i),e.push({event:a,listeners:t}))}var Cn=null,xn=null;function Jh(e){cf(e,0)}function Nl(e){var t=An(e);if(oc(t))return e}function xc(e,t){if(e==="change")return t}var Oc=!1;if(ma){var Ps;if(ma){var $s="oninput"in document;if(!$s){var Nc=document.createElement("div");Nc.setAttribute("oninput","return;"),$s=typeof Nc.oninput=="function"}Ps=$s}else Ps=!1;Oc=Ps&&(!document.documentMode||9<document.documentMode)}function bc(){Cn&&(Cn.detachEvent("onpropertychange",Mc),xn=Cn=null)}function Mc(e){if(e.propertyName==="value"&&Nl(xn)){var t=[];Cc(t,xn,e,zs(e)),mc(Jh,t)}}function Ph(e,t,a){e==="focusin"?(bc(),Cn=t,xn=a,Cn.attachEvent("onpropertychange",Mc)):e==="focusout"&&bc()}function $h(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Nl(xn)}function em(e,t){if(e==="click")return Nl(t)}function tm(e,t){if(e==="input"||e==="change")return Nl(t)}function am(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Nt=typeof Object.is=="function"?Object.is:am;function On(e,t){if(Nt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),i=Object.keys(t);if(a.length!==i.length)return!1;for(i=0;i<a.length;i++){var n=a[i];if(!ht.call(t,n)||!Nt(e[n],t[n]))return!1}return!0}function Dc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function kc(e,t){var a=Dc(e);e=0;for(var i;a;){if(a.nodeType===3){if(i=e+a.textContent.length,e<=t&&i>=t)return{node:a,offset:t-e};e=i}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Dc(a)}}function Lc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Lc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Uc(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=_l(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=_l(e.document)}return t}function eo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var im=ma&&"documentMode"in document&&11>=document.documentMode,wi=null,to=null,Nn=null,ao=!1;function Hc(e,t,a){var i=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ao||wi==null||wi!==_l(i)||(i=wi,"selectionStart"in i&&eo(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Nn&&On(Nn,i)||(Nn=i,i=Ts(to,"onSelect"),0<i.length&&(t=new xl("onSelect","select",null,t,a),e.push({event:t,listeners:i}),t.target=wi)))}function oi(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Bi={animationend:oi("Animation","AnimationEnd"),animationiteration:oi("Animation","AnimationIteration"),animationstart:oi("Animation","AnimationStart"),transitionrun:oi("Transition","TransitionRun"),transitionstart:oi("Transition","TransitionStart"),transitioncancel:oi("Transition","TransitionCancel"),transitionend:oi("Transition","TransitionEnd")},io={},wc={};ma&&(wc=document.createElement("div").style,"AnimationEvent"in window||(delete Bi.animationend.animation,delete Bi.animationiteration.animation,delete Bi.animationstart.animation),"TransitionEvent"in window||delete Bi.transitionend.transition);function ri(e){if(io[e])return io[e];if(!Bi[e])return e;var t=Bi[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in wc)return io[e]=t[a];return e}var Bc=ri("animationend"),qc=ri("animationiteration"),Fc=ri("animationstart"),nm=ri("transitionrun"),lm=ri("transitionstart"),sm=ri("transitioncancel"),Gc=ri("transitionend"),Yc=new Map,no="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");no.push("scrollEnd");function aa(e,t){Yc.set(e,t),li(t,[e])}var bl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},jt=[],qi=0,lo=0;function Ml(){for(var e=qi,t=lo=qi=0;t<e;){var a=jt[t];jt[t++]=null;var i=jt[t];jt[t++]=null;var n=jt[t];jt[t++]=null;var l=jt[t];if(jt[t++]=null,i!==null&&n!==null){var o=i.pending;o===null?n.next=n:(n.next=o.next,o.next=n),i.pending=n}l!==0&&zc(a,n,l)}}function Dl(e,t,a,i){jt[qi++]=e,jt[qi++]=t,jt[qi++]=a,jt[qi++]=i,lo|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function so(e,t,a,i){return Dl(e,t,a,i),kl(e)}function ci(e,t){return Dl(e,null,null,t),kl(e)}function zc(e,t,a){e.lanes|=a;var i=e.alternate;i!==null&&(i.lanes|=a);for(var n=!1,l=e.return;l!==null;)l.childLanes|=a,i=l.alternate,i!==null&&(i.childLanes|=a),l.tag===22&&(e=l.stateNode,e===null||e._visibility&1||(n=!0)),e=l,l=l.return;return e.tag===3?(l=e.stateNode,n&&t!==null&&(n=31-G(a),e=l.hiddenUpdates,i=e[n],i===null?e[n]=[t]:i.push(t),t.lane=a|536870912),l):null}function kl(e){if(50<Jn)throw Jn=0,yr=null,Error(c(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Fi={};function om(e,t,a,i){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bt(e,t,a,i){return new om(e,t,a,i)}function oo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ga(e,t){var a=e.alternate;return a===null?(a=bt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function jc(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ll(e,t,a,i,n,l){var o=0;if(i=e,typeof e=="function")oo(e)&&(o=1);else if(typeof e=="string")o=fg(e,a,A.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Q:return e=bt(31,a,t,n),e.elementType=Q,e.lanes=l,e;case P:return ui(a.children,n,l,t);case Ee:o=8,n|=24;break;case se:return e=bt(12,a,t,n|2),e.elementType=se,e.lanes=l,e;case ue:return e=bt(13,a,t,n),e.elementType=ue,e.lanes=l,e;case oe:return e=bt(19,a,t,n),e.elementType=oe,e.lanes=l,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case B:o=10;break e;case Ie:o=9;break e;case V:o=11;break e;case F:o=14;break e;case te:o=16,i=null;break e}o=29,a=Error(c(130,e===null?"null":typeof e,"")),i=null}return t=bt(o,a,t,n),t.elementType=e,t.type=i,t.lanes=l,t}function ui(e,t,a,i){return e=bt(7,e,i,t),e.lanes=a,e}function ro(e,t,a){return e=bt(6,e,null,t),e.lanes=a,e}function Vc(e){var t=bt(18,null,null,0);return t.stateNode=e,t}function co(e,t,a){return t=bt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Kc=new WeakMap;function Vt(e,t){if(typeof e=="object"&&e!==null){var a=Kc.get(e);return a!==void 0?a:(t={value:e,source:t,stack:ft(t)},Kc.set(e,t),t)}return{value:e,source:t,stack:ft(t)}}var Gi=[],Yi=0,Ul=null,bn=0,Kt=[],Xt=0,ka=null,sa=1,oa="";function ya(e,t){Gi[Yi++]=bn,Gi[Yi++]=Ul,Ul=e,bn=t}function Xc(e,t,a){Kt[Xt++]=sa,Kt[Xt++]=oa,Kt[Xt++]=ka,ka=e;var i=sa;e=oa;var n=32-G(i)-1;i&=~(1<<n),a+=1;var l=32-G(t)+n;if(30<l){var o=n-n%5;l=(i&(1<<o)-1).toString(32),i>>=o,n-=o,sa=1<<32-G(t)+n|a<<n|i,oa=l+e}else sa=1<<l|a<<n|i,oa=e}function uo(e){e.return!==null&&(ya(e,1),Xc(e,1,0))}function fo(e){for(;e===Ul;)Ul=Gi[--Yi],Gi[Yi]=null,bn=Gi[--Yi],Gi[Yi]=null;for(;e===ka;)ka=Kt[--Xt],Kt[Xt]=null,oa=Kt[--Xt],Kt[Xt]=null,sa=Kt[--Xt],Kt[Xt]=null}function Qc(e,t){Kt[Xt++]=sa,Kt[Xt++]=oa,Kt[Xt++]=ka,sa=t.id,oa=t.overflow,ka=e}var rt=null,qe=null,pe=!1,La=null,Qt=!1,ho=Error(c(519));function Ua(e){var t=Error(c(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Mn(Vt(t,e)),ho}function Wc(e){var t=e.stateNode,a=e.type,i=e.memoizedProps;switch(t[ot]=e,t[Rt]=i,a){case"dialog":ge("cancel",t),ge("close",t);break;case"iframe":case"object":case"embed":ge("load",t);break;case"video":case"audio":for(a=0;a<$n.length;a++)ge($n[a],t);break;case"source":ge("error",t);break;case"img":case"image":case"link":ge("error",t),ge("load",t);break;case"details":ge("toggle",t);break;case"input":ge("invalid",t),rc(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":ge("invalid",t);break;case"textarea":ge("invalid",t),uc(t,i.value,i.defaultValue,i.children)}a=i.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||i.suppressHydrationWarning===!0||hf(t.textContent,a)?(i.popover!=null&&(ge("beforetoggle",t),ge("toggle",t)),i.onScroll!=null&&ge("scroll",t),i.onScrollEnd!=null&&ge("scrollend",t),i.onClick!=null&&(t.onclick=ha),t=!0):t=!1,t||Ua(e,!0)}function Zc(e){for(rt=e.return;rt;)switch(rt.tag){case 5:case 31:case 13:Qt=!1;return;case 27:case 3:Qt=!0;return;default:rt=rt.return}}function zi(e){if(e!==rt)return!1;if(!pe)return Zc(e),pe=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Mr(e.type,e.memoizedProps)),a=!a),a&&qe&&Ua(e),Zc(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));qe=_f(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));qe=_f(e)}else t===27?(t=qe,Wa(e.type)?(e=Hr,Hr=null,qe=e):qe=t):qe=rt?Zt(e.stateNode.nextSibling):null;return!0}function di(){qe=rt=null,pe=!1}function mo(){var e=La;return e!==null&&(Ct===null?Ct=e:Ct.push.apply(Ct,e),La=null),e}function Mn(e){La===null?La=[e]:La.push(e)}var go=m(null),fi=null,Ta=null;function Ha(e,t,a){v(go,t._currentValue),t._currentValue=a}function Ea(e){e._currentValue=go.current,H(go)}function yo(e,t,a){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===a)break;e=e.return}}function To(e,t,a,i){var n=e.child;for(n!==null&&(n.return=e);n!==null;){var l=n.dependencies;if(l!==null){var o=n.child;l=l.firstContext;e:for(;l!==null;){var r=l;l=n;for(var f=0;f<t.length;f++)if(r.context===t[f]){l.lanes|=a,r=l.alternate,r!==null&&(r.lanes|=a),yo(l.return,a,e),i||(o=null);break e}l=r.next}}else if(n.tag===18){if(o=n.return,o===null)throw Error(c(341));o.lanes|=a,l=o.alternate,l!==null&&(l.lanes|=a),yo(o,a,e),o=null}else o=n.child;if(o!==null)o.return=n;else for(o=n;o!==null;){if(o===e){o=null;break}if(n=o.sibling,n!==null){n.return=o.return,o=n;break}o=o.return}n=o}}function ji(e,t,a,i){e=null;for(var n=t,l=!1;n!==null;){if(!l){if((n.flags&524288)!==0)l=!0;else if((n.flags&262144)!==0)break}if(n.tag===10){var o=n.alternate;if(o===null)throw Error(c(387));if(o=o.memoizedProps,o!==null){var r=n.type;Nt(n.pendingProps.value,o.value)||(e!==null?e.push(r):e=[r])}}else if(n===ae.current){if(o=n.alternate,o===null)throw Error(c(387));o.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(e!==null?e.push(nl):e=[nl])}n=n.return}e!==null&&To(t,e,a,i),t.flags|=262144}function Hl(e){for(e=e.firstContext;e!==null;){if(!Nt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function hi(e){fi=e,Ta=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ct(e){return Jc(fi,e)}function wl(e,t){return fi===null&&hi(e),Jc(e,t)}function Jc(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Ta===null){if(e===null)throw Error(c(308));Ta=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ta=Ta.next=t;return a}var rm=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},cm=s.unstable_scheduleCallback,um=s.unstable_NormalPriority,Pe={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Eo(){return{controller:new rm,data:new Map,refCount:0}}function Dn(e){e.refCount--,e.refCount===0&&cm(um,function(){e.controller.abort()})}var kn=null,po=0,Vi=0,Ki=null;function dm(e,t){if(kn===null){var a=kn=[];po=0,Vi=_r(),Ki={status:"pending",value:void 0,then:function(i){a.push(i)}}}return po++,t.then(Pc,Pc),t}function Pc(){if(--po===0&&kn!==null){Ki!==null&&(Ki.status="fulfilled");var e=kn;kn=null,Vi=0,Ki=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function fm(e,t){var a=[],i={status:"pending",value:null,reason:null,then:function(n){a.push(n)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var n=0;n<a.length;n++)(0,a[n])(t)},function(n){for(i.status="rejected",i.reason=n,n=0;n<a.length;n++)(0,a[n])(void 0)}),i}var $c=M.S;M.S=function(e,t){Hd=pt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&dm(e,t),$c!==null&&$c(e,t)};var mi=m(null);function Ao(){var e=mi.current;return e!==null?e:Ue.pooledCache}function Bl(e,t){t===null?v(mi,mi.current):v(mi,t.pool)}function eu(){var e=Ao();return e===null?null:{parent:Pe._currentValue,pool:e}}var Xi=Error(c(460)),Ro=Error(c(474)),ql=Error(c(542)),Fl={then:function(){}};function tu(e){return e=e.status,e==="fulfilled"||e==="rejected"}function au(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(ha,ha),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,nu(e),e;default:if(typeof t.status=="string")t.then(ha,ha);else{if(e=Ue,e!==null&&100<e.shellSuspendCounter)throw Error(c(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var n=t;n.status="fulfilled",n.value=i}},function(i){if(t.status==="pending"){var n=t;n.status="rejected",n.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,nu(e),e}throw yi=t,Xi}}function gi(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(yi=a,Xi):a}}var yi=null;function iu(){if(yi===null)throw Error(c(459));var e=yi;return yi=null,e}function nu(e){if(e===Xi||e===ql)throw Error(c(483))}var Qi=null,Ln=0;function Gl(e){var t=Ln;return Ln+=1,Qi===null&&(Qi=[]),au(Qi,e,t)}function Un(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Yl(e,t){throw t.$$typeof===k?Error(c(525)):(e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function lu(e){function t(E,h){if(e){var R=E.deletions;R===null?(E.deletions=[h],E.flags|=16):R.push(h)}}function a(E,h){if(!e)return null;for(;h!==null;)t(E,h),h=h.sibling;return null}function i(E){for(var h=new Map;E!==null;)E.key!==null?h.set(E.key,E):h.set(E.index,E),E=E.sibling;return h}function n(E,h){return E=ga(E,h),E.index=0,E.sibling=null,E}function l(E,h,R){return E.index=R,e?(R=E.alternate,R!==null?(R=R.index,R<h?(E.flags|=67108866,h):R):(E.flags|=67108866,h)):(E.flags|=1048576,h)}function o(E){return e&&E.alternate===null&&(E.flags|=67108866),E}function r(E,h,R,L){return h===null||h.tag!==6?(h=ro(R,E.mode,L),h.return=E,h):(h=n(h,R),h.return=E,h)}function f(E,h,R,L){var J=R.type;return J===P?D(E,h,R.props.children,L,R.key):h!==null&&(h.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===te&&gi(J)===h.type)?(h=n(h,R.props),Un(h,R),h.return=E,h):(h=Ll(R.type,R.key,R.props,null,E.mode,L),Un(h,R),h.return=E,h)}function _(E,h,R,L){return h===null||h.tag!==4||h.stateNode.containerInfo!==R.containerInfo||h.stateNode.implementation!==R.implementation?(h=co(R,E.mode,L),h.return=E,h):(h=n(h,R.children||[]),h.return=E,h)}function D(E,h,R,L,J){return h===null||h.tag!==7?(h=ui(R,E.mode,L,J),h.return=E,h):(h=n(h,R),h.return=E,h)}function w(E,h,R){if(typeof h=="string"&&h!==""||typeof h=="number"||typeof h=="bigint")return h=ro(""+h,E.mode,R),h.return=E,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case X:return R=Ll(h.type,h.key,h.props,null,E.mode,R),Un(R,h),R.return=E,R;case Y:return h=co(h,E.mode,R),h.return=E,h;case te:return h=gi(h),w(E,h,R)}if(Ve(h)||He(h))return h=ui(h,E.mode,R,null),h.return=E,h;if(typeof h.then=="function")return w(E,Gl(h),R);if(h.$$typeof===B)return w(E,wl(E,h),R);Yl(E,h)}return null}function S(E,h,R,L){var J=h!==null?h.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return J!==null?null:r(E,h,""+R,L);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case X:return R.key===J?f(E,h,R,L):null;case Y:return R.key===J?_(E,h,R,L):null;case te:return R=gi(R),S(E,h,R,L)}if(Ve(R)||He(R))return J!==null?null:D(E,h,R,L,null);if(typeof R.then=="function")return S(E,h,Gl(R),L);if(R.$$typeof===B)return S(E,h,wl(E,R),L);Yl(E,R)}return null}function O(E,h,R,L,J){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return E=E.get(R)||null,r(h,E,""+L,J);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case X:return E=E.get(L.key===null?R:L.key)||null,f(h,E,L,J);case Y:return E=E.get(L.key===null?R:L.key)||null,_(h,E,L,J);case te:return L=gi(L),O(E,h,R,L,J)}if(Ve(L)||He(L))return E=E.get(R)||null,D(h,E,L,J,null);if(typeof L.then=="function")return O(E,h,R,Gl(L),J);if(L.$$typeof===B)return O(E,h,R,wl(h,L),J);Yl(h,L)}return null}function K(E,h,R,L){for(var J=null,Re=null,W=h,ce=h=0,Te=null;W!==null&&ce<R.length;ce++){W.index>ce?(Te=W,W=null):Te=W.sibling;var _e=S(E,W,R[ce],L);if(_e===null){W===null&&(W=Te);break}e&&W&&_e.alternate===null&&t(E,W),h=l(_e,h,ce),Re===null?J=_e:Re.sibling=_e,Re=_e,W=Te}if(ce===R.length)return a(E,W),pe&&ya(E,ce),J;if(W===null){for(;ce<R.length;ce++)W=w(E,R[ce],L),W!==null&&(h=l(W,h,ce),Re===null?J=W:Re.sibling=W,Re=W);return pe&&ya(E,ce),J}for(W=i(W);ce<R.length;ce++)Te=O(W,E,ce,R[ce],L),Te!==null&&(e&&Te.alternate!==null&&W.delete(Te.key===null?ce:Te.key),h=l(Te,h,ce),Re===null?J=Te:Re.sibling=Te,Re=Te);return e&&W.forEach(function(ei){return t(E,ei)}),pe&&ya(E,ce),J}function ee(E,h,R,L){if(R==null)throw Error(c(151));for(var J=null,Re=null,W=h,ce=h=0,Te=null,_e=R.next();W!==null&&!_e.done;ce++,_e=R.next()){W.index>ce?(Te=W,W=null):Te=W.sibling;var ei=S(E,W,_e.value,L);if(ei===null){W===null&&(W=Te);break}e&&W&&ei.alternate===null&&t(E,W),h=l(ei,h,ce),Re===null?J=ei:Re.sibling=ei,Re=ei,W=Te}if(_e.done)return a(E,W),pe&&ya(E,ce),J;if(W===null){for(;!_e.done;ce++,_e=R.next())_e=w(E,_e.value,L),_e!==null&&(h=l(_e,h,ce),Re===null?J=_e:Re.sibling=_e,Re=_e);return pe&&ya(E,ce),J}for(W=i(W);!_e.done;ce++,_e=R.next())_e=O(W,E,ce,_e.value,L),_e!==null&&(e&&_e.alternate!==null&&W.delete(_e.key===null?ce:_e.key),h=l(_e,h,ce),Re===null?J=_e:Re.sibling=_e,Re=_e);return e&&W.forEach(function(Ig){return t(E,Ig)}),pe&&ya(E,ce),J}function Le(E,h,R,L){if(typeof R=="object"&&R!==null&&R.type===P&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case X:e:{for(var J=R.key;h!==null;){if(h.key===J){if(J=R.type,J===P){if(h.tag===7){a(E,h.sibling),L=n(h,R.props.children),L.return=E,E=L;break e}}else if(h.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===te&&gi(J)===h.type){a(E,h.sibling),L=n(h,R.props),Un(L,R),L.return=E,E=L;break e}a(E,h);break}else t(E,h);h=h.sibling}R.type===P?(L=ui(R.props.children,E.mode,L,R.key),L.return=E,E=L):(L=Ll(R.type,R.key,R.props,null,E.mode,L),Un(L,R),L.return=E,E=L)}return o(E);case Y:e:{for(J=R.key;h!==null;){if(h.key===J)if(h.tag===4&&h.stateNode.containerInfo===R.containerInfo&&h.stateNode.implementation===R.implementation){a(E,h.sibling),L=n(h,R.children||[]),L.return=E,E=L;break e}else{a(E,h);break}else t(E,h);h=h.sibling}L=co(R,E.mode,L),L.return=E,E=L}return o(E);case te:return R=gi(R),Le(E,h,R,L)}if(Ve(R))return K(E,h,R,L);if(He(R)){if(J=He(R),typeof J!="function")throw Error(c(150));return R=J.call(R),ee(E,h,R,L)}if(typeof R.then=="function")return Le(E,h,Gl(R),L);if(R.$$typeof===B)return Le(E,h,wl(E,R),L);Yl(E,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,h!==null&&h.tag===6?(a(E,h.sibling),L=n(h,R),L.return=E,E=L):(a(E,h),L=ro(R,E.mode,L),L.return=E,E=L),o(E)):a(E,h)}return function(E,h,R,L){try{Ln=0;var J=Le(E,h,R,L);return Qi=null,J}catch(W){if(W===Xi||W===ql)throw W;var Re=bt(29,W,null,E.mode);return Re.lanes=L,Re.return=E,Re}}}var Ti=lu(!0),su=lu(!1),wa=!1;function _o(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Io(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ba(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function qa(e,t,a){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(xe&2)!==0){var n=i.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),i.pending=t,t=kl(e),zc(e,null,a),t}return Dl(e,i,t,a),kl(e)}function Hn(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,a|=i,t.lanes=a,Ci(e,a)}}function vo(e,t){var a=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,a===i)){var n=null,l=null;if(a=a.firstBaseUpdate,a!==null){do{var o={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};l===null?n=l=o:l=l.next=o,a=a.next}while(a!==null);l===null?n=l=t:l=l.next=t}else n=l=t;a={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:l,shared:i.shared,callbacks:i.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var So=!1;function wn(){if(So){var e=Ki;if(e!==null)throw e}}function Bn(e,t,a,i){So=!1;var n=e.updateQueue;wa=!1;var l=n.firstBaseUpdate,o=n.lastBaseUpdate,r=n.shared.pending;if(r!==null){n.shared.pending=null;var f=r,_=f.next;f.next=null,o===null?l=_:o.next=_,o=f;var D=e.alternate;D!==null&&(D=D.updateQueue,r=D.lastBaseUpdate,r!==o&&(r===null?D.firstBaseUpdate=_:r.next=_,D.lastBaseUpdate=f))}if(l!==null){var w=n.baseState;o=0,D=_=f=null,r=l;do{var S=r.lane&-536870913,O=S!==r.lane;if(O?(ye&S)===S:(i&S)===S){S!==0&&S===Vi&&(So=!0),D!==null&&(D=D.next={lane:0,tag:r.tag,payload:r.payload,callback:null,next:null});e:{var K=e,ee=r;S=t;var Le=a;switch(ee.tag){case 1:if(K=ee.payload,typeof K=="function"){w=K.call(Le,w,S);break e}w=K;break e;case 3:K.flags=K.flags&-65537|128;case 0:if(K=ee.payload,S=typeof K=="function"?K.call(Le,w,S):K,S==null)break e;w=U({},w,S);break e;case 2:wa=!0}}S=r.callback,S!==null&&(e.flags|=64,O&&(e.flags|=8192),O=n.callbacks,O===null?n.callbacks=[S]:O.push(S))}else O={lane:S,tag:r.tag,payload:r.payload,callback:r.callback,next:null},D===null?(_=D=O,f=w):D=D.next=O,o|=S;if(r=r.next,r===null){if(r=n.shared.pending,r===null)break;O=r,r=O.next,O.next=null,n.lastBaseUpdate=O,n.shared.pending=null}}while(!0);D===null&&(f=w),n.baseState=f,n.firstBaseUpdate=_,n.lastBaseUpdate=D,l===null&&(n.shared.lanes=0),ja|=o,e.lanes=o,e.memoizedState=w}}function ou(e,t){if(typeof e!="function")throw Error(c(191,e));e.call(t)}function ru(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)ou(a[e],t)}var Wi=m(null),zl=m(0);function cu(e,t){e=xa,v(zl,e),v(Wi,t),xa=e|t.baseLanes}function Co(){v(zl,xa),v(Wi,Wi.current)}function xo(){xa=zl.current,H(Wi),H(zl)}var Mt=m(null),Wt=null;function Fa(e){var t=e.alternate;v(Qe,Qe.current&1),v(Mt,e),Wt===null&&(t===null||Wi.current!==null||t.memoizedState!==null)&&(Wt=e)}function Oo(e){v(Qe,Qe.current),v(Mt,e),Wt===null&&(Wt=e)}function uu(e){e.tag===22?(v(Qe,Qe.current),v(Mt,e),Wt===null&&(Wt=e)):Ga()}function Ga(){v(Qe,Qe.current),v(Mt,Mt.current)}function Dt(e){H(Mt),Wt===e&&(Wt=null),H(Qe)}var Qe=m(0);function jl(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Lr(a)||Ur(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var pa=0,re=null,De=null,$e=null,Vl=!1,Zi=!1,Ei=!1,Kl=0,qn=0,Ji=null,hm=0;function Ke(){throw Error(c(321))}function No(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Nt(e[a],t[a]))return!1;return!0}function bo(e,t,a,i,n,l){return pa=l,re=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,M.H=e===null||e.memoizedState===null?Xu:Vo,Ei=!1,l=a(i,n),Ei=!1,Zi&&(l=fu(t,a,i,n)),du(e),l}function du(e){M.H=Yn;var t=De!==null&&De.next!==null;if(pa=0,$e=De=re=null,Vl=!1,qn=0,Ji=null,t)throw Error(c(300));e===null||et||(e=e.dependencies,e!==null&&Hl(e)&&(et=!0))}function fu(e,t,a,i){re=e;var n=0;do{if(Zi&&(Ji=null),qn=0,Zi=!1,25<=n)throw Error(c(301));if(n+=1,$e=De=null,e.updateQueue!=null){var l=e.updateQueue;l.lastEffect=null,l.events=null,l.stores=null,l.memoCache!=null&&(l.memoCache.index=0)}M.H=Qu,l=t(a,i)}while(Zi);return l}function mm(){var e=M.H,t=e.useState()[0];return t=typeof t.then=="function"?Fn(t):t,e=e.useState()[0],(De!==null?De.memoizedState:null)!==e&&(re.flags|=1024),t}function Mo(){var e=Kl!==0;return Kl=0,e}function Do(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function ko(e){if(Vl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Vl=!1}pa=0,$e=De=re=null,Zi=!1,qn=Kl=0,Ji=null}function yt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?re.memoizedState=$e=e:$e=$e.next=e,$e}function We(){if(De===null){var e=re.alternate;e=e!==null?e.memoizedState:null}else e=De.next;var t=$e===null?re.memoizedState:$e.next;if(t!==null)$e=t,De=e;else{if(e===null)throw re.alternate===null?Error(c(467)):Error(c(310));De=e,e={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},$e===null?re.memoizedState=$e=e:$e=$e.next=e}return $e}function Xl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fn(e){var t=qn;return qn+=1,Ji===null&&(Ji=[]),e=au(Ji,e,t),t=re,($e===null?t.memoizedState:$e.next)===null&&(t=t.alternate,M.H=t===null||t.memoizedState===null?Xu:Vo),e}function Ql(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Fn(e);if(e.$$typeof===B)return ct(e)}throw Error(c(438,String(e)))}function Lo(e){var t=null,a=re.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var i=re.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(n){return n.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Xl(),re.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),i=0;i<e;i++)a[i]=Ae;return t.index++,a}function Aa(e,t){return typeof t=="function"?t(e):t}function Wl(e){var t=We();return Uo(t,De,e)}function Uo(e,t,a){var i=e.queue;if(i===null)throw Error(c(311));i.lastRenderedReducer=a;var n=e.baseQueue,l=i.pending;if(l!==null){if(n!==null){var o=n.next;n.next=l.next,l.next=o}t.baseQueue=n=l,i.pending=null}if(l=e.baseState,n===null)e.memoizedState=l;else{t=n.next;var r=o=null,f=null,_=t,D=!1;do{var w=_.lane&-536870913;if(w!==_.lane?(ye&w)===w:(pa&w)===w){var S=_.revertLane;if(S===0)f!==null&&(f=f.next={lane:0,revertLane:0,gesture:null,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null}),w===Vi&&(D=!0);else if((pa&S)===S){_=_.next,S===Vi&&(D=!0);continue}else w={lane:0,revertLane:_.revertLane,gesture:null,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null},f===null?(r=f=w,o=l):f=f.next=w,re.lanes|=S,ja|=S;w=_.action,Ei&&a(l,w),l=_.hasEagerState?_.eagerState:a(l,w)}else S={lane:w,revertLane:_.revertLane,gesture:_.gesture,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null},f===null?(r=f=S,o=l):f=f.next=S,re.lanes|=w,ja|=w;_=_.next}while(_!==null&&_!==t);if(f===null?o=l:f.next=r,!Nt(l,e.memoizedState)&&(et=!0,D&&(a=Ki,a!==null)))throw a;e.memoizedState=l,e.baseState=o,e.baseQueue=f,i.lastRenderedState=l}return n===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Ho(e){var t=We(),a=t.queue;if(a===null)throw Error(c(311));a.lastRenderedReducer=e;var i=a.dispatch,n=a.pending,l=t.memoizedState;if(n!==null){a.pending=null;var o=n=n.next;do l=e(l,o.action),o=o.next;while(o!==n);Nt(l,t.memoizedState)||(et=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),a.lastRenderedState=l}return[l,i]}function hu(e,t,a){var i=re,n=We(),l=pe;if(l){if(a===void 0)throw Error(c(407));a=a()}else a=t();var o=!Nt((De||n).memoizedState,a);if(o&&(n.memoizedState=a,et=!0),n=n.queue,qo(yu.bind(null,i,n,e),[e]),n.getSnapshot!==t||o||$e!==null&&$e.memoizedState.tag&1){if(i.flags|=2048,Pi(9,{destroy:void 0},gu.bind(null,i,n,a,t),null),Ue===null)throw Error(c(349));l||(pa&127)!==0||mu(i,t,a)}return a}function mu(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=re.updateQueue,t===null?(t=Xl(),re.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function gu(e,t,a,i){t.value=a,t.getSnapshot=i,Tu(t)&&Eu(e)}function yu(e,t,a){return a(function(){Tu(t)&&Eu(e)})}function Tu(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Nt(e,a)}catch{return!0}}function Eu(e){var t=ci(e,2);t!==null&&xt(t,e,2)}function wo(e){var t=yt();if(typeof e=="function"){var a=e;if(e=a(),Ei){j(!0);try{a()}finally{j(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:e},t}function pu(e,t,a,i){return e.baseState=a,Uo(e,De,typeof i=="function"?i:Aa)}function gm(e,t,a,i,n){if(Pl(e))throw Error(c(485));if(e=t.action,e!==null){var l={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){l.listeners.push(o)}};M.T!==null?a(!0):l.isTransition=!1,i(l),a=t.pending,a===null?(l.next=t.pending=l,Au(t,l)):(l.next=a.next,t.pending=a.next=l)}}function Au(e,t){var a=t.action,i=t.payload,n=e.state;if(t.isTransition){var l=M.T,o={};M.T=o;try{var r=a(n,i),f=M.S;f!==null&&f(o,r),Ru(e,t,r)}catch(_){Bo(e,t,_)}finally{l!==null&&o.types!==null&&(l.types=o.types),M.T=l}}else try{l=a(n,i),Ru(e,t,l)}catch(_){Bo(e,t,_)}}function Ru(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(i){_u(e,t,i)},function(i){return Bo(e,t,i)}):_u(e,t,a)}function _u(e,t,a){t.status="fulfilled",t.value=a,Iu(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Au(e,a)))}function Bo(e,t,a){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=a,Iu(t),t=t.next;while(t!==i)}e.action=null}function Iu(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function vu(e,t){return t}function Su(e,t){if(pe){var a=Ue.formState;if(a!==null){e:{var i=re;if(pe){if(qe){t:{for(var n=qe,l=Qt;n.nodeType!==8;){if(!l){n=null;break t}if(n=Zt(n.nextSibling),n===null){n=null;break t}}l=n.data,n=l==="F!"||l==="F"?n:null}if(n){qe=Zt(n.nextSibling),i=n.data==="F!";break e}}Ua(i)}i=!1}i&&(t=a[0])}}return a=yt(),a.memoizedState=a.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vu,lastRenderedState:t},a.queue=i,a=ju.bind(null,re,i),i.dispatch=a,i=wo(!1),l=jo.bind(null,re,!1,i.queue),i=yt(),n={state:t,dispatch:null,action:e,pending:null},i.queue=n,a=gm.bind(null,re,n,l,a),n.dispatch=a,i.memoizedState=e,[t,a,!1]}function Cu(e){var t=We();return xu(t,De,e)}function xu(e,t,a){if(t=Uo(e,t,vu)[0],e=Wl(Aa)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=Fn(t)}catch(o){throw o===Xi?ql:o}else i=t;t=We();var n=t.queue,l=n.dispatch;return a!==t.memoizedState&&(re.flags|=2048,Pi(9,{destroy:void 0},ym.bind(null,n,a),null)),[i,l,e]}function ym(e,t){e.action=t}function Ou(e){var t=We(),a=De;if(a!==null)return xu(t,a,e);We(),t=t.memoizedState,a=We();var i=a.queue.dispatch;return a.memoizedState=e,[t,i,!1]}function Pi(e,t,a,i){return e={tag:e,create:a,deps:i,inst:t,next:null},t=re.updateQueue,t===null&&(t=Xl(),re.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(i=a.next,a.next=e,e.next=i,t.lastEffect=e),e}function Nu(){return We().memoizedState}function Zl(e,t,a,i){var n=yt();re.flags|=e,n.memoizedState=Pi(1|t,{destroy:void 0},a,i===void 0?null:i)}function Jl(e,t,a,i){var n=We();i=i===void 0?null:i;var l=n.memoizedState.inst;De!==null&&i!==null&&No(i,De.memoizedState.deps)?n.memoizedState=Pi(t,l,a,i):(re.flags|=e,n.memoizedState=Pi(1|t,l,a,i))}function bu(e,t){Zl(8390656,8,e,t)}function qo(e,t){Jl(2048,8,e,t)}function Tm(e){re.flags|=4;var t=re.updateQueue;if(t===null)t=Xl(),re.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function Mu(e){var t=We().memoizedState;return Tm({ref:t,nextImpl:e}),function(){if((xe&2)!==0)throw Error(c(440));return t.impl.apply(void 0,arguments)}}function Du(e,t){return Jl(4,2,e,t)}function ku(e,t){return Jl(4,4,e,t)}function Lu(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Uu(e,t,a){a=a!=null?a.concat([e]):null,Jl(4,4,Lu.bind(null,t,e),a)}function Fo(){}function Hu(e,t){var a=We();t=t===void 0?null:t;var i=a.memoizedState;return t!==null&&No(t,i[1])?i[0]:(a.memoizedState=[e,t],e)}function wu(e,t){var a=We();t=t===void 0?null:t;var i=a.memoizedState;if(t!==null&&No(t,i[1]))return i[0];if(i=e(),Ei){j(!0);try{e()}finally{j(!1)}}return a.memoizedState=[i,t],i}function Go(e,t,a){return a===void 0||(pa&1073741824)!==0&&(ye&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=Bd(),re.lanes|=e,ja|=e,a)}function Bu(e,t,a,i){return Nt(a,t)?a:Wi.current!==null?(e=Go(e,a,i),Nt(e,t)||(et=!0),e):(pa&42)===0||(pa&1073741824)!==0&&(ye&261930)===0?(et=!0,e.memoizedState=a):(e=Bd(),re.lanes|=e,ja|=e,t)}function qu(e,t,a,i,n){var l=q.p;q.p=l!==0&&8>l?l:8;var o=M.T,r={};M.T=r,jo(e,!1,t,a);try{var f=n(),_=M.S;if(_!==null&&_(r,f),f!==null&&typeof f=="object"&&typeof f.then=="function"){var D=fm(f,i);Gn(e,t,D,Ut(e))}else Gn(e,t,i,Ut(e))}catch(w){Gn(e,t,{then:function(){},status:"rejected",reason:w},Ut())}finally{q.p=l,o!==null&&r.types!==null&&(o.types=r.types),M.T=o}}function Em(){}function Yo(e,t,a,i){if(e.tag!==5)throw Error(c(476));var n=Fu(e).queue;qu(e,n,t,$,a===null?Em:function(){return Gu(e),a(i)})}function Fu(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:$},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Gu(e){var t=Fu(e);t.next===null&&(t=e.alternate.memoizedState),Gn(e,t.next.queue,{},Ut())}function zo(){return ct(nl)}function Yu(){return We().memoizedState}function zu(){return We().memoizedState}function pm(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Ut();e=Ba(a);var i=qa(t,e,a);i!==null&&(xt(i,t,a),Hn(i,t,a)),t={cache:Eo()},e.payload=t;return}t=t.return}}function Am(e,t,a){var i=Ut();a={lane:i,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Pl(e)?Vu(t,a):(a=so(e,t,a,i),a!==null&&(xt(a,e,i),Ku(a,t,i)))}function ju(e,t,a){var i=Ut();Gn(e,t,a,i)}function Gn(e,t,a,i){var n={lane:i,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Pl(e))Vu(t,n);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,r=l(o,a);if(n.hasEagerState=!0,n.eagerState=r,Nt(r,o))return Dl(e,t,n,0),Ue===null&&Ml(),!1}catch{}if(a=so(e,t,n,i),a!==null)return xt(a,e,i),Ku(a,t,i),!0}return!1}function jo(e,t,a,i){if(i={lane:2,revertLane:_r(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Pl(e)){if(t)throw Error(c(479))}else t=so(e,a,i,2),t!==null&&xt(t,e,2)}function Pl(e){var t=e.alternate;return e===re||t!==null&&t===re}function Vu(e,t){Zi=Vl=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Ku(e,t,a){if((a&4194048)!==0){var i=t.lanes;i&=e.pendingLanes,a|=i,t.lanes=a,Ci(e,a)}}var Yn={readContext:ct,use:Ql,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useLayoutEffect:Ke,useInsertionEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useSyncExternalStore:Ke,useId:Ke,useHostTransitionStatus:Ke,useFormState:Ke,useActionState:Ke,useOptimistic:Ke,useMemoCache:Ke,useCacheRefresh:Ke};Yn.useEffectEvent=Ke;var Xu={readContext:ct,use:Ql,useCallback:function(e,t){return yt().memoizedState=[e,t===void 0?null:t],e},useContext:ct,useEffect:bu,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Zl(4194308,4,Lu.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Zl(4194308,4,e,t)},useInsertionEffect:function(e,t){Zl(4,2,e,t)},useMemo:function(e,t){var a=yt();t=t===void 0?null:t;var i=e();if(Ei){j(!0);try{e()}finally{j(!1)}}return a.memoizedState=[i,t],i},useReducer:function(e,t,a){var i=yt();if(a!==void 0){var n=a(t);if(Ei){j(!0);try{a(t)}finally{j(!1)}}}else n=t;return i.memoizedState=i.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},i.queue=e,e=e.dispatch=Am.bind(null,re,e),[i.memoizedState,e]},useRef:function(e){var t=yt();return e={current:e},t.memoizedState=e},useState:function(e){e=wo(e);var t=e.queue,a=ju.bind(null,re,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Fo,useDeferredValue:function(e,t){var a=yt();return Go(a,e,t)},useTransition:function(){var e=wo(!1);return e=qu.bind(null,re,e.queue,!0,!1),yt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var i=re,n=yt();if(pe){if(a===void 0)throw Error(c(407));a=a()}else{if(a=t(),Ue===null)throw Error(c(349));(ye&127)!==0||mu(i,t,a)}n.memoizedState=a;var l={value:a,getSnapshot:t};return n.queue=l,bu(yu.bind(null,i,l,e),[e]),i.flags|=2048,Pi(9,{destroy:void 0},gu.bind(null,i,l,a,t),null),a},useId:function(){var e=yt(),t=Ue.identifierPrefix;if(pe){var a=oa,i=sa;a=(i&~(1<<32-G(i)-1)).toString(32)+a,t="_"+t+"R_"+a,a=Kl++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=hm++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:zo,useFormState:Su,useActionState:Su,useOptimistic:function(e){var t=yt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=jo.bind(null,re,!0,a),a.dispatch=t,[e,t]},useMemoCache:Lo,useCacheRefresh:function(){return yt().memoizedState=pm.bind(null,re)},useEffectEvent:function(e){var t=yt(),a={impl:e};return t.memoizedState=a,function(){if((xe&2)!==0)throw Error(c(440));return a.impl.apply(void 0,arguments)}}},Vo={readContext:ct,use:Ql,useCallback:Hu,useContext:ct,useEffect:qo,useImperativeHandle:Uu,useInsertionEffect:Du,useLayoutEffect:ku,useMemo:wu,useReducer:Wl,useRef:Nu,useState:function(){return Wl(Aa)},useDebugValue:Fo,useDeferredValue:function(e,t){var a=We();return Bu(a,De.memoizedState,e,t)},useTransition:function(){var e=Wl(Aa)[0],t=We().memoizedState;return[typeof e=="boolean"?e:Fn(e),t]},useSyncExternalStore:hu,useId:Yu,useHostTransitionStatus:zo,useFormState:Cu,useActionState:Cu,useOptimistic:function(e,t){var a=We();return pu(a,De,e,t)},useMemoCache:Lo,useCacheRefresh:zu};Vo.useEffectEvent=Mu;var Qu={readContext:ct,use:Ql,useCallback:Hu,useContext:ct,useEffect:qo,useImperativeHandle:Uu,useInsertionEffect:Du,useLayoutEffect:ku,useMemo:wu,useReducer:Ho,useRef:Nu,useState:function(){return Ho(Aa)},useDebugValue:Fo,useDeferredValue:function(e,t){var a=We();return De===null?Go(a,e,t):Bu(a,De.memoizedState,e,t)},useTransition:function(){var e=Ho(Aa)[0],t=We().memoizedState;return[typeof e=="boolean"?e:Fn(e),t]},useSyncExternalStore:hu,useId:Yu,useHostTransitionStatus:zo,useFormState:Ou,useActionState:Ou,useOptimistic:function(e,t){var a=We();return De!==null?pu(a,De,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Lo,useCacheRefresh:zu};Qu.useEffectEvent=Mu;function Ko(e,t,a,i){t=e.memoizedState,a=a(i,t),a=a==null?t:U({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Xo={enqueueSetState:function(e,t,a){e=e._reactInternals;var i=Ut(),n=Ba(i);n.payload=t,a!=null&&(n.callback=a),t=qa(e,n,i),t!==null&&(xt(t,e,i),Hn(t,e,i))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var i=Ut(),n=Ba(i);n.tag=1,n.payload=t,a!=null&&(n.callback=a),t=qa(e,n,i),t!==null&&(xt(t,e,i),Hn(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Ut(),i=Ba(a);i.tag=2,t!=null&&(i.callback=t),t=qa(e,i,a),t!==null&&(xt(t,e,a),Hn(t,e,a))}};function Wu(e,t,a,i,n,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,l,o):t.prototype&&t.prototype.isPureReactComponent?!On(a,i)||!On(n,l):!0}function Zu(e,t,a,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,i),t.state!==e&&Xo.enqueueReplaceState(t,t.state,null)}function pi(e,t){var a=t;if("ref"in t){a={};for(var i in t)i!=="ref"&&(a[i]=t[i])}if(e=e.defaultProps){a===t&&(a=U({},a));for(var n in e)a[n]===void 0&&(a[n]=e[n])}return a}function Ju(e){bl(e)}function Pu(e){console.error(e)}function $u(e){bl(e)}function $l(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function ed(e,t,a){try{var i=e.onCaughtError;i(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function Qo(e,t,a){return a=Ba(a),a.tag=3,a.payload={element:null},a.callback=function(){$l(e,t)},a}function td(e){return e=Ba(e),e.tag=3,e}function ad(e,t,a,i){var n=a.type.getDerivedStateFromError;if(typeof n=="function"){var l=i.value;e.payload=function(){return n(l)},e.callback=function(){ed(t,a,i)}}var o=a.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(e.callback=function(){ed(t,a,i),typeof n!="function"&&(Va===null?Va=new Set([this]):Va.add(this));var r=i.stack;this.componentDidCatch(i.value,{componentStack:r!==null?r:""})})}function Rm(e,t,a,i,n){if(a.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=a.alternate,t!==null&&ji(t,a,n,!0),a=Mt.current,a!==null){switch(a.tag){case 31:case 13:return Wt===null?ds():a.alternate===null&&Xe===0&&(Xe=3),a.flags&=-257,a.flags|=65536,a.lanes=n,i===Fl?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([i]):t.add(i),pr(e,i,n)),!1;case 22:return a.flags|=65536,i===Fl?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([i]):a.add(i)),pr(e,i,n)),!1}throw Error(c(435,a.tag))}return pr(e,i,n),ds(),!1}if(pe)return t=Mt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=n,i!==ho&&(e=Error(c(422),{cause:i}),Mn(Vt(e,a)))):(i!==ho&&(t=Error(c(423),{cause:i}),Mn(Vt(t,a))),e=e.current.alternate,e.flags|=65536,n&=-n,e.lanes|=n,i=Vt(i,a),n=Qo(e.stateNode,i,n),vo(e,n),Xe!==4&&(Xe=2)),!1;var l=Error(c(520),{cause:i});if(l=Vt(l,a),Zn===null?Zn=[l]:Zn.push(l),Xe!==4&&(Xe=2),t===null)return!0;i=Vt(i,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=n&-n,a.lanes|=e,e=Qo(a.stateNode,i,e),vo(a,e),!1;case 1:if(t=a.type,l=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||l!==null&&typeof l.componentDidCatch=="function"&&(Va===null||!Va.has(l))))return a.flags|=65536,n&=-n,a.lanes|=n,n=td(n),ad(n,e,a,i),vo(a,n),!1}a=a.return}while(a!==null);return!1}var Wo=Error(c(461)),et=!1;function ut(e,t,a,i){t.child=e===null?su(t,null,a,i):Ti(t,e.child,a,i)}function id(e,t,a,i,n){a=a.render;var l=t.ref;if("ref"in i){var o={};for(var r in i)r!=="ref"&&(o[r]=i[r])}else o=i;return hi(t),i=bo(e,t,a,o,l,n),r=Mo(),e!==null&&!et?(Do(e,t,n),Ra(e,t,n)):(pe&&r&&uo(t),t.flags|=1,ut(e,t,i,n),t.child)}function nd(e,t,a,i,n){if(e===null){var l=a.type;return typeof l=="function"&&!oo(l)&&l.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=l,ld(e,t,l,i,n)):(e=Ll(a.type,null,i,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!ir(e,n)){var o=l.memoizedProps;if(a=a.compare,a=a!==null?a:On,a(o,i)&&e.ref===t.ref)return Ra(e,t,n)}return t.flags|=1,e=ga(l,i),e.ref=t.ref,e.return=t,t.child=e}function ld(e,t,a,i,n){if(e!==null){var l=e.memoizedProps;if(On(l,i)&&e.ref===t.ref)if(et=!1,t.pendingProps=i=l,ir(e,n))(e.flags&131072)!==0&&(et=!0);else return t.lanes=e.lanes,Ra(e,t,n)}return Zo(e,t,a,i,n)}function sd(e,t,a,i){var n=i.children,l=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if((t.flags&128)!==0){if(l=l!==null?l.baseLanes|a:a,e!==null){for(i=t.child=e.child,n=0;i!==null;)n=n|i.lanes|i.childLanes,i=i.sibling;i=n&~l}else i=0,t.child=null;return od(e,t,l,a,i)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Bl(t,l!==null?l.cachePool:null),l!==null?cu(t,l):Co(),uu(t);else return i=t.lanes=536870912,od(e,t,l!==null?l.baseLanes|a:a,a,i)}else l!==null?(Bl(t,l.cachePool),cu(t,l),Ga(),t.memoizedState=null):(e!==null&&Bl(t,null),Co(),Ga());return ut(e,t,n,a),t.child}function zn(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function od(e,t,a,i,n){var l=Ao();return l=l===null?null:{parent:Pe._currentValue,pool:l},t.memoizedState={baseLanes:a,cachePool:l},e!==null&&Bl(t,null),Co(),uu(t),e!==null&&ji(e,t,i,!0),t.childLanes=n,null}function es(e,t){return t=as({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function rd(e,t,a){return Ti(t,e.child,null,a),e=es(t,t.pendingProps),e.flags|=2,Dt(t),t.memoizedState=null,e}function _m(e,t,a){var i=t.pendingProps,n=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(pe){if(i.mode==="hidden")return e=es(t,i),t.lanes=536870912,zn(null,e);if(Oo(t),(e=qe)?(e=Rf(e,Qt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ka!==null?{id:sa,overflow:oa}:null,retryLane:536870912,hydrationErrors:null},a=Vc(e),a.return=t,t.child=a,rt=t,qe=null)):e=null,e===null)throw Ua(t);return t.lanes=536870912,null}return es(t,i)}var l=e.memoizedState;if(l!==null){var o=l.dehydrated;if(Oo(t),n)if(t.flags&256)t.flags&=-257,t=rd(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(c(558));else if(et||ji(e,t,a,!1),n=(a&e.childLanes)!==0,et||n){if(i=Ue,i!==null&&(o=Tl(i,a),o!==0&&o!==l.retryLane))throw l.retryLane=o,ci(e,o),xt(i,e,o),Wo;ds(),t=rd(e,t,a)}else e=l.treeContext,qe=Zt(o.nextSibling),rt=t,pe=!0,La=null,Qt=!1,e!==null&&Qc(t,e),t=es(t,i),t.flags|=4096;return t}return e=ga(e.child,{mode:i.mode,children:i.children}),e.ref=t.ref,t.child=e,e.return=t,e}function ts(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(c(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Zo(e,t,a,i,n){return hi(t),a=bo(e,t,a,i,void 0,n),i=Mo(),e!==null&&!et?(Do(e,t,n),Ra(e,t,n)):(pe&&i&&uo(t),t.flags|=1,ut(e,t,a,n),t.child)}function cd(e,t,a,i,n,l){return hi(t),t.updateQueue=null,a=fu(t,i,a,n),du(e),i=Mo(),e!==null&&!et?(Do(e,t,l),Ra(e,t,l)):(pe&&i&&uo(t),t.flags|=1,ut(e,t,a,l),t.child)}function ud(e,t,a,i,n){if(hi(t),t.stateNode===null){var l=Fi,o=a.contextType;typeof o=="object"&&o!==null&&(l=ct(o)),l=new a(i,l),t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Xo,t.stateNode=l,l._reactInternals=t,l=t.stateNode,l.props=i,l.state=t.memoizedState,l.refs={},_o(t),o=a.contextType,l.context=typeof o=="object"&&o!==null?ct(o):Fi,l.state=t.memoizedState,o=a.getDerivedStateFromProps,typeof o=="function"&&(Ko(t,a,o,i),l.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(o=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),o!==l.state&&Xo.enqueueReplaceState(l,l.state,null),Bn(t,i,l,n),wn(),l.state=t.memoizedState),typeof l.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){l=t.stateNode;var r=t.memoizedProps,f=pi(a,r);l.props=f;var _=l.context,D=a.contextType;o=Fi,typeof D=="object"&&D!==null&&(o=ct(D));var w=a.getDerivedStateFromProps;D=typeof w=="function"||typeof l.getSnapshotBeforeUpdate=="function",r=t.pendingProps!==r,D||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(r||_!==o)&&Zu(t,l,i,o),wa=!1;var S=t.memoizedState;l.state=S,Bn(t,i,l,n),wn(),_=t.memoizedState,r||S!==_||wa?(typeof w=="function"&&(Ko(t,a,w,i),_=t.memoizedState),(f=wa||Wu(t,a,f,i,S,_,o))?(D||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=_),l.props=i,l.state=_,l.context=o,i=f):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{l=t.stateNode,Io(e,t),o=t.memoizedProps,D=pi(a,o),l.props=D,w=t.pendingProps,S=l.context,_=a.contextType,f=Fi,typeof _=="object"&&_!==null&&(f=ct(_)),r=a.getDerivedStateFromProps,(_=typeof r=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==w||S!==f)&&Zu(t,l,i,f),wa=!1,S=t.memoizedState,l.state=S,Bn(t,i,l,n),wn();var O=t.memoizedState;o!==w||S!==O||wa||e!==null&&e.dependencies!==null&&Hl(e.dependencies)?(typeof r=="function"&&(Ko(t,a,r,i),O=t.memoizedState),(D=wa||Wu(t,a,D,i,S,O,f)||e!==null&&e.dependencies!==null&&Hl(e.dependencies))?(_||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,O,f),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,O,f)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&S===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&S===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=O),l.props=i,l.state=O,l.context=f,i=D):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&S===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&S===e.memoizedState||(t.flags|=1024),i=!1)}return l=i,ts(e,t),i=(t.flags&128)!==0,l||i?(l=t.stateNode,a=i&&typeof a.getDerivedStateFromError!="function"?null:l.render(),t.flags|=1,e!==null&&i?(t.child=Ti(t,e.child,null,n),t.child=Ti(t,null,a,n)):ut(e,t,a,n),t.memoizedState=l.state,e=t.child):e=Ra(e,t,n),e}function dd(e,t,a,i){return di(),t.flags|=256,ut(e,t,a,i),t.child}var Jo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Po(e){return{baseLanes:e,cachePool:eu()}}function $o(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Lt),e}function fd(e,t,a){var i=t.pendingProps,n=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(Qe.current&2)!==0),o&&(n=!0,t.flags&=-129),o=(t.flags&32)!==0,t.flags&=-33,e===null){if(pe){if(n?Fa(t):Ga(),(e=qe)?(e=Rf(e,Qt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ka!==null?{id:sa,overflow:oa}:null,retryLane:536870912,hydrationErrors:null},a=Vc(e),a.return=t,t.child=a,rt=t,qe=null)):e=null,e===null)throw Ua(t);return Ur(e)?t.lanes=32:t.lanes=536870912,null}var r=i.children;return i=i.fallback,n?(Ga(),n=t.mode,r=as({mode:"hidden",children:r},n),i=ui(i,n,a,null),r.return=t,i.return=t,r.sibling=i,t.child=r,i=t.child,i.memoizedState=Po(a),i.childLanes=$o(e,o,a),t.memoizedState=Jo,zn(null,i)):(Fa(t),er(t,r))}var f=e.memoizedState;if(f!==null&&(r=f.dehydrated,r!==null)){if(l)t.flags&256?(Fa(t),t.flags&=-257,t=tr(e,t,a)):t.memoizedState!==null?(Ga(),t.child=e.child,t.flags|=128,t=null):(Ga(),r=i.fallback,n=t.mode,i=as({mode:"visible",children:i.children},n),r=ui(r,n,a,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,Ti(t,e.child,null,a),i=t.child,i.memoizedState=Po(a),i.childLanes=$o(e,o,a),t.memoizedState=Jo,t=zn(null,i));else if(Fa(t),Ur(r)){if(o=r.nextSibling&&r.nextSibling.dataset,o)var _=o.dgst;o=_,i=Error(c(419)),i.stack="",i.digest=o,Mn({value:i,source:null,stack:null}),t=tr(e,t,a)}else if(et||ji(e,t,a,!1),o=(a&e.childLanes)!==0,et||o){if(o=Ue,o!==null&&(i=Tl(o,a),i!==0&&i!==f.retryLane))throw f.retryLane=i,ci(e,i),xt(o,e,i),Wo;Lr(r)||ds(),t=tr(e,t,a)}else Lr(r)?(t.flags|=192,t.child=e.child,t=null):(e=f.treeContext,qe=Zt(r.nextSibling),rt=t,pe=!0,La=null,Qt=!1,e!==null&&Qc(t,e),t=er(t,i.children),t.flags|=4096);return t}return n?(Ga(),r=i.fallback,n=t.mode,f=e.child,_=f.sibling,i=ga(f,{mode:"hidden",children:i.children}),i.subtreeFlags=f.subtreeFlags&65011712,_!==null?r=ga(_,r):(r=ui(r,n,a,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,zn(null,i),i=t.child,r=e.child.memoizedState,r===null?r=Po(a):(n=r.cachePool,n!==null?(f=Pe._currentValue,n=n.parent!==f?{parent:f,pool:f}:n):n=eu(),r={baseLanes:r.baseLanes|a,cachePool:n}),i.memoizedState=r,i.childLanes=$o(e,o,a),t.memoizedState=Jo,zn(e.child,i)):(Fa(t),a=e.child,e=a.sibling,a=ga(a,{mode:"visible",children:i.children}),a.return=t,a.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=a,t.memoizedState=null,a)}function er(e,t){return t=as({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function as(e,t){return e=bt(22,e,null,t),e.lanes=0,e}function tr(e,t,a){return Ti(t,e.child,null,a),e=er(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function hd(e,t,a){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),yo(e.return,t,a)}function ar(e,t,a,i,n,l){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:a,tailMode:n,treeForkCount:l}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=a,o.tailMode=n,o.treeForkCount=l)}function md(e,t,a){var i=t.pendingProps,n=i.revealOrder,l=i.tail;i=i.children;var o=Qe.current,r=(o&2)!==0;if(r?(o=o&1|2,t.flags|=128):o&=1,v(Qe,o),ut(e,t,i,a),i=pe?bn:0,!r&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hd(e,a,t);else if(e.tag===19)hd(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(n){case"forwards":for(a=t.child,n=null;a!==null;)e=a.alternate,e!==null&&jl(e)===null&&(n=a),a=a.sibling;a=n,a===null?(n=t.child,t.child=null):(n=a.sibling,a.sibling=null),ar(t,!1,n,a,l,i);break;case"backwards":case"unstable_legacy-backwards":for(a=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&jl(e)===null){t.child=n;break}e=n.sibling,n.sibling=a,a=n,n=e}ar(t,!0,a,null,l,i);break;case"together":ar(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function Ra(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),ja|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(ji(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,a=ga(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=ga(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function ir(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Hl(e)))}function Im(e,t,a){switch(t.tag){case 3:ve(t,t.stateNode.containerInfo),Ha(t,Pe,e.memoizedState.cache),di();break;case 27:case 5:Tt(t);break;case 4:ve(t,t.stateNode.containerInfo);break;case 10:Ha(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Oo(t),null;break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Fa(t),t.flags|=128,null):(a&t.child.childLanes)!==0?fd(e,t,a):(Fa(t),e=Ra(e,t,a),e!==null?e.sibling:null);Fa(t);break;case 19:var n=(e.flags&128)!==0;if(i=(a&t.childLanes)!==0,i||(ji(e,t,a,!1),i=(a&t.childLanes)!==0),n){if(i)return md(e,t,a);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),v(Qe,Qe.current),i)break;return null;case 22:return t.lanes=0,sd(e,t,a,t.pendingProps);case 24:Ha(t,Pe,e.memoizedState.cache)}return Ra(e,t,a)}function gd(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)et=!0;else{if(!ir(e,a)&&(t.flags&128)===0)return et=!1,Im(e,t,a);et=(e.flags&131072)!==0}else et=!1,pe&&(t.flags&1048576)!==0&&Xc(t,bn,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=gi(t.elementType),t.type=e,typeof e=="function")oo(e)?(i=pi(e,i),t.tag=1,t=ud(null,t,e,i,a)):(t.tag=0,t=Zo(null,t,e,i,a));else{if(e!=null){var n=e.$$typeof;if(n===V){t.tag=11,t=id(null,t,e,i,a);break e}else if(n===F){t.tag=14,t=nd(null,t,e,i,a);break e}}throw t=ze(e)||e,Error(c(306,t,""))}}return t;case 0:return Zo(e,t,t.type,t.pendingProps,a);case 1:return i=t.type,n=pi(i,t.pendingProps),ud(e,t,i,n,a);case 3:e:{if(ve(t,t.stateNode.containerInfo),e===null)throw Error(c(387));i=t.pendingProps;var l=t.memoizedState;n=l.element,Io(e,t),Bn(t,i,null,a);var o=t.memoizedState;if(i=o.cache,Ha(t,Pe,i),i!==l.cache&&To(t,[Pe],a,!0),wn(),i=o.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){t=dd(e,t,i,a);break e}else if(i!==n){n=Vt(Error(c(424)),t),Mn(n),t=dd(e,t,i,a);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,qe=Zt(e.firstChild),rt=t,pe=!0,La=null,Qt=!0,a=su(t,null,i,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(di(),i===n){t=Ra(e,t,a);break e}ut(e,t,i,a)}t=t.child}return t;case 26:return ts(e,t),e===null?(a=xf(t.type,null,t.pendingProps,null))?t.memoizedState=a:pe||(a=t.type,e=t.pendingProps,i=Es(Z.current).createElement(a),i[ot]=t,i[Rt]=e,dt(i,a,e),lt(i),t.stateNode=i):t.memoizedState=xf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Tt(t),e===null&&pe&&(i=t.stateNode=vf(t.type,t.pendingProps,Z.current),rt=t,Qt=!0,n=qe,Wa(t.type)?(Hr=n,qe=Zt(i.firstChild)):qe=n),ut(e,t,t.pendingProps.children,a),ts(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&pe&&((n=i=qe)&&(i=$m(i,t.type,t.pendingProps,Qt),i!==null?(t.stateNode=i,rt=t,qe=Zt(i.firstChild),Qt=!1,n=!0):n=!1),n||Ua(t)),Tt(t),n=t.type,l=t.pendingProps,o=e!==null?e.memoizedProps:null,i=l.children,Mr(n,l)?i=null:o!==null&&Mr(n,o)&&(t.flags|=32),t.memoizedState!==null&&(n=bo(e,t,mm,null,null,a),nl._currentValue=n),ts(e,t),ut(e,t,i,a),t.child;case 6:return e===null&&pe&&((e=a=qe)&&(a=eg(a,t.pendingProps,Qt),a!==null?(t.stateNode=a,rt=t,qe=null,e=!0):e=!1),e||Ua(t)),null;case 13:return fd(e,t,a);case 4:return ve(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Ti(t,null,i,a):ut(e,t,i,a),t.child;case 11:return id(e,t,t.type,t.pendingProps,a);case 7:return ut(e,t,t.pendingProps,a),t.child;case 8:return ut(e,t,t.pendingProps.children,a),t.child;case 12:return ut(e,t,t.pendingProps.children,a),t.child;case 10:return i=t.pendingProps,Ha(t,t.type,i.value),ut(e,t,i.children,a),t.child;case 9:return n=t.type._context,i=t.pendingProps.children,hi(t),n=ct(n),i=i(n),t.flags|=1,ut(e,t,i,a),t.child;case 14:return nd(e,t,t.type,t.pendingProps,a);case 15:return ld(e,t,t.type,t.pendingProps,a);case 19:return md(e,t,a);case 31:return _m(e,t,a);case 22:return sd(e,t,a,t.pendingProps);case 24:return hi(t),i=ct(Pe),e===null?(n=Ao(),n===null&&(n=Ue,l=Eo(),n.pooledCache=l,l.refCount++,l!==null&&(n.pooledCacheLanes|=a),n=l),t.memoizedState={parent:i,cache:n},_o(t),Ha(t,Pe,n)):((e.lanes&a)!==0&&(Io(e,t),Bn(t,null,null,a),wn()),n=e.memoizedState,l=t.memoizedState,n.parent!==i?(n={parent:i,cache:i},t.memoizedState=n,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=n),Ha(t,Pe,i)):(i=l.cache,Ha(t,Pe,i),i!==n.cache&&To(t,[Pe],a,!0))),ut(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(c(156,t.tag))}function _a(e){e.flags|=4}function nr(e,t,a,i,n){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(n&335544128)===n)if(e.stateNode.complete)e.flags|=8192;else if(Yd())e.flags|=8192;else throw yi=Fl,Ro}else e.flags&=-16777217}function yd(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Df(t))if(Yd())e.flags|=8192;else throw yi=Fl,Ro}function is(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?mt():536870912,e.lanes|=t,an|=t)}function jn(e,t){if(!pe)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Fe(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,i=0;if(t)for(var n=e.child;n!==null;)a|=n.lanes|n.childLanes,i|=n.subtreeFlags&65011712,i|=n.flags&65011712,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)a|=n.lanes|n.childLanes,i|=n.subtreeFlags,i|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=i,e.childLanes=a,t}function vm(e,t,a){var i=t.pendingProps;switch(fo(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fe(t),null;case 1:return Fe(t),null;case 3:return a=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Ea(Pe),de(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(zi(t)?_a(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,mo())),Fe(t),null;case 26:var n=t.type,l=t.memoizedState;return e===null?(_a(t),l!==null?(Fe(t),yd(t,l)):(Fe(t),nr(t,n,null,i,a))):l?l!==e.memoizedState?(_a(t),Fe(t),yd(t,l)):(Fe(t),t.flags&=-16777217):(e=e.memoizedProps,e!==i&&_a(t),Fe(t),nr(t,n,e,i,a)),null;case 27:if(Et(t),a=Z.current,n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&_a(t);else{if(!i){if(t.stateNode===null)throw Error(c(166));return Fe(t),null}e=A.current,zi(t)?Wc(t):(e=vf(n,i,a),t.stateNode=e,_a(t))}return Fe(t),null;case 5:if(Et(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&_a(t);else{if(!i){if(t.stateNode===null)throw Error(c(166));return Fe(t),null}if(l=A.current,zi(t))Wc(t);else{var o=Es(Z.current);switch(l){case 1:l=o.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:l=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":l=o.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":l=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":l=o.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof i.is=="string"?o.createElement("select",{is:i.is}):o.createElement("select"),i.multiple?l.multiple=!0:i.size&&(l.size=i.size);break;default:l=typeof i.is=="string"?o.createElement(n,{is:i.is}):o.createElement(n)}}l[ot]=t,l[Rt]=i;e:for(o=t.child;o!==null;){if(o.tag===5||o.tag===6)l.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;o.sibling===null;){if(o.return===null||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=l;e:switch(dt(l,n,i),n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&_a(t)}}return Fe(t),nr(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&_a(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(c(166));if(e=Z.current,zi(t)){if(e=t.stateNode,a=t.memoizedProps,i=null,n=rt,n!==null)switch(n.tag){case 27:case 5:i=n.memoizedProps}e[ot]=t,e=!!(e.nodeValue===a||i!==null&&i.suppressHydrationWarning===!0||hf(e.nodeValue,a)),e||Ua(t,!0)}else e=Es(e).createTextNode(i),e[ot]=t,t.stateNode=e}return Fe(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(i=zi(t),a!==null){if(e===null){if(!i)throw Error(c(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(557));e[ot]=t}else di(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Fe(t),e=!1}else a=mo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(Dt(t),t):(Dt(t),null);if((t.flags&128)!==0)throw Error(c(558))}return Fe(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(n=zi(t),i!==null&&i.dehydrated!==null){if(e===null){if(!n)throw Error(c(318));if(n=t.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(c(317));n[ot]=t}else di(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Fe(t),n=!1}else n=mo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return t.flags&256?(Dt(t),t):(Dt(t),null)}return Dt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=i!==null,e=e!==null&&e.memoizedState!==null,a&&(i=t.child,n=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(n=i.alternate.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==n&&(i.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),is(t,t.updateQueue),Fe(t),null);case 4:return de(),e===null&&Cr(t.stateNode.containerInfo),Fe(t),null;case 10:return Ea(t.type),Fe(t),null;case 19:if(H(Qe),i=t.memoizedState,i===null)return Fe(t),null;if(n=(t.flags&128)!==0,l=i.rendering,l===null)if(n)jn(i,!1);else{if(Xe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(l=jl(e),l!==null){for(t.flags|=128,jn(i,!1),e=l.updateQueue,t.updateQueue=e,is(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)jc(a,e),a=a.sibling;return v(Qe,Qe.current&1|2),pe&&ya(t,i.treeForkCount),t.child}e=e.sibling}i.tail!==null&&pt()>rs&&(t.flags|=128,n=!0,jn(i,!1),t.lanes=4194304)}else{if(!n)if(e=jl(l),e!==null){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,is(t,e),jn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!pe)return Fe(t),null}else 2*pt()-i.renderingStartTime>rs&&a!==536870912&&(t.flags|=128,n=!0,jn(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(e=i.last,e!==null?e.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=pt(),e.sibling=null,a=Qe.current,v(Qe,n?a&1|2:a&1),pe&&ya(t,i.treeForkCount),e):(Fe(t),null);case 22:case 23:return Dt(t),xo(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?(a&536870912)!==0&&(t.flags&128)===0&&(Fe(t),t.subtreeFlags&6&&(t.flags|=8192)):Fe(t),a=t.updateQueue,a!==null&&is(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==a&&(t.flags|=2048),e!==null&&H(mi),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Ea(Pe),Fe(t),null;case 25:return null;case 30:return null}throw Error(c(156,t.tag))}function Sm(e,t){switch(fo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ea(Pe),de(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Et(t),null;case 31:if(t.memoizedState!==null){if(Dt(t),t.alternate===null)throw Error(c(340));di()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Dt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));di()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return H(Qe),null;case 4:return de(),null;case 10:return Ea(t.type),null;case 22:case 23:return Dt(t),xo(),e!==null&&H(mi),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ea(Pe),null;case 25:return null;default:return null}}function Td(e,t){switch(fo(t),t.tag){case 3:Ea(Pe),de();break;case 26:case 27:case 5:Et(t);break;case 4:de();break;case 31:t.memoizedState!==null&&Dt(t);break;case 13:Dt(t);break;case 19:H(Qe);break;case 10:Ea(t.type);break;case 22:case 23:Dt(t),xo(),e!==null&&H(mi);break;case 24:Ea(Pe)}}function Vn(e,t){try{var a=t.updateQueue,i=a!==null?a.lastEffect:null;if(i!==null){var n=i.next;a=n;do{if((a.tag&e)===e){i=void 0;var l=a.create,o=a.inst;i=l(),o.destroy=i}a=a.next}while(a!==n)}}catch(r){be(t,t.return,r)}}function Ya(e,t,a){try{var i=t.updateQueue,n=i!==null?i.lastEffect:null;if(n!==null){var l=n.next;i=l;do{if((i.tag&e)===e){var o=i.inst,r=o.destroy;if(r!==void 0){o.destroy=void 0,n=t;var f=a,_=r;try{_()}catch(D){be(n,f,D)}}}i=i.next}while(i!==l)}}catch(D){be(t,t.return,D)}}function Ed(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{ru(t,a)}catch(i){be(e,e.return,i)}}}function pd(e,t,a){a.props=pi(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(i){be(e,t,i)}}function Kn(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof a=="function"?e.refCleanup=a(i):a.current=i}}catch(n){be(e,t,n)}}function ra(e,t){var a=e.ref,i=e.refCleanup;if(a!==null)if(typeof i=="function")try{i()}catch(n){be(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(n){be(e,t,n)}else a.current=null}function Ad(e){var t=e.type,a=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&i.focus();break e;case"img":a.src?i.src=a.src:a.srcSet&&(i.srcset=a.srcSet)}}catch(n){be(e,e.return,n)}}function lr(e,t,a){try{var i=e.stateNode;Xm(i,e.type,a,t),i[Rt]=t}catch(n){be(e,e.return,n)}}function Rd(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Wa(e.type)||e.tag===4}function sr(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Rd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Wa(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function or(e,t,a){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=ha));else if(i!==4&&(i===27&&Wa(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(or(e,t,a),e=e.sibling;e!==null;)or(e,t,a),e=e.sibling}function ns(e,t,a){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(i!==4&&(i===27&&Wa(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(ns(e,t,a),e=e.sibling;e!==null;)ns(e,t,a),e=e.sibling}function _d(e){var t=e.stateNode,a=e.memoizedProps;try{for(var i=e.type,n=t.attributes;n.length;)t.removeAttributeNode(n[0]);dt(t,i,a),t[ot]=e,t[Rt]=a}catch(l){be(e,e.return,l)}}var Ia=!1,tt=!1,rr=!1,Id=typeof WeakSet=="function"?WeakSet:Set,st=null;function Cm(e,t){if(e=e.containerInfo,Nr=Ss,e=Uc(e),eo(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var i=a.getSelection&&a.getSelection();if(i&&i.rangeCount!==0){a=i.anchorNode;var n=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{a.nodeType,l.nodeType}catch{a=null;break e}var o=0,r=-1,f=-1,_=0,D=0,w=e,S=null;t:for(;;){for(var O;w!==a||n!==0&&w.nodeType!==3||(r=o+n),w!==l||i!==0&&w.nodeType!==3||(f=o+i),w.nodeType===3&&(o+=w.nodeValue.length),(O=w.firstChild)!==null;)S=w,w=O;for(;;){if(w===e)break t;if(S===a&&++_===n&&(r=o),S===l&&++D===i&&(f=o),(O=w.nextSibling)!==null)break;w=S,S=w.parentNode}w=O}a=r===-1||f===-1?null:{start:r,end:f}}else a=null}a=a||{start:0,end:0}}else a=null;for(br={focusedElem:e,selectionRange:a},Ss=!1,st=t;st!==null;)if(t=st,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,st=e;else for(;st!==null;){switch(t=st,l=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)n=e[a],n.ref.impl=n.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&l!==null){e=void 0,a=t,n=l.memoizedProps,l=l.memoizedState,i=a.stateNode;try{var K=pi(a.type,n);e=i.getSnapshotBeforeUpdate(K,l),i.__reactInternalSnapshotBeforeUpdate=e}catch(ee){be(a,a.return,ee)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)kr(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":kr(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(c(163))}if(e=t.sibling,e!==null){e.return=t.return,st=e;break}st=t.return}}function vd(e,t,a){var i=a.flags;switch(a.tag){case 0:case 11:case 15:Sa(e,a),i&4&&Vn(5,a);break;case 1:if(Sa(e,a),i&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(o){be(a,a.return,o)}else{var n=pi(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(n,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){be(a,a.return,o)}}i&64&&Ed(a),i&512&&Kn(a,a.return);break;case 3:if(Sa(e,a),i&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{ru(e,t)}catch(o){be(a,a.return,o)}}break;case 27:t===null&&i&4&&_d(a);case 26:case 5:Sa(e,a),t===null&&i&4&&Ad(a),i&512&&Kn(a,a.return);break;case 12:Sa(e,a);break;case 31:Sa(e,a),i&4&&xd(e,a);break;case 13:Sa(e,a),i&4&&Od(e,a),i&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Um.bind(null,a),tg(e,a))));break;case 22:if(i=a.memoizedState!==null||Ia,!i){t=t!==null&&t.memoizedState!==null||tt,n=Ia;var l=tt;Ia=i,(tt=t)&&!l?Ca(e,a,(a.subtreeFlags&8772)!==0):Sa(e,a),Ia=n,tt=l}break;case 30:break;default:Sa(e,a)}}function Sd(e){var t=e.alternate;t!==null&&(e.alternate=null,Sd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ws(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ye=null,It=!1;function va(e,t,a){for(a=a.child;a!==null;)Cd(e,t,a),a=a.sibling}function Cd(e,t,a){if(C&&typeof C.onCommitFiberUnmount=="function")try{C.onCommitFiberUnmount(ni,a)}catch{}switch(a.tag){case 26:tt||ra(a,t),va(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:tt||ra(a,t);var i=Ye,n=It;Wa(a.type)&&(Ye=a.stateNode,It=!1),va(e,t,a),tl(a.stateNode),Ye=i,It=n;break;case 5:tt||ra(a,t);case 6:if(i=Ye,n=It,Ye=null,va(e,t,a),Ye=i,It=n,Ye!==null)if(It)try{(Ye.nodeType===9?Ye.body:Ye.nodeName==="HTML"?Ye.ownerDocument.body:Ye).removeChild(a.stateNode)}catch(l){be(a,t,l)}else try{Ye.removeChild(a.stateNode)}catch(l){be(a,t,l)}break;case 18:Ye!==null&&(It?(e=Ye,pf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),dn(e)):pf(Ye,a.stateNode));break;case 4:i=Ye,n=It,Ye=a.stateNode.containerInfo,It=!0,va(e,t,a),Ye=i,It=n;break;case 0:case 11:case 14:case 15:Ya(2,a,t),tt||Ya(4,a,t),va(e,t,a);break;case 1:tt||(ra(a,t),i=a.stateNode,typeof i.componentWillUnmount=="function"&&pd(a,t,i)),va(e,t,a);break;case 21:va(e,t,a);break;case 22:tt=(i=tt)||a.memoizedState!==null,va(e,t,a),tt=i;break;default:va(e,t,a)}}function xd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{dn(e)}catch(a){be(t,t.return,a)}}}function Od(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{dn(e)}catch(a){be(t,t.return,a)}}function xm(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Id),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Id),t;default:throw Error(c(435,e.tag))}}function ls(e,t){var a=xm(e);t.forEach(function(i){if(!a.has(i)){a.add(i);var n=Hm.bind(null,e,i);i.then(n,n)}})}function vt(e,t){var a=t.deletions;if(a!==null)for(var i=0;i<a.length;i++){var n=a[i],l=e,o=t,r=o;e:for(;r!==null;){switch(r.tag){case 27:if(Wa(r.type)){Ye=r.stateNode,It=!1;break e}break;case 5:Ye=r.stateNode,It=!1;break e;case 3:case 4:Ye=r.stateNode.containerInfo,It=!0;break e}r=r.return}if(Ye===null)throw Error(c(160));Cd(l,o,n),Ye=null,It=!1,l=n.alternate,l!==null&&(l.return=null),n.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Nd(t,e),t=t.sibling}var ia=null;function Nd(e,t){var a=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:vt(t,e),St(e),i&4&&(Ya(3,e,e.return),Vn(3,e),Ya(5,e,e.return));break;case 1:vt(t,e),St(e),i&512&&(tt||a===null||ra(a,a.return)),i&64&&Ia&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?i:a.concat(i))));break;case 26:var n=ia;if(vt(t,e),St(e),i&512&&(tt||a===null||ra(a,a.return)),i&4){var l=a!==null?a.memoizedState:null;if(i=e.memoizedState,a===null)if(i===null)if(e.stateNode===null){e:{i=e.type,a=e.memoizedProps,n=n.ownerDocument||n;t:switch(i){case"title":l=n.getElementsByTagName("title")[0],(!l||l[pn]||l[ot]||l.namespaceURI==="http://www.w3.org/2000/svg"||l.hasAttribute("itemprop"))&&(l=n.createElement(i),n.head.insertBefore(l,n.querySelector("head > title"))),dt(l,i,a),l[ot]=e,lt(l),i=l;break e;case"link":var o=bf("link","href",n).get(i+(a.href||""));if(o){for(var r=0;r<o.length;r++)if(l=o[r],l.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&l.getAttribute("rel")===(a.rel==null?null:a.rel)&&l.getAttribute("title")===(a.title==null?null:a.title)&&l.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){o.splice(r,1);break t}}l=n.createElement(i),dt(l,i,a),n.head.appendChild(l);break;case"meta":if(o=bf("meta","content",n).get(i+(a.content||""))){for(r=0;r<o.length;r++)if(l=o[r],l.getAttribute("content")===(a.content==null?null:""+a.content)&&l.getAttribute("name")===(a.name==null?null:a.name)&&l.getAttribute("property")===(a.property==null?null:a.property)&&l.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&l.getAttribute("charset")===(a.charSet==null?null:a.charSet)){o.splice(r,1);break t}}l=n.createElement(i),dt(l,i,a),n.head.appendChild(l);break;default:throw Error(c(468,i))}l[ot]=e,lt(l),i=l}e.stateNode=i}else Mf(n,e.type,e.stateNode);else e.stateNode=Nf(n,i,e.memoizedProps);else l!==i?(l===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):l.count--,i===null?Mf(n,e.type,e.stateNode):Nf(n,i,e.memoizedProps)):i===null&&e.stateNode!==null&&lr(e,e.memoizedProps,a.memoizedProps)}break;case 27:vt(t,e),St(e),i&512&&(tt||a===null||ra(a,a.return)),a!==null&&i&4&&lr(e,e.memoizedProps,a.memoizedProps);break;case 5:if(vt(t,e),St(e),i&512&&(tt||a===null||ra(a,a.return)),e.flags&32){n=e.stateNode;try{ki(n,"")}catch(K){be(e,e.return,K)}}i&4&&e.stateNode!=null&&(n=e.memoizedProps,lr(e,n,a!==null?a.memoizedProps:n)),i&1024&&(rr=!0);break;case 6:if(vt(t,e),St(e),i&4){if(e.stateNode===null)throw Error(c(162));i=e.memoizedProps,a=e.stateNode;try{a.nodeValue=i}catch(K){be(e,e.return,K)}}break;case 3:if(Rs=null,n=ia,ia=ps(t.containerInfo),vt(t,e),ia=n,St(e),i&4&&a!==null&&a.memoizedState.isDehydrated)try{dn(t.containerInfo)}catch(K){be(e,e.return,K)}rr&&(rr=!1,bd(e));break;case 4:i=ia,ia=ps(e.stateNode.containerInfo),vt(t,e),St(e),ia=i;break;case 12:vt(t,e),St(e);break;case 31:vt(t,e),St(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,ls(e,i)));break;case 13:vt(t,e),St(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(os=pt()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,ls(e,i)));break;case 22:n=e.memoizedState!==null;var f=a!==null&&a.memoizedState!==null,_=Ia,D=tt;if(Ia=_||n,tt=D||f,vt(t,e),tt=D,Ia=_,St(e),i&8192)e:for(t=e.stateNode,t._visibility=n?t._visibility&-2:t._visibility|1,n&&(a===null||f||Ia||tt||Ai(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){f=a=t;try{if(l=f.stateNode,n)o=l.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{r=f.stateNode;var w=f.memoizedProps.style,S=w!=null&&w.hasOwnProperty("display")?w.display:null;r.style.display=S==null||typeof S=="boolean"?"":(""+S).trim()}}catch(K){be(f,f.return,K)}}}else if(t.tag===6){if(a===null){f=t;try{f.stateNode.nodeValue=n?"":f.memoizedProps}catch(K){be(f,f.return,K)}}}else if(t.tag===18){if(a===null){f=t;try{var O=f.stateNode;n?Af(O,!0):Af(f.stateNode,!1)}catch(K){be(f,f.return,K)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(a=i.retryQueue,a!==null&&(i.retryQueue=null,ls(e,a))));break;case 19:vt(t,e),St(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,ls(e,i)));break;case 30:break;case 21:break;default:vt(t,e),St(e)}}function St(e){var t=e.flags;if(t&2){try{for(var a,i=e.return;i!==null;){if(Rd(i)){a=i;break}i=i.return}if(a==null)throw Error(c(160));switch(a.tag){case 27:var n=a.stateNode,l=sr(e);ns(e,l,n);break;case 5:var o=a.stateNode;a.flags&32&&(ki(o,""),a.flags&=-33);var r=sr(e);ns(e,r,o);break;case 3:case 4:var f=a.stateNode.containerInfo,_=sr(e);or(e,_,f);break;default:throw Error(c(161))}}catch(D){be(e,e.return,D)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function bd(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;bd(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Sa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)vd(e,t.alternate,t),t=t.sibling}function Ai(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ya(4,t,t.return),Ai(t);break;case 1:ra(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&pd(t,t.return,a),Ai(t);break;case 27:tl(t.stateNode);case 26:case 5:ra(t,t.return),Ai(t);break;case 22:t.memoizedState===null&&Ai(t);break;case 30:Ai(t);break;default:Ai(t)}e=e.sibling}}function Ca(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,n=e,l=t,o=l.flags;switch(l.tag){case 0:case 11:case 15:Ca(n,l,a),Vn(4,l);break;case 1:if(Ca(n,l,a),i=l,n=i.stateNode,typeof n.componentDidMount=="function")try{n.componentDidMount()}catch(_){be(i,i.return,_)}if(i=l,n=i.updateQueue,n!==null){var r=i.stateNode;try{var f=n.shared.hiddenCallbacks;if(f!==null)for(n.shared.hiddenCallbacks=null,n=0;n<f.length;n++)ou(f[n],r)}catch(_){be(i,i.return,_)}}a&&o&64&&Ed(l),Kn(l,l.return);break;case 27:_d(l);case 26:case 5:Ca(n,l,a),a&&i===null&&o&4&&Ad(l),Kn(l,l.return);break;case 12:Ca(n,l,a);break;case 31:Ca(n,l,a),a&&o&4&&xd(n,l);break;case 13:Ca(n,l,a),a&&o&4&&Od(n,l);break;case 22:l.memoizedState===null&&Ca(n,l,a),Kn(l,l.return);break;case 30:break;default:Ca(n,l,a)}t=t.sibling}}function cr(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Dn(a))}function ur(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Dn(e))}function na(e,t,a,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Md(e,t,a,i),t=t.sibling}function Md(e,t,a,i){var n=t.flags;switch(t.tag){case 0:case 11:case 15:na(e,t,a,i),n&2048&&Vn(9,t);break;case 1:na(e,t,a,i);break;case 3:na(e,t,a,i),n&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Dn(e)));break;case 12:if(n&2048){na(e,t,a,i),e=t.stateNode;try{var l=t.memoizedProps,o=l.id,r=l.onPostCommit;typeof r=="function"&&r(o,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(f){be(t,t.return,f)}}else na(e,t,a,i);break;case 31:na(e,t,a,i);break;case 13:na(e,t,a,i);break;case 23:break;case 22:l=t.stateNode,o=t.alternate,t.memoizedState!==null?l._visibility&2?na(e,t,a,i):Xn(e,t):l._visibility&2?na(e,t,a,i):(l._visibility|=2,$i(e,t,a,i,(t.subtreeFlags&10256)!==0||!1)),n&2048&&cr(o,t);break;case 24:na(e,t,a,i),n&2048&&ur(t.alternate,t);break;default:na(e,t,a,i)}}function $i(e,t,a,i,n){for(n=n&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var l=e,o=t,r=a,f=i,_=o.flags;switch(o.tag){case 0:case 11:case 15:$i(l,o,r,f,n),Vn(8,o);break;case 23:break;case 22:var D=o.stateNode;o.memoizedState!==null?D._visibility&2?$i(l,o,r,f,n):Xn(l,o):(D._visibility|=2,$i(l,o,r,f,n)),n&&_&2048&&cr(o.alternate,o);break;case 24:$i(l,o,r,f,n),n&&_&2048&&ur(o.alternate,o);break;default:$i(l,o,r,f,n)}t=t.sibling}}function Xn(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,i=t,n=i.flags;switch(i.tag){case 22:Xn(a,i),n&2048&&cr(i.alternate,i);break;case 24:Xn(a,i),n&2048&&ur(i.alternate,i);break;default:Xn(a,i)}t=t.sibling}}var Qn=8192;function en(e,t,a){if(e.subtreeFlags&Qn)for(e=e.child;e!==null;)Dd(e,t,a),e=e.sibling}function Dd(e,t,a){switch(e.tag){case 26:en(e,t,a),e.flags&Qn&&e.memoizedState!==null&&hg(a,ia,e.memoizedState,e.memoizedProps);break;case 5:en(e,t,a);break;case 3:case 4:var i=ia;ia=ps(e.stateNode.containerInfo),en(e,t,a),ia=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=Qn,Qn=16777216,en(e,t,a),Qn=i):en(e,t,a));break;default:en(e,t,a)}}function kd(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Wn(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var i=t[a];st=i,Ud(i,e)}kd(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ld(e),e=e.sibling}function Ld(e){switch(e.tag){case 0:case 11:case 15:Wn(e),e.flags&2048&&Ya(9,e,e.return);break;case 3:Wn(e);break;case 12:Wn(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ss(e)):Wn(e);break;default:Wn(e)}}function ss(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var i=t[a];st=i,Ud(i,e)}kd(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ya(8,t,t.return),ss(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,ss(t));break;default:ss(t)}e=e.sibling}}function Ud(e,t){for(;st!==null;){var a=st;switch(a.tag){case 0:case 11:case 15:Ya(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var i=a.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Dn(a.memoizedState.cache)}if(i=a.child,i!==null)i.return=a,st=i;else e:for(a=e;st!==null;){i=st;var n=i.sibling,l=i.return;if(Sd(i),i===a){st=null;break e}if(n!==null){n.return=l,st=n;break e}st=l}}}var Om={getCacheForType:function(e){var t=ct(Pe),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return ct(Pe).controller.signal}},Nm=typeof WeakMap=="function"?WeakMap:Map,xe=0,Ue=null,me=null,ye=0,Ne=0,kt=null,za=!1,tn=!1,dr=!1,xa=0,Xe=0,ja=0,Ri=0,fr=0,Lt=0,an=0,Zn=null,Ct=null,hr=!1,os=0,Hd=0,rs=1/0,cs=null,Va=null,it=0,Ka=null,nn=null,Oa=0,mr=0,gr=null,wd=null,Jn=0,yr=null;function Ut(){return(xe&2)!==0&&ye!==0?ye&-ye:M.T!==null?_r():pl()}function Bd(){if(Lt===0)if((ye&536870912)===0||pe){var e=Ge;Ge<<=1,(Ge&3932160)===0&&(Ge=262144),Lt=e}else Lt=536870912;return e=Mt.current,e!==null&&(e.flags|=32),Lt}function xt(e,t,a){(e===Ue&&(Ne===2||Ne===9)||e.cancelPendingCommit!==null)&&(ln(e,0),Xa(e,ye,Lt,!1)),Ft(e,a),((xe&2)===0||e!==Ue)&&(e===Ue&&((xe&2)===0&&(Ri|=a),Xe===4&&Xa(e,ye,Lt,!1)),ca(e))}function qd(e,t,a){if((xe&6)!==0)throw Error(c(327));var i=!a&&(t&127)===0&&(t&e.expiredLanes)===0||At(e,t),n=i?Dm(e,t):Er(e,t,!0),l=i;do{if(n===0){tn&&!i&&Xa(e,t,0,!1);break}else{if(a=e.current.alternate,l&&!bm(a)){n=Er(e,t,!1),l=!1;continue}if(n===2){if(l=t,e.errorRecoveryDisabledLanes&l)var o=0;else o=e.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){t=o;e:{var r=e;n=Zn;var f=r.current.memoizedState.isDehydrated;if(f&&(ln(r,o).flags|=256),o=Er(r,o,!1),o!==2){if(dr&&!f){r.errorRecoveryDisabledLanes|=l,Ri|=l,n=4;break e}l=Ct,Ct=n,l!==null&&(Ct===null?Ct=l:Ct.push.apply(Ct,l))}n=o}if(l=!1,n!==2)continue}}if(n===1){ln(e,0),Xa(e,t,0,!0);break}e:{switch(i=e,l=n,l){case 0:case 1:throw Error(c(345));case 4:if((t&4194048)!==t)break;case 6:Xa(i,t,Lt,!za);break e;case 2:Ct=null;break;case 3:case 5:break;default:throw Error(c(329))}if((t&62914560)===t&&(n=os+300-pt(),10<n)){if(Xa(i,t,Lt,!za),Je(i,0,!0)!==0)break e;Oa=t,i.timeoutHandle=Tf(Fd.bind(null,i,a,Ct,cs,hr,t,Lt,Ri,an,za,l,"Throttled",-0,0),n);break e}Fd(i,a,Ct,cs,hr,t,Lt,Ri,an,za,l,null,-0,0)}}break}while(!0);ca(e)}function Fd(e,t,a,i,n,l,o,r,f,_,D,w,S,O){if(e.timeoutHandle=-1,w=t.subtreeFlags,w&8192||(w&16785408)===16785408){w={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ha},Dd(t,l,w);var K=(l&62914560)===l?os-pt():(l&4194048)===l?Hd-pt():0;if(K=mg(w,K),K!==null){Oa=l,e.cancelPendingCommit=K(Qd.bind(null,e,t,l,a,i,n,o,r,f,D,w,null,S,O)),Xa(e,l,o,!_);return}}Qd(e,t,l,a,i,n,o,r,f)}function bm(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var i=0;i<a.length;i++){var n=a[i],l=n.getSnapshot;n=n.value;try{if(!Nt(l(),n))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xa(e,t,a,i){t&=~fr,t&=~Ri,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var n=t;0<n;){var l=31-G(n),o=1<<l;i[l]=-1,n&=~o}a!==0&&Gt(e,a,t)}function us(){return(xe&6)===0?(Pn(0),!1):!0}function Tr(){if(me!==null){if(Ne===0)var e=me.return;else e=me,Ta=fi=null,ko(e),Qi=null,Ln=0,e=me;for(;e!==null;)Td(e.alternate,e),e=e.return;me=null}}function ln(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Zm(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Oa=0,Tr(),Ue=e,me=a=ga(e.current,null),ye=t,Ne=0,kt=null,za=!1,tn=At(e,t),dr=!1,an=Lt=fr=Ri=ja=Xe=0,Ct=Zn=null,hr=!1,(t&8)!==0&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var n=31-G(i),l=1<<n;t|=e[n],i&=~l}return xa=t,Ml(),a}function Gd(e,t){re=null,M.H=Yn,t===Xi||t===ql?(t=iu(),Ne=3):t===Ro?(t=iu(),Ne=4):Ne=t===Wo?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,kt=t,me===null&&(Xe=1,$l(e,Vt(t,e.current)))}function Yd(){var e=Mt.current;return e===null?!0:(ye&4194048)===ye?Wt===null:(ye&62914560)===ye||(ye&536870912)!==0?e===Wt:!1}function zd(){var e=M.H;return M.H=Yn,e===null?Yn:e}function jd(){var e=M.A;return M.A=Om,e}function ds(){Xe=4,za||(ye&4194048)!==ye&&Mt.current!==null||(tn=!0),(ja&134217727)===0&&(Ri&134217727)===0||Ue===null||Xa(Ue,ye,Lt,!1)}function Er(e,t,a){var i=xe;xe|=2;var n=zd(),l=jd();(Ue!==e||ye!==t)&&(cs=null,ln(e,t)),t=!1;var o=Xe;e:do try{if(Ne!==0&&me!==null){var r=me,f=kt;switch(Ne){case 8:Tr(),o=6;break e;case 3:case 2:case 9:case 6:Mt.current===null&&(t=!0);var _=Ne;if(Ne=0,kt=null,sn(e,r,f,_),a&&tn){o=0;break e}break;default:_=Ne,Ne=0,kt=null,sn(e,r,f,_)}}Mm(),o=Xe;break}catch(D){Gd(e,D)}while(!0);return t&&e.shellSuspendCounter++,Ta=fi=null,xe=i,M.H=n,M.A=l,me===null&&(Ue=null,ye=0,Ml()),o}function Mm(){for(;me!==null;)Vd(me)}function Dm(e,t){var a=xe;xe|=2;var i=zd(),n=jd();Ue!==e||ye!==t?(cs=null,rs=pt()+500,ln(e,t)):tn=At(e,t);e:do try{if(Ne!==0&&me!==null){t=me;var l=kt;t:switch(Ne){case 1:Ne=0,kt=null,sn(e,t,l,1);break;case 2:case 9:if(tu(l)){Ne=0,kt=null,Kd(t);break}t=function(){Ne!==2&&Ne!==9||Ue!==e||(Ne=7),ca(e)},l.then(t,t);break e;case 3:Ne=7;break e;case 4:Ne=5;break e;case 7:tu(l)?(Ne=0,kt=null,Kd(t)):(Ne=0,kt=null,sn(e,t,l,7));break;case 5:var o=null;switch(me.tag){case 26:o=me.memoizedState;case 5:case 27:var r=me;if(o?Df(o):r.stateNode.complete){Ne=0,kt=null;var f=r.sibling;if(f!==null)me=f;else{var _=r.return;_!==null?(me=_,fs(_)):me=null}break t}}Ne=0,kt=null,sn(e,t,l,5);break;case 6:Ne=0,kt=null,sn(e,t,l,6);break;case 8:Tr(),Xe=6;break e;default:throw Error(c(462))}}km();break}catch(D){Gd(e,D)}while(!0);return Ta=fi=null,M.H=i,M.A=n,xe=a,me!==null?0:(Ue=null,ye=0,Ml(),Xe)}function km(){for(;me!==null&&!Ii();)Vd(me)}function Vd(e){var t=gd(e.alternate,e,xa);e.memoizedProps=e.pendingProps,t===null?fs(e):me=t}function Kd(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=cd(a,t,t.pendingProps,t.type,void 0,ye);break;case 11:t=cd(a,t,t.pendingProps,t.type.render,t.ref,ye);break;case 5:ko(t);default:Td(a,t),t=me=jc(t,xa),t=gd(a,t,xa)}e.memoizedProps=e.pendingProps,t===null?fs(e):me=t}function sn(e,t,a,i){Ta=fi=null,ko(t),Qi=null,Ln=0;var n=t.return;try{if(Rm(e,n,t,a,ye)){Xe=1,$l(e,Vt(a,e.current)),me=null;return}}catch(l){if(n!==null)throw me=n,l;Xe=1,$l(e,Vt(a,e.current)),me=null;return}t.flags&32768?(pe||i===1?e=!0:tn||(ye&536870912)!==0?e=!1:(za=e=!0,(i===2||i===9||i===3||i===6)&&(i=Mt.current,i!==null&&i.tag===13&&(i.flags|=16384))),Xd(t,e)):fs(t)}function fs(e){var t=e;do{if((t.flags&32768)!==0){Xd(t,za);return}e=t.return;var a=vm(t.alternate,t,xa);if(a!==null){me=a;return}if(t=t.sibling,t!==null){me=t;return}me=t=e}while(t!==null);Xe===0&&(Xe=5)}function Xd(e,t){do{var a=Sm(e.alternate,e);if(a!==null){a.flags&=32767,me=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){me=e;return}me=e=a}while(e!==null);Xe=6,me=null}function Qd(e,t,a,i,n,l,o,r,f){e.cancelPendingCommit=null;do hs();while(it!==0);if((xe&6)!==0)throw Error(c(327));if(t!==null){if(t===e.current)throw Error(c(177));if(l=t.lanes|t.childLanes,l|=lo,yl(e,a,l,o,r,f),e===Ue&&(me=Ue=null,ye=0),nn=t,Ka=e,Oa=a,mr=l,gr=n,wd=i,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,wm(Si,function(){return $d(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||i){i=M.T,M.T=null,n=q.p,q.p=2,o=xe,xe|=4;try{Cm(e,t,a)}finally{xe=o,q.p=n,M.T=i}}it=1,Wd(),Zd(),Jd()}}function Wd(){if(it===1){it=0;var e=Ka,t=nn,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=M.T,M.T=null;var i=q.p;q.p=2;var n=xe;xe|=4;try{Nd(t,e);var l=br,o=Uc(e.containerInfo),r=l.focusedElem,f=l.selectionRange;if(o!==r&&r&&r.ownerDocument&&Lc(r.ownerDocument.documentElement,r)){if(f!==null&&eo(r)){var _=f.start,D=f.end;if(D===void 0&&(D=_),"selectionStart"in r)r.selectionStart=_,r.selectionEnd=Math.min(D,r.value.length);else{var w=r.ownerDocument||document,S=w&&w.defaultView||window;if(S.getSelection){var O=S.getSelection(),K=r.textContent.length,ee=Math.min(f.start,K),Le=f.end===void 0?ee:Math.min(f.end,K);!O.extend&&ee>Le&&(o=Le,Le=ee,ee=o);var E=kc(r,ee),h=kc(r,Le);if(E&&h&&(O.rangeCount!==1||O.anchorNode!==E.node||O.anchorOffset!==E.offset||O.focusNode!==h.node||O.focusOffset!==h.offset)){var R=w.createRange();R.setStart(E.node,E.offset),O.removeAllRanges(),ee>Le?(O.addRange(R),O.extend(h.node,h.offset)):(R.setEnd(h.node,h.offset),O.addRange(R))}}}}for(w=[],O=r;O=O.parentNode;)O.nodeType===1&&w.push({element:O,left:O.scrollLeft,top:O.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<w.length;r++){var L=w[r];L.element.scrollLeft=L.left,L.element.scrollTop=L.top}}Ss=!!Nr,br=Nr=null}finally{xe=n,q.p=i,M.T=a}}e.current=t,it=2}}function Zd(){if(it===2){it=0;var e=Ka,t=nn,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=M.T,M.T=null;var i=q.p;q.p=2;var n=xe;xe|=4;try{vd(e,t.alternate,t)}finally{xe=n,q.p=i,M.T=a}}it=3}}function Jd(){if(it===4||it===3){it=0,vi();var e=Ka,t=nn,a=Oa,i=wd;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?it=5:(it=0,nn=Ka=null,Pd(e,e.pendingLanes));var n=e.pendingLanes;if(n===0&&(Va=null),En(a),t=t.stateNode,C&&typeof C.onCommitFiberRoot=="function")try{C.onCommitFiberRoot(ni,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=M.T,n=q.p,q.p=2,M.T=null;try{for(var l=e.onRecoverableError,o=0;o<i.length;o++){var r=i[o];l(r.value,{componentStack:r.stack})}}finally{M.T=t,q.p=n}}(Oa&3)!==0&&hs(),ca(e),n=e.pendingLanes,(a&261930)!==0&&(n&42)!==0?e===yr?Jn++:(Jn=0,yr=e):Jn=0,Pn(0)}}function Pd(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Dn(t)))}function hs(){return Wd(),Zd(),Jd(),$d()}function $d(){if(it!==5)return!1;var e=Ka,t=mr;mr=0;var a=En(Oa),i=M.T,n=q.p;try{q.p=32>a?32:a,M.T=null,a=gr,gr=null;var l=Ka,o=Oa;if(it=0,nn=Ka=null,Oa=0,(xe&6)!==0)throw Error(c(331));var r=xe;if(xe|=4,Ld(l.current),Md(l,l.current,o,a),xe=r,Pn(0,!1),C&&typeof C.onPostCommitFiberRoot=="function")try{C.onPostCommitFiberRoot(ni,l)}catch{}return!0}finally{q.p=n,M.T=i,Pd(e,t)}}function ef(e,t,a){t=Vt(a,t),t=Qo(e.stateNode,t,2),e=qa(e,t,2),e!==null&&(Ft(e,2),ca(e))}function be(e,t,a){if(e.tag===3)ef(e,e,a);else for(;t!==null;){if(t.tag===3){ef(t,e,a);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Va===null||!Va.has(i))){e=Vt(a,e),a=td(2),i=qa(t,a,2),i!==null&&(ad(a,i,t,e),Ft(i,2),ca(i));break}}t=t.return}}function pr(e,t,a){var i=e.pingCache;if(i===null){i=e.pingCache=new Nm;var n=new Set;i.set(t,n)}else n=i.get(t),n===void 0&&(n=new Set,i.set(t,n));n.has(a)||(dr=!0,n.add(a),e=Lm.bind(null,e,t,a),t.then(e,e))}function Lm(e,t,a){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Ue===e&&(ye&a)===a&&(Xe===4||Xe===3&&(ye&62914560)===ye&&300>pt()-os?(xe&2)===0&&ln(e,0):fr|=a,an===ye&&(an=0)),ca(e)}function tf(e,t){t===0&&(t=mt()),e=ci(e,t),e!==null&&(Ft(e,t),ca(e))}function Um(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),tf(e,a)}function Hm(e,t){var a=0;switch(e.tag){case 31:case 13:var i=e.stateNode,n=e.memoizedState;n!==null&&(a=n.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(c(314))}i!==null&&i.delete(t),tf(e,a)}function wm(e,t){return Bt(e,t)}var ms=null,on=null,Ar=!1,gs=!1,Rr=!1,Qa=0;function ca(e){e!==on&&e.next===null&&(on===null?ms=on=e:on=on.next=e),gs=!0,Ar||(Ar=!0,qm())}function Pn(e,t){if(!Rr&&gs){Rr=!0;do for(var a=!1,i=ms;i!==null;){if(e!==0){var n=i.pendingLanes;if(n===0)var l=0;else{var o=i.suspendedLanes,r=i.pingedLanes;l=(1<<31-G(42|e)+1)-1,l&=n&~(o&~r),l=l&201326741?l&201326741|1:l?l|2:0}l!==0&&(a=!0,sf(i,l))}else l=ye,l=Je(i,i===Ue?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(l&3)===0||At(i,l)||(a=!0,sf(i,l));i=i.next}while(a);Rr=!1}}function Bm(){af()}function af(){gs=Ar=!1;var e=0;Qa!==0&&Wm()&&(e=Qa);for(var t=pt(),a=null,i=ms;i!==null;){var n=i.next,l=nf(i,t);l===0?(i.next=null,a===null?ms=n:a.next=n,n===null&&(on=a)):(a=i,(e!==0||(l&3)!==0)&&(gs=!0)),i=n}it!==0&&it!==5||Pn(e),Qa!==0&&(Qa=0)}function nf(e,t){for(var a=e.suspendedLanes,i=e.pingedLanes,n=e.expirationTimes,l=e.pendingLanes&-62914561;0<l;){var o=31-G(l),r=1<<o,f=n[o];f===-1?((r&a)===0||(r&i)!==0)&&(n[o]=Ce(r,t)):f<=t&&(e.expiredLanes|=r),l&=~r}if(t=Ue,a=ye,a=Je(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,a===0||e===t&&(Ne===2||Ne===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&ua(i),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||At(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(i!==null&&ua(i),En(a)){case 2:case 8:a=ml;break;case 32:a=Si;break;case 268435456:a=gl;break;default:a=Si}return i=lf.bind(null,e),a=Bt(a,i),e.callbackPriority=t,e.callbackNode=a,t}return i!==null&&i!==null&&ua(i),e.callbackPriority=2,e.callbackNode=null,2}function lf(e,t){if(it!==0&&it!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(hs()&&e.callbackNode!==a)return null;var i=ye;return i=Je(e,e===Ue?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(qd(e,i,t),nf(e,pt()),e.callbackNode!=null&&e.callbackNode===a?lf.bind(null,e):null)}function sf(e,t){if(hs())return null;qd(e,t,!0)}function qm(){Jm(function(){(xe&6)!==0?Bt(yn,Bm):af()})}function _r(){if(Qa===0){var e=Vi;e===0&&(e=at,at<<=1,(at&261888)===0&&(at=256)),Qa=e}return Qa}function of(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Il(""+e)}function rf(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function Fm(e,t,a,i,n){if(t==="submit"&&a&&a.stateNode===n){var l=of((n[Rt]||null).action),o=i.submitter;o&&(t=(t=o[Rt]||null)?of(t.formAction):o.getAttribute("formAction"),t!==null&&(l=t,o=null));var r=new xl("action","action",null,i,n);e.push({event:r,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Qa!==0){var f=o?rf(n,o):new FormData(n);Yo(a,{pending:!0,data:f,method:n.method,action:l},null,f)}}else typeof l=="function"&&(r.preventDefault(),f=o?rf(n,o):new FormData(n),Yo(a,{pending:!0,data:f,method:n.method,action:l},l,f))},currentTarget:n}]})}}for(var Ir=0;Ir<no.length;Ir++){var vr=no[Ir],Gm=vr.toLowerCase(),Ym=vr[0].toUpperCase()+vr.slice(1);aa(Gm,"on"+Ym)}aa(Bc,"onAnimationEnd"),aa(qc,"onAnimationIteration"),aa(Fc,"onAnimationStart"),aa("dblclick","onDoubleClick"),aa("focusin","onFocus"),aa("focusout","onBlur"),aa(nm,"onTransitionRun"),aa(lm,"onTransitionStart"),aa(sm,"onTransitionCancel"),aa(Gc,"onTransitionEnd"),Mi("onMouseEnter",["mouseout","mouseover"]),Mi("onMouseLeave",["mouseout","mouseover"]),Mi("onPointerEnter",["pointerout","pointerover"]),Mi("onPointerLeave",["pointerout","pointerover"]),li("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),li("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),li("onBeforeInput",["compositionend","keypress","textInput","paste"]),li("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),li("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),li("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $n="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zm=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($n));function cf(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var i=e[a],n=i.event;i=i.listeners;e:{var l=void 0;if(t)for(var o=i.length-1;0<=o;o--){var r=i[o],f=r.instance,_=r.currentTarget;if(r=r.listener,f!==l&&n.isPropagationStopped())break e;l=r,n.currentTarget=_;try{l(n)}catch(D){bl(D)}n.currentTarget=null,l=f}else for(o=0;o<i.length;o++){if(r=i[o],f=r.instance,_=r.currentTarget,r=r.listener,f!==l&&n.isPropagationStopped())break e;l=r,n.currentTarget=_;try{l(n)}catch(D){bl(D)}n.currentTarget=null,l=f}}}}function ge(e,t){var a=t[Hs];a===void 0&&(a=t[Hs]=new Set);var i=e+"__bubble";a.has(i)||(uf(t,e,2,!1),a.add(i))}function Sr(e,t,a){var i=0;t&&(i|=4),uf(a,e,i,t)}var ys="_reactListening"+Math.random().toString(36).slice(2);function Cr(e){if(!e[ys]){e[ys]=!0,ac.forEach(function(a){a!=="selectionchange"&&(zm.has(a)||Sr(a,!1,e),Sr(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ys]||(t[ys]=!0,Sr("selectionchange",!1,t))}}function uf(e,t,a,i){switch(qf(t)){case 2:var n=Tg;break;case 8:n=Eg;break;default:n=Gr}a=n.bind(null,t,a,e),n=void 0,!Vs||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),i?n!==void 0?e.addEventListener(t,a,{capture:!0,passive:n}):e.addEventListener(t,a,!0):n!==void 0?e.addEventListener(t,a,{passive:n}):e.addEventListener(t,a,!1)}function xr(e,t,a,i,n){var l=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var r=i.stateNode.containerInfo;if(r===n)break;if(o===4)for(o=i.return;o!==null;){var f=o.tag;if((f===3||f===4)&&o.stateNode.containerInfo===n)return;o=o.return}for(;r!==null;){if(o=Oi(r),o===null)return;if(f=o.tag,f===5||f===6||f===26||f===27){i=l=o;continue e}r=r.parentNode}}i=i.return}mc(function(){var _=l,D=zs(a),w=[];e:{var S=Yc.get(e);if(S!==void 0){var O=xl,K=e;switch(e){case"keypress":if(Sl(a)===0)break e;case"keydown":case"keyup":O=Hh;break;case"focusin":K="focus",O=Ws;break;case"focusout":K="blur",O=Ws;break;case"beforeblur":case"afterblur":O=Ws;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=Tc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=vh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=qh;break;case Bc:case qc:case Fc:O=xh;break;case Gc:O=Gh;break;case"scroll":case"scrollend":O=_h;break;case"wheel":O=zh;break;case"copy":case"cut":case"paste":O=Nh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=pc;break;case"toggle":case"beforetoggle":O=Vh}var ee=(t&4)!==0,Le=!ee&&(e==="scroll"||e==="scrollend"),E=ee?S!==null?S+"Capture":null:S;ee=[];for(var h=_,R;h!==null;){var L=h;if(R=L.stateNode,L=L.tag,L!==5&&L!==26&&L!==27||R===null||E===null||(L=Rn(h,E),L!=null&&ee.push(el(h,L,R))),Le)break;h=h.return}0<ee.length&&(S=new O(S,K,null,a,D),w.push({event:S,listeners:ee}))}}if((t&7)===0){e:{if(S=e==="mouseover"||e==="pointerover",O=e==="mouseout"||e==="pointerout",S&&a!==Ys&&(K=a.relatedTarget||a.fromElement)&&(Oi(K)||K[xi]))break e;if((O||S)&&(S=D.window===D?D:(S=D.ownerDocument)?S.defaultView||S.parentWindow:window,O?(K=a.relatedTarget||a.toElement,O=_,K=K?Oi(K):null,K!==null&&(Le=g(K),ee=K.tag,K!==Le||ee!==5&&ee!==27&&ee!==6)&&(K=null)):(O=null,K=_),O!==K)){if(ee=Tc,L="onMouseLeave",E="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(ee=pc,L="onPointerLeave",E="onPointerEnter",h="pointer"),Le=O==null?S:An(O),R=K==null?S:An(K),S=new ee(L,h+"leave",O,a,D),S.target=Le,S.relatedTarget=R,L=null,Oi(D)===_&&(ee=new ee(E,h+"enter",K,a,D),ee.target=R,ee.relatedTarget=Le,L=ee),Le=L,O&&K)t:{for(ee=jm,E=O,h=K,R=0,L=E;L;L=ee(L))R++;L=0;for(var J=h;J;J=ee(J))L++;for(;0<R-L;)E=ee(E),R--;for(;0<L-R;)h=ee(h),L--;for(;R--;){if(E===h||h!==null&&E===h.alternate){ee=E;break t}E=ee(E),h=ee(h)}ee=null}else ee=null;O!==null&&df(w,S,O,ee,!1),K!==null&&Le!==null&&df(w,Le,K,ee,!0)}}e:{if(S=_?An(_):window,O=S.nodeName&&S.nodeName.toLowerCase(),O==="select"||O==="input"&&S.type==="file")var Re=xc;else if(Sc(S))if(Oc)Re=tm;else{Re=$h;var W=Ph}else O=S.nodeName,!O||O.toLowerCase()!=="input"||S.type!=="checkbox"&&S.type!=="radio"?_&&Gs(_.elementType)&&(Re=xc):Re=em;if(Re&&(Re=Re(e,_))){Cc(w,Re,a,D);break e}W&&W(e,S,_),e==="focusout"&&_&&S.type==="number"&&_.memoizedProps.value!=null&&Fs(S,"number",S.value)}switch(W=_?An(_):window,e){case"focusin":(Sc(W)||W.contentEditable==="true")&&(wi=W,to=_,Nn=null);break;case"focusout":Nn=to=wi=null;break;case"mousedown":ao=!0;break;case"contextmenu":case"mouseup":case"dragend":ao=!1,Hc(w,a,D);break;case"selectionchange":if(im)break;case"keydown":case"keyup":Hc(w,a,D)}var ce;if(Js)e:{switch(e){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else Hi?Ic(e,a)&&(Te="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Te="onCompositionStart");Te&&(Ac&&a.locale!=="ko"&&(Hi||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&Hi&&(ce=gc()):(Da=D,Ks="value"in Da?Da.value:Da.textContent,Hi=!0)),W=Ts(_,Te),0<W.length&&(Te=new Ec(Te,e,null,a,D),w.push({event:Te,listeners:W}),ce?Te.data=ce:(ce=vc(a),ce!==null&&(Te.data=ce)))),(ce=Xh?Qh(e,a):Wh(e,a))&&(Te=Ts(_,"onBeforeInput"),0<Te.length&&(W=new Ec("onBeforeInput","beforeinput",null,a,D),w.push({event:W,listeners:Te}),W.data=ce)),Fm(w,e,_,a,D)}cf(w,t)})}function el(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Ts(e,t){for(var a=t+"Capture",i=[];e!==null;){var n=e,l=n.stateNode;if(n=n.tag,n!==5&&n!==26&&n!==27||l===null||(n=Rn(e,a),n!=null&&i.unshift(el(e,n,l)),n=Rn(e,t),n!=null&&i.push(el(e,n,l))),e.tag===3)return i;e=e.return}return[]}function jm(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function df(e,t,a,i,n){for(var l=t._reactName,o=[];a!==null&&a!==i;){var r=a,f=r.alternate,_=r.stateNode;if(r=r.tag,f!==null&&f===i)break;r!==5&&r!==26&&r!==27||_===null||(f=_,n?(_=Rn(a,l),_!=null&&o.unshift(el(a,_,f))):n||(_=Rn(a,l),_!=null&&o.push(el(a,_,f)))),a=a.return}o.length!==0&&e.push({event:t,listeners:o})}var Vm=/\r\n?/g,Km=/\u0000|\uFFFD/g;function ff(e){return(typeof e=="string"?e:""+e).replace(Vm,`
`).replace(Km,"")}function hf(e,t){return t=ff(t),ff(e)===t}function ke(e,t,a,i,n,l){switch(a){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||ki(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&ki(e,""+i);break;case"className":Rl(e,"class",i);break;case"tabIndex":Rl(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Rl(e,a,i);break;case"style":fc(e,i,l);break;case"data":if(t!=="object"){Rl(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(a);break}i=Il(""+i),e.setAttribute(a,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof l=="function"&&(a==="formAction"?(t!=="input"&&ke(e,t,"name",n.name,n,null),ke(e,t,"formEncType",n.formEncType,n,null),ke(e,t,"formMethod",n.formMethod,n,null),ke(e,t,"formTarget",n.formTarget,n,null)):(ke(e,t,"encType",n.encType,n,null),ke(e,t,"method",n.method,n,null),ke(e,t,"target",n.target,n,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(a);break}i=Il(""+i),e.setAttribute(a,i);break;case"onClick":i!=null&&(e.onclick=ha);break;case"onScroll":i!=null&&ge("scroll",e);break;case"onScrollEnd":i!=null&&ge("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(c(61));if(a=i.__html,a!=null){if(n.children!=null)throw Error(c(60));e.innerHTML=a}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}a=Il(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,""+i):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":i===!0?e.setAttribute(a,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,i):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(a,i):e.removeAttribute(a);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(a):e.setAttribute(a,i);break;case"popover":ge("beforetoggle",e),ge("toggle",e),Al(e,"popover",i);break;case"xlinkActuate":fa(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":fa(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":fa(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":fa(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":fa(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":fa(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":fa(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":fa(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":fa(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Al(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ah.get(a)||a,Al(e,a,i))}}function Or(e,t,a,i,n,l){switch(a){case"style":fc(e,i,l);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(c(61));if(a=i.__html,a!=null){if(n.children!=null)throw Error(c(60));e.innerHTML=a}}break;case"children":typeof i=="string"?ki(e,i):(typeof i=="number"||typeof i=="bigint")&&ki(e,""+i);break;case"onScroll":i!=null&&ge("scroll",e);break;case"onScrollEnd":i!=null&&ge("scrollend",e);break;case"onClick":i!=null&&(e.onclick=ha);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ic.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(n=a.endsWith("Capture"),t=a.slice(2,n?a.length-7:void 0),l=e[Rt]||null,l=l!=null?l[a]:null,typeof l=="function"&&e.removeEventListener(t,l,n),typeof i=="function")){typeof l!="function"&&l!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,i,n);break e}a in e?e[a]=i:i===!0?e.setAttribute(a,""):Al(e,a,i)}}}function dt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ge("error",e),ge("load",e);var i=!1,n=!1,l;for(l in a)if(a.hasOwnProperty(l)){var o=a[l];if(o!=null)switch(l){case"src":i=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:ke(e,t,l,o,a,null)}}n&&ke(e,t,"srcSet",a.srcSet,a,null),i&&ke(e,t,"src",a.src,a,null);return;case"input":ge("invalid",e);var r=l=o=n=null,f=null,_=null;for(i in a)if(a.hasOwnProperty(i)){var D=a[i];if(D!=null)switch(i){case"name":n=D;break;case"type":o=D;break;case"checked":f=D;break;case"defaultChecked":_=D;break;case"value":l=D;break;case"defaultValue":r=D;break;case"children":case"dangerouslySetInnerHTML":if(D!=null)throw Error(c(137,t));break;default:ke(e,t,i,D,a,null)}}rc(e,l,r,f,_,o,n,!1);return;case"select":ge("invalid",e),i=o=l=null;for(n in a)if(a.hasOwnProperty(n)&&(r=a[n],r!=null))switch(n){case"value":l=r;break;case"defaultValue":o=r;break;case"multiple":i=r;default:ke(e,t,n,r,a,null)}t=l,a=o,e.multiple=!!i,t!=null?Di(e,!!i,t,!1):a!=null&&Di(e,!!i,a,!0);return;case"textarea":ge("invalid",e),l=n=i=null;for(o in a)if(a.hasOwnProperty(o)&&(r=a[o],r!=null))switch(o){case"value":i=r;break;case"defaultValue":n=r;break;case"children":l=r;break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(c(91));break;default:ke(e,t,o,r,a,null)}uc(e,i,n,l);return;case"option":for(f in a)a.hasOwnProperty(f)&&(i=a[f],i!=null)&&(f==="selected"?e.selected=i&&typeof i!="function"&&typeof i!="symbol":ke(e,t,f,i,a,null));return;case"dialog":ge("beforetoggle",e),ge("toggle",e),ge("cancel",e),ge("close",e);break;case"iframe":case"object":ge("load",e);break;case"video":case"audio":for(i=0;i<$n.length;i++)ge($n[i],e);break;case"image":ge("error",e),ge("load",e);break;case"details":ge("toggle",e);break;case"embed":case"source":case"link":ge("error",e),ge("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(_ in a)if(a.hasOwnProperty(_)&&(i=a[_],i!=null))switch(_){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:ke(e,t,_,i,a,null)}return;default:if(Gs(t)){for(D in a)a.hasOwnProperty(D)&&(i=a[D],i!==void 0&&Or(e,t,D,i,a,void 0));return}}for(r in a)a.hasOwnProperty(r)&&(i=a[r],i!=null&&ke(e,t,r,i,a,null))}function Xm(e,t,a,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,l=null,o=null,r=null,f=null,_=null,D=null;for(O in a){var w=a[O];if(a.hasOwnProperty(O)&&w!=null)switch(O){case"checked":break;case"value":break;case"defaultValue":f=w;default:i.hasOwnProperty(O)||ke(e,t,O,null,i,w)}}for(var S in i){var O=i[S];if(w=a[S],i.hasOwnProperty(S)&&(O!=null||w!=null))switch(S){case"type":l=O;break;case"name":n=O;break;case"checked":_=O;break;case"defaultChecked":D=O;break;case"value":o=O;break;case"defaultValue":r=O;break;case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(c(137,t));break;default:O!==w&&ke(e,t,S,O,i,w)}}qs(e,o,r,f,_,D,l,n);return;case"select":O=o=r=S=null;for(l in a)if(f=a[l],a.hasOwnProperty(l)&&f!=null)switch(l){case"value":break;case"multiple":O=f;default:i.hasOwnProperty(l)||ke(e,t,l,null,i,f)}for(n in i)if(l=i[n],f=a[n],i.hasOwnProperty(n)&&(l!=null||f!=null))switch(n){case"value":S=l;break;case"defaultValue":r=l;break;case"multiple":o=l;default:l!==f&&ke(e,t,n,l,i,f)}t=r,a=o,i=O,S!=null?Di(e,!!a,S,!1):!!i!=!!a&&(t!=null?Di(e,!!a,t,!0):Di(e,!!a,a?[]:"",!1));return;case"textarea":O=S=null;for(r in a)if(n=a[r],a.hasOwnProperty(r)&&n!=null&&!i.hasOwnProperty(r))switch(r){case"value":break;case"children":break;default:ke(e,t,r,null,i,n)}for(o in i)if(n=i[o],l=a[o],i.hasOwnProperty(o)&&(n!=null||l!=null))switch(o){case"value":S=n;break;case"defaultValue":O=n;break;case"children":break;case"dangerouslySetInnerHTML":if(n!=null)throw Error(c(91));break;default:n!==l&&ke(e,t,o,n,i,l)}cc(e,S,O);return;case"option":for(var K in a)S=a[K],a.hasOwnProperty(K)&&S!=null&&!i.hasOwnProperty(K)&&(K==="selected"?e.selected=!1:ke(e,t,K,null,i,S));for(f in i)S=i[f],O=a[f],i.hasOwnProperty(f)&&S!==O&&(S!=null||O!=null)&&(f==="selected"?e.selected=S&&typeof S!="function"&&typeof S!="symbol":ke(e,t,f,S,i,O));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ee in a)S=a[ee],a.hasOwnProperty(ee)&&S!=null&&!i.hasOwnProperty(ee)&&ke(e,t,ee,null,i,S);for(_ in i)if(S=i[_],O=a[_],i.hasOwnProperty(_)&&S!==O&&(S!=null||O!=null))switch(_){case"children":case"dangerouslySetInnerHTML":if(S!=null)throw Error(c(137,t));break;default:ke(e,t,_,S,i,O)}return;default:if(Gs(t)){for(var Le in a)S=a[Le],a.hasOwnProperty(Le)&&S!==void 0&&!i.hasOwnProperty(Le)&&Or(e,t,Le,void 0,i,S);for(D in i)S=i[D],O=a[D],!i.hasOwnProperty(D)||S===O||S===void 0&&O===void 0||Or(e,t,D,S,i,O);return}}for(var E in a)S=a[E],a.hasOwnProperty(E)&&S!=null&&!i.hasOwnProperty(E)&&ke(e,t,E,null,i,S);for(w in i)S=i[w],O=a[w],!i.hasOwnProperty(w)||S===O||S==null&&O==null||ke(e,t,w,S,i,O)}function mf(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Qm(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),i=0;i<a.length;i++){var n=a[i],l=n.transferSize,o=n.initiatorType,r=n.duration;if(l&&r&&mf(o)){for(o=0,r=n.responseEnd,i+=1;i<a.length;i++){var f=a[i],_=f.startTime;if(_>r)break;var D=f.transferSize,w=f.initiatorType;D&&mf(w)&&(f=f.responseEnd,o+=D*(f<r?1:(r-_)/(f-_)))}if(--i,t+=8*(l+o)/(n.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Nr=null,br=null;function Es(e){return e.nodeType===9?e:e.ownerDocument}function gf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yf(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Mr(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Dr=null;function Wm(){var e=window.event;return e&&e.type==="popstate"?e===Dr?!1:(Dr=e,!0):(Dr=null,!1)}var Tf=typeof setTimeout=="function"?setTimeout:void 0,Zm=typeof clearTimeout=="function"?clearTimeout:void 0,Ef=typeof Promise=="function"?Promise:void 0,Jm=typeof queueMicrotask=="function"?queueMicrotask:typeof Ef<"u"?function(e){return Ef.resolve(null).then(e).catch(Pm)}:Tf;function Pm(e){setTimeout(function(){throw e})}function Wa(e){return e==="head"}function pf(e,t){var a=t,i=0;do{var n=a.nextSibling;if(e.removeChild(a),n&&n.nodeType===8)if(a=n.data,a==="/$"||a==="/&"){if(i===0){e.removeChild(n),dn(t);return}i--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")i++;else if(a==="html")tl(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,tl(a);for(var l=a.firstChild;l;){var o=l.nextSibling,r=l.nodeName;l[pn]||r==="SCRIPT"||r==="STYLE"||r==="LINK"&&l.rel.toLowerCase()==="stylesheet"||a.removeChild(l),l=o}}else a==="body"&&tl(e.ownerDocument.body);a=n}while(a);dn(t)}function Af(e,t){var a=e;e=0;do{var i=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),i&&i.nodeType===8)if(a=i.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=i}while(a)}function kr(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":kr(a),ws(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function $m(e,t,a,i){for(;e.nodeType===1;){var n=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[pn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(l=e.getAttribute("rel"),l==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(l!==n.rel||e.getAttribute("href")!==(n.href==null||n.href===""?null:n.href)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin)||e.getAttribute("title")!==(n.title==null?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(l=e.getAttribute("src"),(l!==(n.src==null?null:n.src)||e.getAttribute("type")!==(n.type==null?null:n.type)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin))&&l&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var l=n.name==null?null:""+n.name;if(n.type==="hidden"&&e.getAttribute("name")===l)return e}else return e;if(e=Zt(e.nextSibling),e===null)break}return null}function eg(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Zt(e.nextSibling),e===null))return null;return e}function Rf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Zt(e.nextSibling),e===null))return null;return e}function Lr(e){return e.data==="$?"||e.data==="$~"}function Ur(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function tg(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var i=function(){t(),a.removeEventListener("DOMContentLoaded",i)};a.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Zt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Hr=null;function _f(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Zt(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function If(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function vf(e,t,a){switch(t=Es(a),e){case"html":if(e=t.documentElement,!e)throw Error(c(452));return e;case"head":if(e=t.head,!e)throw Error(c(453));return e;case"body":if(e=t.body,!e)throw Error(c(454));return e;default:throw Error(c(451))}}function tl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ws(e)}var Jt=new Map,Sf=new Set;function ps(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Na=q.d;q.d={f:ag,r:ig,D:ng,C:lg,L:sg,m:og,X:cg,S:rg,M:ug};function ag(){var e=Na.f(),t=us();return e||t}function ig(e){var t=Ni(e);t!==null&&t.tag===5&&t.type==="form"?Gu(t):Na.r(e)}var rn=typeof document>"u"?null:document;function Cf(e,t,a){var i=rn;if(i&&typeof t=="string"&&t){var n=zt(t);n='link[rel="'+e+'"][href="'+n+'"]',typeof a=="string"&&(n+='[crossorigin="'+a+'"]'),Sf.has(n)||(Sf.add(n),e={rel:e,crossOrigin:a,href:t},i.querySelector(n)===null&&(t=i.createElement("link"),dt(t,"link",e),lt(t),i.head.appendChild(t)))}}function ng(e){Na.D(e),Cf("dns-prefetch",e,null)}function lg(e,t){Na.C(e,t),Cf("preconnect",e,t)}function sg(e,t,a){Na.L(e,t,a);var i=rn;if(i&&e&&t){var n='link[rel="preload"][as="'+zt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(n+='[imagesrcset="'+zt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(n+='[imagesizes="'+zt(a.imageSizes)+'"]')):n+='[href="'+zt(e)+'"]';var l=n;switch(t){case"style":l=cn(e);break;case"script":l=un(e)}Jt.has(l)||(e=U({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Jt.set(l,e),i.querySelector(n)!==null||t==="style"&&i.querySelector(al(l))||t==="script"&&i.querySelector(il(l))||(t=i.createElement("link"),dt(t,"link",e),lt(t),i.head.appendChild(t)))}}function og(e,t){Na.m(e,t);var a=rn;if(a&&e){var i=t&&typeof t.as=="string"?t.as:"script",n='link[rel="modulepreload"][as="'+zt(i)+'"][href="'+zt(e)+'"]',l=n;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":l=un(e)}if(!Jt.has(l)&&(e=U({rel:"modulepreload",href:e},t),Jt.set(l,e),a.querySelector(n)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(il(l)))return}i=a.createElement("link"),dt(i,"link",e),lt(i),a.head.appendChild(i)}}}function rg(e,t,a){Na.S(e,t,a);var i=rn;if(i&&e){var n=bi(i).hoistableStyles,l=cn(e);t=t||"default";var o=n.get(l);if(!o){var r={loading:0,preload:null};if(o=i.querySelector(al(l)))r.loading=5;else{e=U({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Jt.get(l))&&wr(e,a);var f=o=i.createElement("link");lt(f),dt(f,"link",e),f._p=new Promise(function(_,D){f.onload=_,f.onerror=D}),f.addEventListener("load",function(){r.loading|=1}),f.addEventListener("error",function(){r.loading|=2}),r.loading|=4,As(o,t,i)}o={type:"stylesheet",instance:o,count:1,state:r},n.set(l,o)}}}function cg(e,t){Na.X(e,t);var a=rn;if(a&&e){var i=bi(a).hoistableScripts,n=un(e),l=i.get(n);l||(l=a.querySelector(il(n)),l||(e=U({src:e,async:!0},t),(t=Jt.get(n))&&Br(e,t),l=a.createElement("script"),lt(l),dt(l,"link",e),a.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},i.set(n,l))}}function ug(e,t){Na.M(e,t);var a=rn;if(a&&e){var i=bi(a).hoistableScripts,n=un(e),l=i.get(n);l||(l=a.querySelector(il(n)),l||(e=U({src:e,async:!0,type:"module"},t),(t=Jt.get(n))&&Br(e,t),l=a.createElement("script"),lt(l),dt(l,"link",e),a.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},i.set(n,l))}}function xf(e,t,a,i){var n=(n=Z.current)?ps(n):null;if(!n)throw Error(c(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=cn(a.href),a=bi(n).hoistableStyles,i=a.get(t),i||(i={type:"style",instance:null,count:0,state:null},a.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=cn(a.href);var l=bi(n).hoistableStyles,o=l.get(e);if(o||(n=n.ownerDocument||n,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},l.set(e,o),(l=n.querySelector(al(e)))&&!l._p&&(o.instance=l,o.state.loading=5),Jt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Jt.set(e,a),l||dg(n,e,a,o.state))),t&&i===null)throw Error(c(528,""));return o}if(t&&i!==null)throw Error(c(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=un(a),a=bi(n).hoistableScripts,i=a.get(t),i||(i={type:"script",instance:null,count:0,state:null},a.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,e))}}function cn(e){return'href="'+zt(e)+'"'}function al(e){return'link[rel="stylesheet"]['+e+"]"}function Of(e){return U({},e,{"data-precedence":e.precedence,precedence:null})}function dg(e,t,a,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),dt(t,"link",a),lt(t),e.head.appendChild(t))}function un(e){return'[src="'+zt(e)+'"]'}function il(e){return"script[async]"+e}function Nf(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+zt(a.href)+'"]');if(i)return t.instance=i,lt(i),i;var n=U({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),lt(i),dt(i,"style",n),As(i,a.precedence,e),t.instance=i;case"stylesheet":n=cn(a.href);var l=e.querySelector(al(n));if(l)return t.state.loading|=4,t.instance=l,lt(l),l;i=Of(a),(n=Jt.get(n))&&wr(i,n),l=(e.ownerDocument||e).createElement("link"),lt(l);var o=l;return o._p=new Promise(function(r,f){o.onload=r,o.onerror=f}),dt(l,"link",i),t.state.loading|=4,As(l,a.precedence,e),t.instance=l;case"script":return l=un(a.src),(n=e.querySelector(il(l)))?(t.instance=n,lt(n),n):(i=a,(n=Jt.get(l))&&(i=U({},a),Br(i,n)),e=e.ownerDocument||e,n=e.createElement("script"),lt(n),dt(n,"link",i),e.head.appendChild(n),t.instance=n);case"void":return null;default:throw Error(c(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(i=t.instance,t.state.loading|=4,As(i,a.precedence,e));return t.instance}function As(e,t,a){for(var i=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=i.length?i[i.length-1]:null,l=n,o=0;o<i.length;o++){var r=i[o];if(r.dataset.precedence===t)l=r;else if(l!==n)break}l?l.parentNode.insertBefore(e,l.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function wr(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Br(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Rs=null;function bf(e,t,a){if(Rs===null){var i=new Map,n=Rs=new Map;n.set(a,i)}else n=Rs,i=n.get(a),i||(i=new Map,n.set(a,i));if(i.has(e))return i;for(i.set(e,null),a=a.getElementsByTagName(e),n=0;n<a.length;n++){var l=a[n];if(!(l[pn]||l[ot]||e==="link"&&l.getAttribute("rel")==="stylesheet")&&l.namespaceURI!=="http://www.w3.org/2000/svg"){var o=l.getAttribute(t)||"";o=e+o;var r=i.get(o);r?r.push(l):i.set(o,[l])}}return i}function Mf(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function fg(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Df(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function hg(e,t,a,i){if(a.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var n=cn(i.href),l=t.querySelector(al(n));if(l){t=l._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=_s.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=l,lt(l);return}l=t.ownerDocument||t,i=Of(i),(n=Jt.get(n))&&wr(i,n),l=l.createElement("link"),lt(l);var o=l;o._p=new Promise(function(r,f){o.onload=r,o.onerror=f}),dt(l,"link",i),a.instance=l}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=_s.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var qr=0;function mg(e,t){return e.stylesheets&&e.count===0&&vs(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var i=setTimeout(function(){if(e.stylesheets&&vs(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4+t);0<e.imgBytes&&qr===0&&(qr=62500*Qm());var n=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&vs(e,e.stylesheets),e.unsuspend)){var l=e.unsuspend;e.unsuspend=null,l()}},(e.imgBytes>qr?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(n)}}:null}function _s(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)vs(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Is=null;function vs(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Is=new Map,t.forEach(gg,e),Is=null,_s.call(e))}function gg(e,t){if(!(t.state.loading&4)){var a=Is.get(e);if(a)var i=a.get(null);else{a=new Map,Is.set(e,a);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),l=0;l<n.length;l++){var o=n[l];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(a.set(o.dataset.precedence,o),i=o)}i&&a.set(null,i)}n=t.instance,o=n.getAttribute("data-precedence"),l=a.get(o)||i,l===i&&a.set(null,n),a.set(o,n),this.count++,i=_s.bind(this),n.addEventListener("load",i),n.addEventListener("error",i),l?l.parentNode.insertBefore(n,l.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(n,e.firstChild)),t.state.loading|=4}}var nl={$$typeof:B,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function yg(e,t,a,i,n,l,o,r,f){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ta(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ta(0),this.hiddenUpdates=ta(null),this.identifierPrefix=i,this.onUncaughtError=n,this.onCaughtError=l,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=f,this.incompleteTransitions=new Map}function kf(e,t,a,i,n,l,o,r,f,_,D,w){return e=new yg(e,t,a,o,f,_,D,w,r),t=1,l===!0&&(t|=24),l=bt(3,null,null,t),e.current=l,l.stateNode=e,t=Eo(),t.refCount++,e.pooledCache=t,t.refCount++,l.memoizedState={element:i,isDehydrated:a,cache:t},_o(l),e}function Lf(e){return e?(e=Fi,e):Fi}function Uf(e,t,a,i,n,l){n=Lf(n),i.context===null?i.context=n:i.pendingContext=n,i=Ba(t),i.payload={element:a},l=l===void 0?null:l,l!==null&&(i.callback=l),a=qa(e,i,t),a!==null&&(xt(a,e,t),Hn(a,e,t))}function Hf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Fr(e,t){Hf(e,t),(e=e.alternate)&&Hf(e,t)}function wf(e){if(e.tag===13||e.tag===31){var t=ci(e,67108864);t!==null&&xt(t,e,67108864),Fr(e,67108864)}}function Bf(e){if(e.tag===13||e.tag===31){var t=Ut();t=El(t);var a=ci(e,t);a!==null&&xt(a,e,t),Fr(e,t)}}var Ss=!0;function Tg(e,t,a,i){var n=M.T;M.T=null;var l=q.p;try{q.p=2,Gr(e,t,a,i)}finally{q.p=l,M.T=n}}function Eg(e,t,a,i){var n=M.T;M.T=null;var l=q.p;try{q.p=8,Gr(e,t,a,i)}finally{q.p=l,M.T=n}}function Gr(e,t,a,i){if(Ss){var n=Yr(i);if(n===null)xr(e,t,i,Cs,a),Ff(e,i);else if(Ag(n,e,t,a,i))i.stopPropagation();else if(Ff(e,i),t&4&&-1<pg.indexOf(e)){for(;n!==null;){var l=Ni(n);if(l!==null)switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var o=je(l.pendingLanes);if(o!==0){var r=l;for(r.pendingLanes|=2,r.entangledLanes|=2;o;){var f=1<<31-G(o);r.entanglements[1]|=f,o&=~f}ca(l),(xe&6)===0&&(rs=pt()+500,Pn(0))}}break;case 31:case 13:r=ci(l,2),r!==null&&xt(r,l,2),us(),Fr(l,2)}if(l=Yr(i),l===null&&xr(e,t,i,Cs,a),l===n)break;n=l}n!==null&&i.stopPropagation()}else xr(e,t,i,null,a)}}function Yr(e){return e=zs(e),zr(e)}var Cs=null;function zr(e){if(Cs=null,e=Oi(e),e!==null){var t=g(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=b(t),e!==null)return e;e=null}else if(a===31){if(e=N(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Cs=e,null}function qf(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(hl()){case yn:return 2;case ml:return 8;case Si:case Us:return 32;case gl:return 268435456;default:return 32}default:return 32}}var jr=!1,Za=null,Ja=null,Pa=null,ll=new Map,sl=new Map,$a=[],pg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ff(e,t){switch(e){case"focusin":case"focusout":Za=null;break;case"dragenter":case"dragleave":Ja=null;break;case"mouseover":case"mouseout":Pa=null;break;case"pointerover":case"pointerout":ll.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":sl.delete(t.pointerId)}}function ol(e,t,a,i,n,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:a,eventSystemFlags:i,nativeEvent:l,targetContainers:[n]},t!==null&&(t=Ni(t),t!==null&&wf(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function Ag(e,t,a,i,n){switch(t){case"focusin":return Za=ol(Za,e,t,a,i,n),!0;case"dragenter":return Ja=ol(Ja,e,t,a,i,n),!0;case"mouseover":return Pa=ol(Pa,e,t,a,i,n),!0;case"pointerover":var l=n.pointerId;return ll.set(l,ol(ll.get(l)||null,e,t,a,i,n)),!0;case"gotpointercapture":return l=n.pointerId,sl.set(l,ol(sl.get(l)||null,e,t,a,i,n)),!0}return!1}function Gf(e){var t=Oi(e.target);if(t!==null){var a=g(t);if(a!==null){if(t=a.tag,t===13){if(t=b(a),t!==null){e.blockedOn=t,ec(e.priority,function(){Bf(a)});return}}else if(t===31){if(t=N(a),t!==null){e.blockedOn=t,ec(e.priority,function(){Bf(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Yr(e.nativeEvent);if(a===null){a=e.nativeEvent;var i=new a.constructor(a.type,a);Ys=i,a.target.dispatchEvent(i),Ys=null}else return t=Ni(a),t!==null&&wf(t),e.blockedOn=a,!1;t.shift()}return!0}function Yf(e,t,a){xs(e)&&a.delete(t)}function Rg(){jr=!1,Za!==null&&xs(Za)&&(Za=null),Ja!==null&&xs(Ja)&&(Ja=null),Pa!==null&&xs(Pa)&&(Pa=null),ll.forEach(Yf),sl.forEach(Yf)}function Os(e,t){e.blockedOn===t&&(e.blockedOn=null,jr||(jr=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Rg)))}var Ns=null;function zf(e){Ns!==e&&(Ns=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Ns===e&&(Ns=null);for(var t=0;t<e.length;t+=3){var a=e[t],i=e[t+1],n=e[t+2];if(typeof i!="function"){if(zr(i||a)===null)continue;break}var l=Ni(a);l!==null&&(e.splice(t,3),t-=3,Yo(l,{pending:!0,data:n,method:a.method,action:i},i,n))}}))}function dn(e){function t(f){return Os(f,e)}Za!==null&&Os(Za,e),Ja!==null&&Os(Ja,e),Pa!==null&&Os(Pa,e),ll.forEach(t),sl.forEach(t);for(var a=0;a<$a.length;a++){var i=$a[a];i.blockedOn===e&&(i.blockedOn=null)}for(;0<$a.length&&(a=$a[0],a.blockedOn===null);)Gf(a),a.blockedOn===null&&$a.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(i=0;i<a.length;i+=3){var n=a[i],l=a[i+1],o=n[Rt]||null;if(typeof l=="function")o||zf(a);else if(o){var r=null;if(l&&l.hasAttribute("formAction")){if(n=l,o=l[Rt]||null)r=o.formAction;else if(zr(n)!==null)continue}else r=o.action;typeof r=="function"?a[i+1]=r:(a.splice(i,3),i-=3),zf(a)}}}function jf(){function e(l){l.canIntercept&&l.info==="react-transition"&&l.intercept({handler:function(){return new Promise(function(o){return n=o})},focusReset:"manual",scroll:"manual"})}function t(){n!==null&&(n(),n=null),i||setTimeout(a,20)}function a(){if(!i&&!navigation.transition){var l=navigation.currentEntry;l&&l.url!=null&&navigation.navigate(l.url,{state:l.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,n=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),n!==null&&(n(),n=null)}}}function Vr(e){this._internalRoot=e}bs.prototype.render=Vr.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(c(409));var a=t.current,i=Ut();Uf(a,i,e,t,null,null)},bs.prototype.unmount=Vr.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Uf(e.current,2,null,e,null,null),us(),t[xi]=null}};function bs(e){this._internalRoot=e}bs.prototype.unstable_scheduleHydration=function(e){if(e){var t=pl();e={blockedOn:null,target:e,priority:t};for(var a=0;a<$a.length&&t!==0&&t<$a[a].priority;a++);$a.splice(a,0,e),a===0&&Gf(e)}};var Vf=u.version;if(Vf!=="19.2.4")throw Error(c(527,Vf,"19.2.4"));q.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=T(t),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var _g={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ms=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ms.isDisabled&&Ms.supportsFiber)try{ni=Ms.inject(_g),C=Ms}catch{}}return cl.createRoot=function(e,t){if(!I(e))throw Error(c(299));var a=!1,i="",n=Ju,l=Pu,o=$u;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(n=t.onUncaughtError),t.onCaughtError!==void 0&&(l=t.onCaughtError),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=kf(e,1,!1,null,null,a,i,null,n,l,o,jf),e[xi]=t.current,Cr(e),new Vr(t)},cl.hydrateRoot=function(e,t,a){if(!I(e))throw Error(c(299));var i=!1,n="",l=Ju,o=Pu,r=$u,f=null;return a!=null&&(a.unstable_strictMode===!0&&(i=!0),a.identifierPrefix!==void 0&&(n=a.identifierPrefix),a.onUncaughtError!==void 0&&(l=a.onUncaughtError),a.onCaughtError!==void 0&&(o=a.onCaughtError),a.onRecoverableError!==void 0&&(r=a.onRecoverableError),a.formState!==void 0&&(f=a.formState)),t=kf(e,1,!0,t,a??null,i,n,f,l,o,r,jf),t.context=Lf(null),a=t.current,i=Ut(),i=El(i),n=Ba(i),n.callback=null,qa(a,n,i),a=i,t.current.lanes=a,Ft(t,a),ca(t),e[xi]=t.current,Cr(e),new bs(t)},cl.version="19.2.4",cl}var th;function Dg(){if(th)return Qr.exports;th=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(u){console.error(u)}}return s(),Qr.exports=Mg(),Qr.exports}var kg=Dg();const ul=[{id:"INFO_NEED_MARKETPLACE",title:"Marketplace Established",text:'Your marketplace is now operational. As long as this need stays fulfilled, the "Market Day" event can occur, bringing new trading opportunities to your village.',canTriggerRandomly:!1,advancesTick:!1,portraitId:"advisor",options:[{text:"Understood.",effects:{}}]},{id:"INFO_NEED_BREAD",title:"Bread Production Active",text:"Your bakery is now producing bread. Each tick, there is a 10% chance to gain +1 additional farmer growth, supporting population expansion.",canTriggerRandomly:!1,advancesTick:!1,portraitId:"advisor",options:[{text:"Understood.",effects:{}}]},{id:"INFO_NEED_BEER",title:"Brewery Operational",text:'Beer production has begun. The "Feierabend in der Kneipe" event is now unlocked, providing satisfaction-related benefits for your villagers.',canTriggerRandomly:!1,advancesTick:!1,portraitId:"advisor",options:[{text:"Understood.",effects:{}}]},{id:"INFO_NEED_FIREWOOD",title:"Firewood Supply Organized",text:"Professional firewood supply is now active. When an event increases fire risk, there is a 25% chance the increase is reduced by half, protecting your village.",canTriggerRandomly:!1,advancesTick:!1,portraitId:"advisor",options:[{text:"Understood.",effects:{}}]},{id:"INFO_NEED_WELL",title:"Central Well Constructed",text:"Your well is now operational. When an event grants health, there is a 50% chance to gain +1 additional health, improving overall village wellbeing.",canTriggerRandomly:!1,advancesTick:!1,portraitId:"advisor",options:[{text:"Understood.",effects:{}}]}],Ot=[{id:"EVT_RECRUIT_MILITIA",title:"Call to Arms",text:"The borders feel thin. Should we recruit farmers into the militia to bolster defenses, even if the fields suffer from fewer hands?",portraitId:"military_advisor",options:[{text:"YES",effects:{landForces:5,farmers:-5,gold:-5,authority:1}},{text:"NO",effects:{satisfaction:5,authority:-1}}]},{id:"EVT_RAID_SMALL",title:"Shadows in the Woods",text:'A small band of brigands has been spotted nearby. Do we drive them off by force or pay a "toll" to keep the peace?',portraitId:"bandit",combat:{enemyForces:3,prepDelayMinTicks:3,prepDelayMaxTicks:5,onWin:{gold:10,authority:1},onLose:{gold:-10,authority:-2}},options:[{text:"FIGHT AND ROB",effects:{}},{text:"PAY TOLL",effects:{gold:-10,authority:-1}}]},{id:"EVT_RAID_LARGE",title:"The War Horns",text:"A massive raiding force is at the gates! Stand your ground and fight, or the intruders will bring destruction to your village.",portraitId:"bandit",combat:{enemyForces:8,prepDelayMinTicks:3,prepDelayMaxTicks:5,onWin:{gold:25,fireRisk:12,authority:2},onLose:{gold:-30,farmers:-8,satisfaction:-5,authority:-4}},options:[{text:"FIGHT",effects:{fireRisk:10}},{text:"SURRENDER",effects:{gold:-20,satisfaction:-3,authority:-4}}]},{id:"EVT_MILITIA_PAY",title:"Soldier's Due",text:"The militia's morale is slipping. They are demanding their seasonal wages to continue their service to the crown.",portraitId:"military_advisor",options:[{text:"PAY",effects:{gold:-10}},{text:"REFUSE",effects:{landForces:-2,satisfaction:-4,authority:-2}}]},{id:"EVT_RESTLESS_NIGHT",title:"Whispers in the Dark",text:"Strange noises have been reported near the storage huts. Send a patrol to investigate, or dismiss it as simple superstition?",combat:{enemyForces:2,prepDelayMinTicks:3,prepDelayMaxTicks:5,onWin:{authority:1,satisfaction:2},onLose:{farmers:-5,satisfaction:-5,authority:-2}},portraitId:"military_advisor",options:[{text:"PATROL",effects:{}},{text:"IGNORE",effects:{farmers:-5,authority:-2}}]},{id:"EVT_VETERANS_LEAVE",title:"The Old Guard",text:"Your most experienced fighters are considering retirement. A small bonus might convince them to stay and train the new recruits.",portraitId:"military_advisor",options:[{text:"COMPENSATE",effects:{gold:-10,authority:1}},{text:"DO NOTHING",effects:{landForces:-2}}]},{id:"EVT_NEW_FARMERS",title:"Wandering Souls",text:"A group of sick travelers seeks land to till. They bring labor, but their makeshift camps pose a significant fire risk to the village.",portraitId:"farmer",options:[{text:"ALLOW",effects:{farmers:6,landForces:2,fireRisk:4,health:-2}},{text:"DECLINE",effects:{satisfaction:2}}]},{id:"EVT_EMIGRATION",title:"The Long Goodbye",text:"Dissatisfied with current conditions, several families are packing their wagons. Will you offer concessions to keep them?",portraitId:"farmer",options:[{text:"CONCEDE",effects:{gold:-15,satisfaction:2}},{text:"IGNORE",effects:{farmers:-7}}]},{id:"EVT_BIG_FAMILY",title:"A Growing House",text:"A local family struggles to feed their many children. They've come to you for a small charitable gift to get through the month.",portraitId:"farmer",options:[{text:"HELP",effects:{gold:-5,satisfaction:2}},{text:"DECLINE",effects:{satisfaction:-2}}]},{id:"EVT_HARVEST_HELPERS",title:"The Golden Fields",text:"The crops are ripening all at once. Hiring seasonal helpers could save the harvest before the rats can spread.",portraitId:"farmer",options:[{text:"HIRE",effects:{gold:-15,farmers:5}},{text:"DO NOTHING",effects:{health:-4}}]},{id:"EVT_CRISIS_UNREST",title:"Unrest Escalates",text:"Warning: Low Satisfaction! The people's anger has reached a breaking point. You must act now to appease the crowd or face a total revolt.",portraitId:"advisor",options:[{text:"CONCESSIONS",effects:{gold:-40,satisfaction:20,authority:-4}},{text:"CRACK DOWN",effects:{landForces:-5,farmers:-10,satisfaction:15,authority:2}}]},{id:"EVT_CRISIS_DISEASE",title:"The Pale Cough",text:"Warning: Low Health! Due to poor sanitary conditions, a sickness is spreading rapidly. We must fund a healer now before the population collapses.",portraitId:"advisor",options:[{text:"HIRE A HEALER",effects:{gold:-40,health:20}},{text:"SORT OUT THE SICK",effects:{farmers:-15,health:15}}]},{id:"EVT_FIRE_WATCH",title:"The High Tower",text:"An architect proposes a watchtower to spot fires early. It is a wise investment in the long-term safety of the settlement.",portraitId:"advisor",options:[{text:"BUILD",effects:{landForces:-1,fireRisk:-5}},{text:"DECLINE",effects:{}}]},{id:"EVT_VILLAGE_FESTIVAL",title:"Summer Solstice",text:"Organizing a grand festival with music and food would greatly strengthen the community's spirit.",portraitId:"advisor",options:[{text:"HOLD",effects:{gold:-10,satisfaction:4}},{text:"DECLINE",effects:{}}]},{id:"EVT_MEDICAL_HERBS",title:"The Traveling Apothecary",text:"A merchant offers a rare shipment of medicinal herbs. These could significantly boost the overall health of the village.",portraitId:"merchant",options:[{text:"BUY",effects:{gold:-15,health:5}},{text:"DECLINE",effects:{}}]},{id:"EVT_TRAIN_MILITIA",title:"Drill Practice",text:"A retired captain offers to drill your troops. This would make your defense forces much more formidable for future raids.",portraitId:"military_advisor",options:[{text:"TRAIN",effects:{gold:-15,landForces:5,authority:1}},{text:"DECLINE",effects:{}}]},{id:"EVT_CLEAN_STORAGE",title:"Spring Cleaning",text:"The granaries are cluttered with old straw and debris. A deep clean would reduce the risk of accidental fires.",portraitId:"advisor",options:[{text:"ORGANIZE",effects:{gold:-10,fireRisk:-4}},{text:"DECLINE",effects:{}}]},{id:"EVT_TAX_REFORM",title:"The Royal Ledger",text:"Balancing the books: Do you lower taxes to win favor, or raise them to fill the treasury for upcoming hardships?",portraitId:"advisor",options:[{text:"LOWER taxes",effects:{gold:-20,satisfaction:5,authority:-1}},{text:"RAISE taxes",effects:{gold:25,satisfaction:-8,authority:1}}]},{id:"EVT_FOREST_FIRE",title:"Smoke on the Horizon",text:"A nearby forest fire threatens the outskirts. If we don't send help to contain it, the winds may bring the disaster to our door.",portraitId:"advisor",options:[{text:"FIGHT THE FIRE",effects:{gold:-5,health:-2}},{text:"DO NOTHING",effects:{fireRisk:10}}]},{id:"EVT_PLAGUE",title:"The Black Flag",text:"A plague is ravaging the next town over. Should we enforce a strict, unpopular quarantine or hope the winds of fate are kind?",portraitId:"advisor",options:[{text:"QUARANTINE",effects:{satisfaction:-4}},{text:"IGNORE",effects:{health:-5}}]},{id:"EVT_THEFTS",title:"Sticky Fingers",text:"Marketplace thefts are on the rise. More guards would stop the loss of gold, but they are needed elsewhere for defense.",portraitId:"merchant",options:[{text:"MORE GUARDS",effects:{landForces:-2,authority:1}},{text:"DO NOTHING",effects:{gold:-15,authority:-1}}]},{id:"EVT_BAD_HARVEST",title:"The Blighted Crop",text:"An early frost has ruined the crops. The people are hungry  will the crown step in to provide compensation and food?",portraitId:"farmer",options:[{text:"COMPENSATE",effects:{gold:-15,health:1}},{text:"DO NOTHING",effects:{satisfaction:-4,farmers:-4}}]},{id:"EVT_FIREWOOD_WET",title:"Damp Spirits",text:"The firewood supply got soaked in a storm. We must buy replacements immediately or face a cold and dangerous winter.",portraitId:"advisor",options:[{text:"REPLACE",effects:{gold:-10,fireRisk:-2}},{text:"IGNORE",effects:{fireRisk:4,health:-3}}]},{id:"EVT_FARMERS_QUARREL",title:"The Fence Dispute",text:"Two farmers are quarreling over a boundary line. A moment of your time could settle this before it turns into a local feud.",portraitId:"farmer",options:[{text:"MEDIATE",effects:{gold:-10,satisfaction:1}},{text:"NOT MY PROBLEM",effects:{farmers:-4}}]},{id:"CHAIN_BLACKGEAT_START",title:"The Black March",text:'Brimwulf, envoy of the County of Wulfham, introduces himself: "The Sigilmark of Blackgeat is raising troops. Join forces with us - only together can we defeat them."',portraitId:"council_member",chainId:"BLACKGEAT",chainRole:"start",chainRestartCooldownTicks:100,options:[{text:"ALLY WITH WULFHAM",effects:{}},{text:"REFUSE",effects:{}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:3,delayMaxTicks:5,candidates:[{requestId:"CHAIN_BLACKGEAT_PREP_FELDRIC",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:3,delayMaxTicks:5,candidates:[{requestId:"CHAIN_BLACKGEAT_WULFHAM_FALLS",weight:3},{requestId:"CHAIN_BLACKGEAT_WULFHAM_TURNS",weight:2}]}]},{id:"CHAIN_BLACKGEAT_PREP_FELDRIC",chainId:"BLACKGEAT",chainRole:"member",portraitId:"military_advisor",title:"Feldric's Counsel",text:`Feldric your Marshal bows. "About Brimwulf's alliance request: if we accept, we need to ready our troops."`,canTriggerRandomly:!1,options:[{text:"UPGRADE ARMS",effects:{gold:-10,landForces:5}},{text:"MARCH NOW",effects:{}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:5,delayMaxTicks:8,candidates:[{requestId:"CHAIN_BLACKGEAT_PREP_FELDRIC",weight:2},{requestId:"CHAIN_BLACKGEAT_BATTLE_GRAYFORD",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:1,delayMaxTicks:2,candidates:[{requestId:"CHAIN_BLACKGEAT_BATTLE_GRAYFORD",weight:1}]}]},{id:"CHAIN_BLACKGEAT_BATTLE_GRAYFORD",chainId:"BLACKGEAT",chainRole:"member",title:"Battle at Aescweald",text:`Blackgeat's banners crest the ridge  the battle Brimwulf came to you for. Feldric's voice stays calm: "Hold. Then strike." Brimwulf's men lock shields beside yours.`,canTriggerRandomly:!1,combat:{enemyForces:7,prepDelayMinTicks:3,prepDelayMaxTicks:5,onWin:{satisfaction:2,authority:1},onLose:{satisfaction:-3,authority:-2},followUpsOnWin:[{triggerOnOptionIndex:0,delayMinTicks:3,delayMaxTicks:6,candidates:[{requestId:"CHAIN_BLACKGEAT_AFTER_BATTLE_STATE",weight:1}]}],followUpsOnLose:[{triggerOnOptionIndex:0,delayMinTicks:3,delayMaxTicks:6,candidates:[{requestId:"CHAIN_BLACKGEAT_AFTER_BATTLE_STATE",weight:1}]}]},portraitId:"military_advisor",options:[{text:"HOLD THE LINE",effects:{}},{text:"RETREAT NOW",effects:{satisfaction:-2,authority:-3}}]},{id:"CHAIN_BLACKGEAT_AFTER_BATTLE_STATE",chainId:"BLACKGEAT",chainRole:"member",title:"Aescweald Aftermath",text:"This is the aftermath of the Aescweald battle. Blackgeat pulls back in good order. Brimwulf watches the wounded, already thinking about what Wulfham can demand next.",canTriggerRandomly:!1,portraitId:"council_member",options:[{text:"TEND THE WOUNDED",effects:{health:4}},{text:"FORTIFY THE BORDER",effects:{landForces:5,gold:-10}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:5,delayMaxTicks:10,candidates:[{requestId:"CHAIN_BLACKGEAT_WULFHAM_LOYAL",weight:3},{requestId:"CHAIN_BLACKGEAT_WULFHAM_EXTORT_1",weight:2}]},{triggerOnOptionIndex:1,delayMinTicks:5,delayMaxTicks:10,candidates:[{requestId:"CHAIN_BLACKGEAT_WULFHAM_LOYAL",weight:3},{requestId:"CHAIN_BLACKGEAT_WULFHAM_EXTORT_1",weight:2}]}]},{id:"CHAIN_BLACKGEAT_WULFHAM_LOYAL",chainId:"BLACKGEAT",chainRole:"member",title:"Good Allies",text:'Brimwulf returns after the Battle of Aescweald. "Wulfham remembers who stood with us. We will not forget." Feldric mutters, "Blackgeat will come back  count on it."',canTriggerRandomly:!1,portraitId:"council_member",options:[{text:"RETURN HOME TRIUMPHANT",effects:{authority:3,satisfaction:3}},{text:"LOOT THE BATTLEFIELD",effects:{gold:25}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:6,delayMaxTicks:10,candidates:[{requestId:"CHAIN_BLACKGEAT_HRYCGWULF_OFFER",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:4,delayMaxTicks:8,candidates:[{requestId:"CHAIN_BLACKGEAT_HRYCGWULF_OFFER",weight:1}]}]},{id:"CHAIN_BLACKGEAT_HRYCGWULF_OFFER",chainId:"BLACKGEAT",chainRole:"member",title:"Hrycgwulf's Message",text:'Following the Aescweald battle, Hrycgwulf of Blackgeat arrives with a message. "You are capable. Pay a border tribute and we turn our army elsewhere." Feldric adds quietly, "This is their next move after Aescweald."',canTriggerRandomly:!1,portraitId:"council_member",options:[{text:"PAY FOR PIECE",effects:{gold:-15,authority:-2}},{text:"THROW HIM OUT",effects:{authority:1}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:4,delayMaxTicks:7,candidates:[{requestId:"CHAIN_BLACKGEAT_LOYAL_END",weight:3},{requestId:"CHAIN_BLACKGEAT_TRIBUTE_ESCALATE",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:4,delayMaxTicks:7,candidates:[{requestId:"CHAIN_BLACKGEAT_LOYAL_END",weight:1},{requestId:"CHAIN_BLACKGEAT_TRIBUTE_ESCALATE",weight:3}]}]},{id:"CHAIN_BLACKGEAT_TRIBUTE_ESCALATE",chainId:"BLACKGEAT",chainRole:"member",title:"The Second Demand",text:`This is the second demand after Hrycgwulf's first tribute request. Hrycgwulf stays polite. "Tribute is not punishment. It is safety." Feldric spits, "It's a leash."`,canTriggerRandomly:!1,portraitId:"council_member",options:[{text:"PAY AGAIN",effects:{gold:-15,authority:-2}},{text:"PREPARE FOR WAR",effects:{authority:1}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:6,delayMaxTicks:10,candidates:[{requestId:"CHAIN_BLACKGEAT_LOYAL_END",weight:2}]},{triggerOnOptionIndex:1,delayMinTicks:3,delayMaxTicks:5,candidates:[{requestId:"CHAIN_BLACKGEAT_TRIBUTE_BATTLE",weight:2}]}]},{id:"CHAIN_BLACKGEAT_LOYAL_END",chainId:"BLACKGEAT",chainRole:"end",title:"A Hard-Won Quiet",text:`After the tribute talks and threats, the border holdsfor now. Brimwulf's riders patrol beside yours. Feldric's last words: "This quiet came from the Blackgeat situation. It won't stay quiet forever."`,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"TEND TO THE WOUNDED",effects:{health:5}},{text:"SPEAK TO YOUR PEOPLE",effects:{satisfaction:5}}]},{id:"CHAIN_BLACKGEAT_TRIBUTE_BATTLE",chainId:"BLACKGEAT",chainRole:"member",title:"The Battle for Freedom",text:'Hrycgwulf grows impatient with your stalling. The Blackgeat banners appear on the horizon. Feldric draws his blade: "What shall we do, Mylord?"',canTriggerRandomly:!1,combat:{enemyForces:15,prepDelayMinTicks:5,prepDelayMaxTicks:8,onWin:{satisfaction:2,authority:2},onLose:{gold:-25,satisfaction:-3,authority:-3},followUpsOnWin:[{triggerOnOptionIndex:0,delayMinTicks:1,delayMaxTicks:1,candidates:[{requestId:"CHAIN_BLACKGEAT_FREEDOM_CELEBRATION",weight:1}]}],followUpsOnLose:[{triggerOnOptionIndex:0,delayMinTicks:1,delayMaxTicks:1,candidates:[{requestId:"CHAIN_BLACKGEAT_UNIVERSAL_RECOVERY",weight:1}]}]},portraitId:"military_advisor",options:[{text:"STAND YOUR GROUND",effects:{fireRisk:5}},{text:"PAY TRIBUTE",effects:{gold:-25,satisfaction:-5}}]},{id:"CHAIN_BLACKGEAT_FREEDOM_CELEBRATION",chainId:"BLACKGEAT",chainRole:"end",title:"Echoes of Liberty",text:'The Sigilmark Blackgeat has retreated! Against all odds, you held the line. Feldric raises a toast: "The land is ours once more, and our gold stays in our pockets. We are truly free."',canTriggerRandomly:!1,portraitId:"military_advisor",options:[{text:"HOLD A GRAND FEAST",effects:{satisfaction:6,health:4,authority:2}},{text:"REBUILD THE BORDER",effects:{gold:-10,landForces:8,fireRisk:-8,authority:2}}]},{id:"CHAIN_BLACKGEAT_UNIVERSAL_RECOVERY",chainId:"BLACKGEAT",chainRole:"end",title:"Picking Up the Pieces",text:"The shadow of Blackgeat finally recedes, leaving behind a weary but resilient village. The conflict is lost, but it is over now. It is time to look toward the future.",canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"FOCUS ON RECOVERY",effects:{health:4,satisfaction:3}},{text:"SALVAGE THE RUINS",effects:{gold:15,fireRisk:-5}}]},{id:"CHAIN_BLACKGEAT_WULFHAM_EXTORT_1",chainId:"BLACKGEAT",chainRole:"member",title:"The Bill Comes Due",text:`After the battle of Aescweald, Brimwulf's smile is thin. "Wulfham shed more blood than you. Compensation is expected." Feldric whispers, "This is the hook."`,canTriggerRandomly:!1,portraitId:"council_member",options:[{text:"PAY",effects:{gold:-15,authority:-1}},{text:"REFUSE",effects:{authority:1}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:4,delayMaxTicks:6,candidates:[{requestId:"CHAIN_BLACKGEAT_WULFHAM_EXTORT_2",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:4,delayMaxTicks:6,candidates:[{requestId:"CHAIN_BLACKGEAT_WULFHAM_SHOWDOWN",weight:1}]}]},{id:"CHAIN_BLACKGEAT_WULFHAM_EXTORT_2",chainId:"BLACKGEAT",chainRole:"member",title:"More, Always More",text:'Brimwulf returns again  this is the second payment demand since Aescweald. "The roads. The wagons. The widows. Pay again."',canTriggerRandomly:!1,portraitId:"council_member",options:[{text:"PAY",effects:{gold:-15,authority:-1}},{text:"REFUSE",effects:{authority:1}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:4,delayMaxTicks:6,candidates:[{requestId:"CHAIN_BLACKGEAT_WULFHAM_THREAT",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_BLACKGEAT_WULFHAM_SHOWDOWN",weight:1}]}]},{id:"CHAIN_BLACKGEAT_WULFHAM_THREAT",chainId:"BLACKGEAT",chainRole:"member",title:"The Threat",text:`Brimwulf stops pretending. "Coin, or Wulfham secures your lands permanently." Feldric says, "This started with Aescweald. Now it's extortion. Give me leave to prepare."`,canTriggerRandomly:!1,portraitId:"council_member",options:[{text:"PREPARE FOR WAR",effects:{farmers:-5,landForces:5}},{text:"PAY TO DELAY",effects:{gold:-15}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:5,delayMaxTicks:8,candidates:[{requestId:"CHAIN_BLACKGEAT_WULFHAM_SHOWDOWN",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:10,delayMaxTicks:12,candidates:[{requestId:"CHAIN_BLACKGEAT_WULFHAM_SHOWDOWN",weight:1}]}]},{id:"CHAIN_BLACKGEAT_WULFHAM_SHOWDOWN",chainId:"BLACKGEAT",chainRole:"member",title:"Showdown at the Border Stones",text:'Weeks after the battle of Aescweald, Feldric meets Brimwulf at the border stones. "One step further," Feldric says, "and we settle this in iron."',canTriggerRandomly:!1,portraitId:"military_advisor",options:[{text:"STAND FIRM",effects:{}},{text:"BACK DOWN",effects:{gold:-15,farmers:-5,authority:-3}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:5,delayMaxTicks:7,candidates:[{requestId:"CHAIN_BLACKGEAT_EXTORT_END_BATTLE",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:5,delayMaxTicks:7,candidates:[{requestId:"CHAIN_BLACKGEAT_EXTORT_END_TRIBUTE",weight:1}]}]},{id:"CHAIN_BLACKGEAT_EXTORT_END_BATTLE",chainId:"BLACKGEAT",chainRole:"end",title:"A Scar, Not a Grave",text:`Wulfham withdraws  you are victorious! Feldric's verdict: "You'll remember this every time an ally asks for 'help'."`,canTriggerRandomly:!1,portraitId:"military_advisor",options:[{text:"DEMAND GOLD",effects:{gold:30,satisfaction:1,authority:2}},{text:"DEMAND SWORDS",effects:{landForces:5,satisfaction:1,authority:2}}]},{id:"CHAIN_BLACKGEAT_EXTORT_END_TRIBUTE",chainId:"BLACKGEAT",chainRole:"end",title:"The Hollow Peace",text:`Brimwulf accepted your last payment as final. Wulfham's riders turn back toward their own borders. Feldric watches them go: "We have bought peace, but sold our pride."`,canTriggerRandomly:!1,portraitId:"council_member",options:[{text:"RECOVER",effects:{health:5}},{text:"REPAIR",effects:{fireRisk:-5}}]},{id:"CHAIN_BLACKGEAT_WULFHAM_FALLS",chainId:"BLACKGEAT",chainRole:"member",title:"Wulfham Overrun",text:`Because you refused Brimwulf's alliance request earlier, he returns in defeat. "Wulfham burns. Blackgeat's march turns toward you."`,canTriggerRandomly:!1,portraitId:"council_member",options:[{text:"SEND LATE AID",effects:{gold:-15,landForces:-6}},{text:"DO NOTHING",effects:{}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:5,delayMaxTicks:10,candidates:[{requestId:"CHAIN_BLACKGEAT_WAR_PREP_FELDRIC",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:5,delayMaxTicks:10,candidates:[{requestId:"CHAIN_BLACKGEAT_HRYCGWULF_THREAT",weight:1}]}]},{id:"CHAIN_BLACKGEAT_HRYCGWULF_THREAT",chainId:"BLACKGEAT",chainRole:"member",title:"The Blackgeat Envoy",text:`As consequence of Wulfham's defeat, Blackgeat's envoy Hrycgwulf arrives at your gates. "Submit, or be folded into Blackgeat." Feldric's hand rests on his sword.`,canTriggerRandomly:!1,portraitId:"council_member",options:[{text:"BOW and PAY",effects:{gold:-15,authority:-1}},{text:"RESIST and PREPARE",effects:{}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:8,delayMaxTicks:8,candidates:[{requestId:"CHAIN_BLACKGEAT_TRIBUTE_1",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:5,delayMaxTicks:8,candidates:[{requestId:"CHAIN_BLACKGEAT_WAR_PREP_FELDRIC",weight:1}]}]},{id:"CHAIN_BLACKGEAT_WULFHAM_TURNS",chainId:"BLACKGEAT",chainRole:"member",title:"Wulfham Turns",text:'After you refused Brimwulf earlier, news arrives: Wulfham has allied with Blackgeat and demand a tribute. Feldric says, "This is what refusal can create: two enemies instead of one."',canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"RESIST and PREPARE",effects:{}},{text:"BOW and PAY",effects:{gold:-15,authority:-1}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:5,delayMaxTicks:8,candidates:[{requestId:"CHAIN_BLACKGEAT_WAR_PREP_FELDRIC",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:8,delayMaxTicks:8,candidates:[{requestId:"CHAIN_BLACKGEAT_TRIBUTE_1",weight:1}]}]},{id:"CHAIN_BLACKGEAT_WAR_PREP_FELDRIC",chainId:"BLACKGEAT",chainRole:"member",portraitId:"military_advisor",title:"Feldric Prepares the Host",text:'Feldric your Marshall comes before you: "We need better preparation for the coming battle with Blackgeat."',canTriggerRandomly:!1,options:[{text:"RAISE THE HOST",effects:{landForces:4,farmers:-4,gold:-10}},{text:"MEET THEM NOW",effects:{}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:5,delayMaxTicks:8,candidates:[{requestId:"CHAIN_BLACKGEAT_WAR_PREP_FELDRIC",weight:2},{requestId:"CHAIN_BLACKGEAT_WAR_ROUND_1",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:1,delayMaxTicks:2,candidates:[{requestId:"CHAIN_BLACKGEAT_WAR_ROUND_1",weight:1}]}]},{id:"CHAIN_BLACKGEAT_WAR_ROUND_1",chainId:"BLACKGEAT",chainRole:"member",title:"First Clash",text:'The Blackgeat war begins. Their vanguard probes your line. Feldric: "They test for weakness. Show none."',canTriggerRandomly:!1,combat:{enemyForces:6,prepDelayMinTicks:3,prepDelayMaxTicks:5,onWin:{satisfaction:2,authority:2},onLose:{satisfaction:-3,authority:-3}},portraitId:"military_advisor",options:[{text:"HOLD",effects:{}},{text:"COUNTERSTRIKE",effects:{gold:10}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:5,delayMaxTicks:8,candidates:[{requestId:"CHAIN_BLACKGEAT_WAR_ROUND_2",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:5,delayMaxTicks:8,candidates:[{requestId:"CHAIN_BLACKGEAT_WAR_ROUND_2",weight:1}]}]},{id:"CHAIN_BLACKGEAT_WAR_ROUND_2",chainId:"BLACKGEAT",chainRole:"member",title:"Smoke and Discipline",text:'During the second war round against Blackgeat, they set brushfires to blind you. Feldric snarls: "They want panic."',canTriggerRandomly:!1,combat:{enemyForces:10,prepDelayMinTicks:3,prepDelayMaxTicks:5,onWin:{satisfaction:2,authority:2},onLose:{satisfaction:-2,authority:-2}},portraitId:"military_advisor",options:[{text:"PROTECT THE VILLAGE",effects:{fireRisk:-4,satisfaction:1}},{text:"PRESS THE LINE",effects:{farmers:-4,fireRisk:5}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:5,delayMaxTicks:8,candidates:[{requestId:"CHAIN_BLACKGEAT_WAR_ROUND_3",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:5,delayMaxTicks:8,candidates:[{requestId:"CHAIN_BLACKGEAT_WAR_ROUND_3",weight:1}]}]},{id:"CHAIN_BLACKGEAT_WAR_ROUND_3",chainId:"BLACKGEAT",chainRole:"member",title:"The Breaking Point",text:`This is the final showdown: Hrycgwulf commits Blackgeat's main force. Feldric: "This is it."`,canTriggerRandomly:!1,combat:{enemyForces:15,prepDelayMinTicks:3,prepDelayMaxTicks:5,onWin:{satisfaction:2,authority:2},onLose:{satisfaction:-3,authority:-3}},portraitId:"military_advisor",options:[{text:"ALL-IN STRIKE",effects:{gold:35,satisfaction:5}},{text:"WITHDRAW",effects:{satisfaction:-2,farmers:-5}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:5,delayMaxTicks:8,candidates:[{requestId:"CHAIN_BLACKGEAT_WAR_END_WIN",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:5,delayMaxTicks:8,candidates:[{requestId:"CHAIN_BLACKGEAT_WAR_END_HELP",weight:3},{requestId:"CHAIN_BLACKGEAT_WAR_END_HARD",weight:1}]}]},{id:"CHAIN_BLACKGEAT_WAR_END_WIN",chainId:"BLACKGEAT",chainRole:"end",title:"Blackgeat Recoils",text:'After three war rounds, Blackgeat pulls back and the war finally ends. Feldric wipes blood from his lip: "This is what resisting Blackgeat costsand what it buys."',canTriggerRandomly:!1,portraitId:"military_advisor",options:[{text:"SELL THE LOOT",effects:{gold:35,satisfaction:2,authority:1}},{text:"KEEP THE LOOT",effects:{landForces:5,satisfaction:2,authority:1}}]},{id:"CHAIN_BLACKGEAT_WAR_END_HELP",chainId:"BLACKGEAT",chainRole:"member",title:"Help from a Free Barony",text:`As the Blackgeat war drags on, riders from a neighboring free barony arrive at dusk: "We won't watch you fall."`,canTriggerRandomly:!1,portraitId:"council_member",options:[{text:"ACCEPT HELP",effects:{landForces:4}},{text:"ACCEPT AND PAY THEM",effects:{gold:-15,landForces:8}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_BLACKGEAT_WAR_END_STABLE",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_BLACKGEAT_WAR_END_STABLE",weight:1}]}]},{id:"CHAIN_BLACKGEAT_WAR_END_HARD",chainId:"BLACKGEAT",chainRole:"end",title:"A Bitter Retreat",text:`The Blackgeat war ends badly. You live, but they loot the village. Feldric's eyes are stone: "A bitter defeat! What should we do now?"`,canTriggerRandomly:!1,portraitId:"military_advisor",options:[{text:"SAFE TREASURY",effects:{gold:-15,farmers:-12,authority:-3}},{text:"SAFE YOUR PEOPLE ",effects:{gold:-35,farmers:-4,authority:-3}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_BLACKGEAT_UNIVERSAL_RECOVERY",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_BLACKGEAT_UNIVERSAL_RECOVERY",weight:1}]}]},{id:"CHAIN_BLACKGEAT_WAR_END_STABLE",chainId:"BLACKGEAT",chainRole:"end",title:"A Line Held",text:`A fierce last battle against Blackgeat ends well with the barony's help. Feldric nods once: "Next time Blackgeat comes, we'll be ready sooner."`,canTriggerRandomly:!1,portraitId:"military_advisor",options:[{text:"PURSUE THE FLEEING",effects:{landForces:-5,gold:30}},{text:"HOLD A FEAST",effects:{health:4,satisfaction:3}}]},{id:"CHAIN_BLACKGEAT_TRIBUTE_1",chainId:"BLACKGEAT",chainRole:"member",title:"Tribute I",text:`This tribute demand comes from Hrycgwulf's earlier ultimatum. His messenger waits: "The first payment." Feldric murmurs: "This is how Blackgeat turns a threat into routine."`,canTriggerRandomly:!1,portraitId:"council_member",options:[{text:"PAY",effects:{gold:-15,satisfaction:-1,authority:-1}},{text:"REFUSE AND ARM",effects:{}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:8,delayMaxTicks:8,candidates:[{requestId:"CHAIN_BLACKGEAT_TRIBUTE_2",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_BLACKGEAT_WAR_PREP_FELDRIC",weight:1}]}]},{id:"CHAIN_BLACKGEAT_TRIBUTE_2",chainId:"BLACKGEAT",chainRole:"member",title:"Tribute II",text:"The second tribute demand from Blackgeat arrives. Hrycgwulf repeats the terms, less polite this time.",canTriggerRandomly:!1,portraitId:"council_member",options:[{text:"PAY",effects:{gold:-15,satisfaction:-1,authority:-1}},{text:"REFUSE AND ARM",effects:{}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:8,delayMaxTicks:8,candidates:[{requestId:"CHAIN_BLACKGEAT_TRIBUTE_3",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_BLACKGEAT_WAR_PREP_FELDRIC",weight:1}]}]},{id:"CHAIN_BLACKGEAT_TRIBUTE_3",chainId:"BLACKGEAT",chainRole:"member",title:"Tribute III",text:"Hrycgwulf comes back with another tribute demand. The people notice the wagons leaving your gates and start whispering about submission.",canTriggerRandomly:!1,portraitId:"council_member",options:[{text:"PAY",effects:{gold:-15,satisfaction:-2,authority:-1}},{text:"REFUSE AND ARM",effects:{}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:8,delayMaxTicks:8,candidates:[{requestId:"CHAIN_BLACKGEAT_TRIBUTE_4",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_BLACKGEAT_WAR_PREP_FELDRIC",weight:1}]}]},{id:"CHAIN_BLACKGEAT_TRIBUTE_4",chainId:"BLACKGEAT",chainRole:"member",title:"Tribute IV",text:`Blackgeat's next tribute demand arrives with Hrycgwulf's personal seal. Feldric says, "They're making sure you remember who's in charge."`,canTriggerRandomly:!1,portraitId:"council_member",options:[{text:"PAY",effects:{gold:-15,satisfaction:-2,authority:-1}},{text:"REFUSE AND ARM",effects:{}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:8,delayMaxTicks:8,candidates:[{requestId:"CHAIN_BLACKGEAT_TRIBUTE_5",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_BLACKGEAT_WAR_PREP_FELDRIC",weight:1}]}]},{id:"CHAIN_BLACKGEAT_TRIBUTE_5",chainId:"BLACKGEAT",chainRole:"member",title:"Tribute V",text:`Another routine tribute demand from Blackgeat. Feldric says, "Paying five times teaches them you'll pay a sixth."`,canTriggerRandomly:!1,portraitId:"council_member",options:[{text:"PAY",effects:{gold:-15,satisfaction:-1,authority:-1}},{text:"REFUSE AND ARM",effects:{}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_BLACKGEAT_TRIBUTE_END",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_BLACKGEAT_WAR_PREP_FELDRIC",weight:1}]}]},{id:"CHAIN_BLACKGEAT_TRIBUTE_END",chainId:"BLACKGEAT",chainRole:"end",title:"A Bought Breath",text:'Hrycgwulf visits you one last time: "You paid for safety. Now you shall have peace". Feldric: "This peace seems temporary. For next time, we will prepare."',canTriggerRandomly:!1,portraitId:"council_member",options:[{text:"CELEBRATE PEACE",effects:{health:4,satisfaction:4}},{text:"START PREPARING",effects:{gold:-10,landForces:6}}]},{id:"EVENT_MARKET_DAY",title:"Market Day",text:"The marketplace is bustling with traders from distant lands. Will you focus on steady profits or take a riskier approach for greater gains?",portraitId:"merchant",requires:["building:marketplace"],options:[{text:"RISKY DEALS",effects:{},authorityCheck:{minCommit:0,maxCommit:25,onSuccess:{gold:25,satisfaction:2,authority:1},onFailure:{gold:-10,satisfaction:-3},refundOnSuccessPercent:100,extraLossOnFailure:2,minSuccessChance:25,maxSuccessChance:80}},{text:"STEADY TRADE",effects:{gold:10}}]},{id:"EVENT_TAVERN_AFTER_WORK",title:"After-Work at the Tavern",text:"After a long day of labor, the villagers gather at the tavern. Should you subsidize their drinks to boost morale, or let them enjoy at their own expense?",requires:["building:brewery"],portraitId:"farmer",options:[{text:"LET THEM PAY",effects:{satisfaction:2}},{text:"SUBSIDIZE DRINKS",effects:{satisfaction:5,gold:-10}}]},{id:"EVT_LOW_AUTHORITY",title:"Protection Money",text:"With your authority waning, a local mercenary demands protection money. Your weakened position makes this a difficult situation.",authorityMin:0,authorityMax:33,portraitId:"bandit",options:[{text:"PAY PROTECTION",effects:{gold:-10,authority:-1}},{text:"THROW HIM OUT",effects:{authority:1,landForces:-2}}]},{id:"EVT_LOW_GUARD_INSUBORDINATION",title:"Disrespectful Guards",text:"Your guards openly mock your orders. One even spits at your feet. Your weakened authority has emboldened them to disrespect you.",authorityMin:0,authorityMax:33,portraitId:"military_advisor",options:[{text:"PUNISH THEM",effects:{landForces:-2,authority:1}},{text:"IGNORE IT",effects:{authority:-2}}]},{id:"EVT_LOW_SABOTAGE",title:"Sabotage in the Night",text:"Someone has been stealing from the grain stores. Your lack of authority makes it impossible to maintain order or discover the culprit.",authorityMin:0,authorityMax:33,portraitId:"bandit",options:[{text:"FIND THE NASTY THIEVES",effects:{gold:-10,farmers:-2,authority:1}},{text:"ACCEPT THE LOSS",effects:{gold:-5,authority:-2}}]},{id:"EVT_LOW_PETITION_DENIED",title:"Petition Rejected",text:'The harvest was poor, so you petition the neighboring lord for aid, but are turned away at the gates. "We deal only with legitimate leaders," the guards say.',authorityMin:0,authorityMax:33,portraitId:"council_member",options:[{text:"BEG ON YOUR KNEES",effects:{gold:15,satisfaction:2,health:2,authority:-2}},{text:"LEAVE WITH DIGNITY",effects:{satisfaction:-2,health:-2}}]},{id:"EVT_LOW_DEBT_COLLECTOR",title:"The Debt Collector",text:"A ruthless debt collector arrives, sensing your weakness. He demands that you pay for debts of your poorest villagers - or else he'll take what he's owed by force.",authorityMin:0,authorityMax:33,portraitId:"merchant",options:[{text:"PAY THE DEBT",effects:{gold:-15,authority:-1,satisfaction:2}},{text:"PAY - HIM A VISIT!",effects:{landForces:-3,authority:2,satisfaction:2}}]},{id:"EVT_LOW_COUNCIL_REVOLT",title:"Council Challenge",text:'Your own council openly questions your decisions. "Perhaps we need new leadership," one elder suggests loudly.',portraitId:"council_member",authorityMin:0,authorityMax:33,options:[{text:"STAND FIRM",effects:{satisfaction:-4,authority:2}},{text:"BRIBE THEM",effects:{gold:-15,satisfaction:4}}]},{id:"EVT_LOW_BANDITS_MOCK",title:"Mocked by Bandits",text:"A band of thieves leaves mocking notes at your doorstep, daring you to stop them. They know you lack the authority to organize an effective response.",portraitId:"bandit",authorityMin:0,authorityMax:33,options:[{text:"IGNORE THEM",effects:{authority:-2}},{text:"HIRE MERCENARIES",effects:{gold:-10,authority:2}}]},{id:"EVT_LOW_FARMERS_LEAVE",title:"Mass Exodus",text:`A herbalist and her family threaten that they're leaving for a neighboring settlement with "real leadership."`,authorityMin:0,authorityMax:33,portraitId:"farmer",options:[{text:"BEG THEM TO STAY",effects:{gold:-10,authority:-1}},{text:"THROW THEM OUT",effects:{farmers:-4,health:-2,authority:1}}]},{id:"EVT_LOW_MERCHANT_EXTORTION",title:"Merchant Extortion",text:"A traveling merchant realizes your position is weak. He demands tusuae the usual prices for urgently needed healing potions, knowing you have very low leverage to refuse.",portraitId:"merchant",authorityMin:0,authorityMax:33,options:[{text:"PAY THE PRICE",effects:{gold:-20,health:5}},{text:"REFUSE TO BUY",effects:{health:-3,satisfaction:-2,authority:1}}]},{id:"EVT_LOW_AUTHORITY_CRISIS",title:"Crisis of Confidence",text:"Word spreads that you are unfit to lead. People whisper behind your back, and decisions are ignored. The settlement teeters on the edge of chaos.",authorityMin:0,authorityMax:33,portraitId:"advisor",options:[{text:"MAKE A GRAND GESTURE",effects:{gold:-15,satisfaction:4,authority:1}},{text:"WAIT IT OUT",effects:{satisfaction:-2,authority:-1}}]},{id:"EVT_MEDIUM_AUTHORITY",title:"Political Maneuver",text:"Your moderate influence allows you to negotiate a trade deal with a neighboring settlement.",authorityMin:34,authorityMax:66,portraitId:"merchant",options:[{text:"ACCEPT DEAL",effects:{gold:10,authority:1}},{text:"SELL ALL WINTER STOCKS",effects:{gold:40,satisfaction:-4,health:-4,farmers:-3}}]},{id:"EVT_COMMIT_LOW_DESPERATE_PLEA",title:"Desperate Negotiation",text:"A local merchant offers to help rebuild your reputation for a small fee.",portraitId:"merchant",authorityMin:0,authorityMax:33,options:[{text:"TAKE THE OFFER",effects:{gold:-5},authorityCheck:{minCommit:0,maxCommit:25,onSuccess:{satisfaction:4,authority:3},onFailure:{satisfaction:-5},successFeedbackRequestId:"INFO_LOW_PLEA_SUCCESS",failureFeedbackRequestId:"INFO_LOW_PLEA_FAILURE",refundOnSuccessPercent:100,extraLossOnFailure:5,minSuccessChance:40,maxSuccessChance:90}},{text:"DECLINE",effects:{}}]},{id:"EVT_COMMIT_LOW_GUARD_LOYALTY",title:"Wavering Guards",text:"Your guards whisper of desertion. You could attempt to rally them with what little authority you have left, or let them go.",authorityMin:0,authorityMax:33,portraitId:"military_advisor",options:[{text:"RALLY THEM",effects:{},authorityCheck:{minCommit:0,maxCommit:10,onSuccess:{landForces:3,authority:4},onFailure:{landForces:-2,satisfaction:-8},successFeedbackRequestId:"INFO_LOW_GUARD_SUCCESS",failureFeedbackRequestId:"INFO_LOW_GUARD_FAILURE",refundOnSuccessPercent:90,extraLossOnFailure:5,minSuccessChance:55,maxSuccessChance:90}},{text:"LET THEM LEAVE",effects:{landForces:-3,authority:-2}}]},{id:"EVT_COMMIT_LOW_VILLAGE_RESPECT",title:"Earning Respect",text:"The villagers doubt your leadership. You could make a bold stand to prove yourself worthy, but it requires mustering what authority you still possess.",authorityMin:0,authorityMax:33,portraitId:"advisor",options:[{text:"MAKE YOUR STAND",effects:{},authorityCheck:{minCommit:0,maxCommit:10,onSuccess:{satisfaction:12,authority:5,farmers:3},onFailure:{satisfaction:-10,farmers:-2},successFeedbackRequestId:"INFO_LOW_RESPECT_SUCCESS",failureFeedbackRequestId:"INFO_LOW_RESPECT_FAILURE",refundOnSuccessPercent:100,minSuccessChance:55,maxSuccessChance:90}},{text:"STAY QUIET",effects:{satisfaction:-5,authority:-1}}]},{id:"EVT_COMMIT_LOW_DEBT_NEGOTIATION",title:"Debt Relief",text:"Creditors circle like vultures. Hiring a lawyer to negotiate costs gold upfront. If you can muster enough authority, you might secure better terms. Otherwise, they will take everything.",authorityMin:0,authorityMax:33,portraitId:"advisor",options:[{text:"NEGOTIATE",effects:{gold:-5},authorityCheck:{minCommit:0,maxCommit:25,onSuccess:{gold:20,authority:1},onFailure:{gold:-15},successFeedbackRequestId:"INFO_LOW_DEBT_SUCCESS",failureFeedbackRequestId:"INFO_LOW_DEBT_FAILURE",refundOnSuccessPercent:100,extraLossOnFailure:2,minSuccessChance:30,maxSuccessChance:85}},{text:"PAY FULL PRICE",effects:{gold:-15,authority:-1}}]},{id:"EVT_HIGH_AUTHORITY",title:"Summit of Lords",text:"Your formidable authority grants you an invitation to the regional council. This is an opportunity to solidify your position among the elite.",authorityMin:67,authorityMax:100,portraitId:"council_member",options:[{text:"ATTEND SUMMIT",effects:{gold:25,authority:10,satisfaction:10}},{text:"SEND DELEGATE",effects:{gold:10,authority:3}}]},{id:"EVT_HIGH_RIVAL_CHALLENGE",title:"Rival Marken's Challenge",text:"Lord Heinrich of the neighboring Mark challenges your authority publicly, claiming your lands should be his. This affront cannot go unanswered.",authorityMin:67,authorityMax:100,portraitId:"council_member",options:[{text:"ACCEPT THE DUEL",effects:{authority:10,landForces:-5,gold:20,satisfaction:15}},{text:"DIPLOMATIC REBUKE",effects:{gold:15,authority:5,satisfaction:5}}]},{id:"EVT_HIGH_ALLIANCE_OFFER",title:"Alliance Proposal",text:"The Count of the Eastern Marches offers a formal alliance. With your strong reputation, this could open doors to greater power and wealth.",authorityMin:67,authorityMax:100,portraitId:"council_member",options:[{text:"ACCEPT ALLIANCE",effects:{gold:40,authority:15,landForces:10}},{text:"REMAIN INDEPENDENT",effects:{authority:5,satisfaction:10}}]},{id:"EVT_HIGH_ASSASSINATION_PLOT",title:"Assassination Uncovered",text:"Your spies uncover a plot against your life, orchestrated by jealous rivals. Your authority gives you the resources to respond decisively.",authorityMin:67,authorityMax:100,portraitId:"advisor",options:[{text:"STRIKE FIRST",effects:{gold:-20,authority:10,landForces:5,satisfaction:-5}},{text:"FORTIFY DEFENSES",effects:{gold:-15,authority:5,landForces:3}}]},{id:"EVT_HIGH_ROYAL_SUMMONS",title:"Royal Summons",text:"The King himself summons you to court, recognizing your authority. This is a rare honor that could elevate your status significantly.",authorityMin:67,authorityMax:100,portraitId:"council_member",options:[{text:"ATTEND WITH ENTOURAGE",effects:{gold:-30,authority:3}},{text:"ATTEND HUMBLY",effects:{gold:-10,authority:-1,satisfaction:4}}]},{id:"EVT_HIGH_BETRAYAL",title:"The Trusted Betrayer",text:"Your closest advisor and some guards have been secretly undermining you, selling information to your enemies. They offer you an 'incentive' to make it go away. How will you handle this betrayal?",authorityMin:67,authorityMax:100,portraitId:"advisor",options:[{text:"PUBLIC EXECUTION",effects:{authority:3,satisfaction:4,landForces:-5}},{text:"TAKE THE 'INCENTIVE'",effects:{gold:30,satisfaction:-5}}]},{id:"EVT_HIGH_TRIBUTE_DEMAND",title:"Tribute Demanded",text:"A weaker neighboring lord sends tribute, acknowledging your superior authority. This is the fruit of your strong leadership.",authorityMin:67,authorityMax:100,portraitId:"council_member",options:[{text:"ACCEPT TRIBUTE",effects:{gold:30,authority:2}},{text:"REFUSE GRACIOUSLY",effects:{satisfaction:4}}]},{id:"EVT_HIGH_POWER_PLAY",title:"Political Machinations",text:"You have the opportunity to eliminate a political rival through legal maneuvering. Your authority makes this possible, but the ethics are questionable.",authorityMin:67,authorityMax:100,portraitId:"council_member",options:[{text:"DESTROY RIVAL",effects:{gold:25,authority:3,satisfaction:-3}},{text:"SHOW MERCY",effects:{authority:-2,satisfaction:3}}]},{id:"EVT_HIGH_GRAND_TOURNAMENT",title:"The Grand Tournament",text:"You host a magnificent tournament that attracts nobles from across the realm. Your authority ensures this event will be remembered.",authorityMin:67,authorityMax:100,portraitId:"council_member",options:[{text:"LAVISH CELEBRATION",effects:{gold:-40,authority:5,satisfaction:6}},{text:"MODEST AFFAIR",effects:{gold:-15,authority:1,satisfaction:3}}]},{id:"EVT_HIGH_DIPLOMATIC_CRISIS",title:"Diplomatic Incident",text:"An insult from a foreign ambassador threatens war. Your authority gives you the standing to demand satisfaction or broker peace.",authorityMin:67,authorityMax:100,portraitId:"council_member",options:[{text:"DEMAND APOLOGY (AND COMPENSATION)",effects:{},authorityCheck:{minCommit:15,maxCommit:40,onSuccess:{authority:2,satisfaction:3,gold:20},onFailure:{},refundOnSuccessPercent:100,extraLossOnFailure:5,minSuccessChance:40,maxSuccessChance:85}},{text:"PREPARE FOR WAR",effects:{authority:1,landForces:5,gold:-25}}]},{id:"EVT_COMMIT_NEGOTIATE_TRADE",title:"Trade Negotiation",text:"A wealthy merchant guild seeks exclusive trading rights. You can leverage your authority to demand better terms, but failure could damage your reputation.",portraitId:"merchant",authorityMin:34,authorityMax:100,options:[{text:"NEGOTIATE HARD",effects:{},authorityCheck:{minCommit:0,maxCommit:40,onSuccess:{gold:30,authority:1},onFailure:{authority:-1},successFeedbackRequestId:"INFO_TRADE_SUCCESS",failureFeedbackRequestId:"INFO_TRADE_FAILURE",refundOnSuccessPercent:100,minSuccessChance:30,maxSuccessChance:85}},{text:"ACCEPT THEIR TERMS",effects:{gold:15,authority:-1}}]},{id:"EVT_COMMIT_QUELL_RIOT",title:"Brewing Riot",text:"Angry citizens gather in the square, demanding change. You can use your authority to calm them, but if you fail, violence may erupt.",authorityMin:34,authorityMax:100,portraitId:"advisor",options:[{text:"ADDRESS THE CROWD",effects:{},authorityCheck:{minCommit:0,maxCommit:25,onSuccess:{satisfaction:5,authority:2},onFailure:{satisfaction:-5,landForces:-3},successFeedbackRequestId:"INFO_RIOT_SUCCESS",failureFeedbackRequestId:"INFO_RIOT_FAILURE",refundOnSuccessPercent:100,extraLossOnFailure:5,minSuccessChance:25,maxSuccessChance:85}},{text:"SEND IN GUARDS",effects:{satisfaction:-5,landForces:-3,authority:3}}]},{id:"EVT_COMMIT_JUSTICE_DISPUTE",title:"Noble Dispute",text:"Two noble families feud over land rights. Your judgment will be final, but you need authority to make it stick.",authorityMin:34,authorityMax:100,portraitId:"council_member",options:[{text:"RENDER JUDGMENT",effects:{},authorityCheck:{minCommit:0,maxCommit:20,onSuccess:{satisfaction:5},onFailure:{satisfaction:-5},successFeedbackRequestId:"INFO_JUSTICE_SUCCESS",failureFeedbackRequestId:"INFO_JUSTICE_FAILURE",refundOnSuccessPercent:100,extraLossOnFailure:8,minSuccessChance:55,maxSuccessChance:90}},{text:"DEFER TO COUNCIL",effects:{authority:-1,satisfaction:2}}]},{id:"EVT_COMMIT_MILITARY_REFORM",title:"Military Reorganization",text:"Your military structure is outdated. Reforming it requires authority to overcome resistance from traditional commanders.",portraitId:"military_advisor",authorityMin:34,authorityMax:100,options:[{text:"FORCE REFORMS",effects:{},authorityCheck:{minCommit:10,maxCommit:30,onSuccess:{landForces:10,authority:3},onFailure:{landForces:-5,satisfaction:-3},successFeedbackRequestId:"INFO_REFORM_SUCCESS",failureFeedbackRequestId:"INFO_REFORM_FAILURE",refundOnSuccessPercent:100,extraLossOnFailure:4,minSuccessChance:50,maxSuccessChance:85}},{text:"GRADUAL CHANGE",effects:{landForces:3,gold:-15}}]},{id:"EVT_COMMIT_BANDIT_PARLEY",title:"Bandit Negotiation",text:"A bandit chief offers to serve you instead of raiding. This requires enough authority to command their respect and loyalty.",portraitId:"bandit",authorityMin:34,authorityMax:100,options:[{text:"RECRUIT THEM",effects:{},authorityCheck:{minCommit:5,maxCommit:25,onSuccess:{landForces:6,authority:2},onFailure:{gold:-20,fireRisk:5},successFeedbackRequestId:"INFO_BANDIT_SUCCESS",failureFeedbackRequestId:"INFO_BANDIT_FAILURE",refundOnSuccessPercent:100,extraLossOnFailure:0,minSuccessChance:50,maxSuccessChance:85}},{text:"REFUSE THEM",effects:{authority:-2,satisfaction:5}}]},{id:"EVT_COMMIT_TAX_REFORM",title:"Tax Collection Reform",text:"The tax system is corrupt and inefficient. Overhauling it requires authority to force compliance from entrenched interests.",authorityMin:34,authorityMax:100,portraitId:"advisor",options:[{text:"IMPLEMENT REFORM",effects:{},authorityCheck:{minCommit:0,maxCommit:40,onSuccess:{gold:30},onFailure:{gold:-10,satisfaction:-5},successFeedbackRequestId:"INFO_TAX_SUCCESS",failureFeedbackRequestId:"INFO_TAX_FAILURE",refundOnSuccessPercent:100,extraLossOnFailure:3,minSuccessChance:25,maxSuccessChance:85}},{text:"KEEP STATUS QUO",effects:{gold:5,authority:-3}}]},{id:"EVT_COMMIT_RELIGIOUS_DISPUTE",title:"Religious Controversy",text:"A religious dispute threatens to divide your people. Only strong authority can unite them under a single decision.",authorityMin:34,authorityMax:100,portraitId:"advisor",options:[{text:"MAKE A DECREE",effects:{},authorityCheck:{minCommit:10,maxCommit:30,onSuccess:{satisfaction:5,authority:2},onFailure:{satisfaction:-5,farmers:-5},successFeedbackRequestId:"INFO_RELIGIOUS_SUCCESS",failureFeedbackRequestId:"INFO_RELIGIOUS_FAILURE",refundOnSuccessPercent:100,extraLossOnFailure:0,minSuccessChance:50,maxSuccessChance:85}},{text:"ALLOW PLURALISM",effects:{satisfaction:2,authority:-2}}]},{id:"EVT_COMMIT_BORDER_CLAIM",title:"Border Dispute",text:"Contested lands lie between your territory and a neighbor's. Assert your claim with authority, or concede the ground.",authorityMin:34,authorityMax:100,portraitId:"advisor",options:[{text:"ASSERT CLAIM",effects:{},authorityCheck:{minCommit:15,maxCommit:25,onSuccess:{farmers:5,gold:25,authority:2},onFailure:{landForces:-6,satisfaction:-5},successFeedbackRequestId:"INFO_BORDER_SUCCESS",failureFeedbackRequestId:"INFO_BORDER_FAILURE",refundOnSuccessPercent:90,extraLossOnFailure:10,minSuccessChance:50,maxSuccessChance:80}},{text:"CONCEDE LANDS",effects:{authority:-1,satisfaction:-2}}]},{id:"EVT_COMMIT_CORRUPT_OFFICIAL",title:"Corruption Exposed",text:"A powerful official is caught embezzling. Punishing them requires authority and investment, as they have many allies.",authorityMin:34,authorityMax:100,portraitId:"advisor",options:[{text:"PROSECUTE FULLY",effects:{gold:-10},authorityCheck:{minCommit:5,maxCommit:20,onSuccess:{gold:25,satisfaction:4,authority:2},onFailure:{gold:-15,satisfaction:-3,landForces:-3},successFeedbackRequestId:"INFO_CORRUPT_SUCCESS",failureFeedbackRequestId:"INFO_CORRUPT_FAILURE",refundOnSuccessPercent:100,extraLossOnFailure:10,minSuccessChance:40,maxSuccessChance:85}},{text:"QUIET DISMISSAL",effects:{authority:-2}}]},{id:"EVT_COMMIT_SUCCESSION_CRISIS",title:"Succession Crisis",text:"A neighboring lord dies without clear heir. Several claimants seek your backing. Your choice requires authority to enforce.",authorityMin:34,authorityMax:100,portraitId:"council_member",options:[{text:"BACK A CLAIMANT",effects:{},authorityCheck:{minCommit:10,maxCommit:40,onSuccess:{gold:40,landForces:5,authority:2},onFailure:{gold:-20,landForces:-3,satisfaction:-3},successFeedbackRequestId:"INFO_SUCCESSION_SUCCESS",failureFeedbackRequestId:"INFO_SUCCESSION_FAILURE",refundOnSuccessPercent:80,extraLossOnFailure:0,minSuccessChance:50,maxSuccessChance:80}},{text:"STAY NEUTRAL",effects:{authority:-2}}]},{id:"EVT_COMMIT_GUILD_RIVALRY",title:"Guild Power Struggle",text:"Two merchant guilds vie for dominance. Choosing a winner requires authority to make your decision final.",portraitId:"merchant",authorityMin:34,authorityMax:100,options:[{text:"BACK ONE GUILD",effects:{},authorityCheck:{minCommit:5,maxCommit:20,onSuccess:{gold:30,satisfaction:3},onFailure:{gold:-20,satisfaction:-3},successFeedbackRequestId:"INFO_GUILD_SUCCESS",failureFeedbackRequestId:"INFO_GUILD_FAILURE",refundOnSuccessPercent:100,extraLossOnFailure:0,minSuccessChance:55,maxSuccessChance:85}},{text:"FORCE COMPROMISE",effects:{gold:10,authority:-1}}]},{id:"EVT_COMMIT_FOREIGN_ENVOY",title:"Foreign Envoy",text:"An envoy from a distant kingdom offers trade and alliance, but demands concessions. Your authority determines the terms.",authorityMin:34,authorityMax:100,portraitId:"council_member",options:[{text:"DEMAND EQUALITY",effects:{},authorityCheck:{minCommit:0,maxCommit:40,onSuccess:{gold:25,authority:1},onFailure:{authority:-2,satisfaction:-3},successFeedbackRequestId:"INFO_ENVOY_SUCCESS",failureFeedbackRequestId:"INFO_ENVOY_FAILURE",refundOnSuccessPercent:100,minSuccessChance:45,maxSuccessChance:85}},{text:"ACCEPT THEIR TERMS",effects:{gold:10,authority:-1}}]},{id:"EVT_COMMIT_LAND_DISTRIBUTION",title:"Land Redistribution",text:"The poor demand land reform. Redistributing land from wealthy nobles requires immense authority to overcome their resistance.",authorityMin:34,authorityMax:100,portraitId:"advisor",options:[{text:"REDISTRIBUTE LAND",effects:{},authorityCheck:{minCommit:10,maxCommit:40,onSuccess:{farmers:5,satisfaction:5,authority:2},onFailure:{satisfaction:-3,gold:-25,farmers:-5},successFeedbackRequestId:"INFO_LAND_SUCCESS",failureFeedbackRequestId:"INFO_LAND_FAILURE",refundOnSuccessPercent:100,extraLossOnFailure:0,minSuccessChance:45,maxSuccessChance:85}},{text:"MAINTAIN STATUS QUO",effects:{satisfaction:-3}}]},{id:"EVT_COMMIT_CHALLENGE_TRADITION",title:"Ancient Tradition",text:"An archaic tradition harms your people, but it's deeply revered. Only strong authority can change it without causing upheaval.",authorityMin:34,authorityMax:100,portraitId:"advisor",options:[{text:"ABOLISH TRADITION",effects:{},authorityCheck:{minCommit:5,maxCommit:20,onSuccess:{health:6},onFailure:{satisfaction:-5},successFeedbackRequestId:"INFO_TRADITION_SUCCESS",failureFeedbackRequestId:"INFO_TRADITION_FAILURE",refundOnSuccessPercent:100,extraLossOnFailure:0,minSuccessChance:55,maxSuccessChance:85}},{text:"RESPECT TRADITION",effects:{satisfaction:3,health:-5}}]},{id:"EVT_COMMIT_PIRATE_ALLIANCE",title:"River Pirates",text:"Pirates control the river trade. You can attempt to recruit them as privateers, but it requires authority they will respect.",portraitId:"bandit",authorityMin:34,authorityMax:100,options:[{text:"RECRUIT PIRATES",effects:{},authorityCheck:{minCommit:5,maxCommit:25,onSuccess:{landForces:6},onFailure:{},successFeedbackRequestId:"INFO_PIRATE_SUCCESS",failureFeedbackRequestId:"INFO_PIRATE_FAILURE",refundOnSuccessPercent:100,extraLossOnFailure:5,minSuccessChance:25,maxSuccessChance:80}},{text:"IGNORE THEM",effects:{}}]},{id:"EVT_COMMIT_MARRIAGE_ALLIANCE",title:"Political Marriage",text:"A powerful family offers a rather unbalanced marriage alliance. Securing favorable terms requires authority to negotiate from strength.",authorityMin:34,authorityMax:100,portraitId:"council_member",options:[{text:"NEGOTIATE TERMS",effects:{},authorityCheck:{minCommit:15,maxCommit:50,onSuccess:{gold:45,landForces:5},onFailure:{gold:-30,satisfaction:-5},successFeedbackRequestId:"INFO_MARRIAGE_SUCCESS",failureFeedbackRequestId:"INFO_MARRIAGE_FAILURE",refundOnSuccessPercent:90,extraLossOnFailure:0,minSuccessChance:40,maxSuccessChance:85}},{text:"ACCEPT AS OFFERED",effects:{gold:15,authority:-3}}]},{id:"EVT_EGO_HUMBLE_PEASANT",title:"The Wise Peasant",text:"An elderly peasant offers unsolicited advice on governance. He speaks wisely, but addressing you as an equal. Do you listen humbly or assert your station?",portraitId:"farmer",options:[{text:"LISTEN HUMBLY",effects:{authority:-1,satisfaction:3,gold:10}},{text:"PUT HIM IN HIS PLACE",effects:{authority:2,satisfaction:-3}}]},{id:"EVT_EGO_PUBLIC_CRITICISM",title:"Public Criticism",text:"A popular merchant loudly criticizes your recent decisions in the town square. Others are watching to see how you respond.",portraitId:"merchant",options:[{text:"LAUGH IT OFF",effects:{authority:-1,satisfaction:3}},{text:"ARREST HIM",effects:{authority:2,satisfaction:-5}}]},{id:"EVT_EGO_MINOR_SLIGHT",title:"Minor Disrespect",text:"A guard forgets to bow when you pass. It's a small oversight, but others notice. How do you react?",portraitId:"advisor",options:[{text:"IGNORE IT",effects:{authority:-1,satisfaction:3}},{text:"PUNISH SEVERELY",effects:{authority:2,satisfaction:-5,landForces:-1}}]},{id:"EVT_EGO_FLATTERY",title:"Obvious Flattery",text:'A courtier praises you with absurd exaggerations, calling you "the greatest leader ever to walk the earth."',portraitId:"advisor",options:[{text:"ENJOY THE PRAISE",effects:{authority:2,satisfaction:-5}},{text:"CALL OUT THE LIE",effects:{authority:-2,satisfaction:3}}]},{id:"EVT_EGO_ADMIT_MISTAKE",title:"Public Mistake",text:"You made an error in judgment that cost the village resources. Do you admit fault publicly or deflect blame?",portraitId:"advisor",options:[{text:"ADMIT FAULT",effects:{authority:-2,satisfaction:5,gold:-10}},{text:"BLAME OTHERS",effects:{authority:2,satisfaction:-5}}]},{id:"EVT_EGO_RIVAL_SUCCESS",title:"Rival's Success",text:"A rival leader achieves great success. Your advisors suggest you might publicly congratulate him to show grace, but it would acknowledge their superiority.",portraitId:"advisor",options:[{text:"CONGRATULATE HIM HUMBLY",effects:{authority:-2,gold:10}},{text:"DENOUNCE HIM",effects:{authority:2,satisfaction:-4}}]},{id:"EVT_EGO_GRAND_TITLE",title:"Grandiose Title",text:`A sycophant suggests you adopt a grandiose new title: "His Magnificence, Supreme Protector of the Realm." It's ridiculous but flattering.`,portraitId:"advisor",options:[{text:"ACCEPT THE TITLE",effects:{authority:2,satisfaction:-4}},{text:"REFUSE HUMBLY",effects:{authority:-2,satisfaction:4}}]},{id:"EVT_EGO_SERVANT_COMPLAINT",title:"Servant's Complaint",text:"A servant complains that you've been unfair. The grievance is legitimate, but admitting it would show weakness.",portraitId:"advisor",options:[{text:"MAKE IT RIGHT",effects:{authority:-1,satisfaction:3,gold:-5}},{text:"DISMISS THE SERVANT",effects:{authority:2,satisfaction:-4}}]},{id:"EVT_EGO_LAVISH_FEAST",title:"Lavish Feast",text:"You could throw a lavish feast to demonstrate your wealth and power, but the expense would be enormous and the people are struggling.",portraitId:"advisor",options:[{text:"THROW THE FEAST",effects:{gold:-30,authority:4,satisfaction:-3}},{text:"MODEST CELEBRATION",effects:{gold:-10,satisfaction:3}}]},{id:"EVT_EGO_EXPERT_ADVICE",title:"Expert's Warning",text:"An expert warns that your plan is flawed. Accepting their advice would mean admitting you were wrong before the council.",portraitId:"advisor",options:[{text:"HEED THE WARNING",effects:{authority:-2,gold:15}},{text:"PROCEED AS PLANNED",effects:{authority:2,gold:-15,satisfaction:-2}}]},{id:"EVT_EGO_STATUE",title:"Monument to Yourself",text:"Advisors suggest erecting a statue in your honor. It would immortalize your legacy, but the cost is steep and the optics questionable.",portraitId:"advisor",options:[{text:"BUILD THE STATUE",effects:{gold:-25,authority:4,satisfaction:-3}},{text:"DECLINE",effects:{}}]},{id:"EVT_EGO_OVERREACTION",title:"Petty Theft",text:"Someone stole a chicken from your personal coop. It's a trivial loss, but some advisors suggest making an example.",portraitId:"advisor",options:[{text:"HARSH PUNISHMENT",effects:{authority:2,farmers:-1,satisfaction:-3}},{text:"IGNORE IT",effects:{authority:-1}}]},{id:"EVT_MYSTERIOUS_TRAVELER_ENHANCED",title:"Mysterious Traveler",text:"A hooded stranger arrives at your gates, asking for shelter. He seems educated but evasive about his past.",canTriggerRandomly:!0,authorityMin:20,authorityMax:100,portraitId:"advisor",options:[{text:"INVITE HIM",effects:{gold:-5},authorityCheck:{minCommit:0,maxCommit:10,followUpBoosts:[{targetRequestId:"EVT_TRAVELER_TEACHES",boostType:"linear",boostValue:4,description:"Increases chance traveler shares knowledge"}]}},{text:"SEND AWAY",effects:{}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"EVT_TRAVELER_TEACHES",weight:2},{requestId:"EVT_TRAVELER_BETRAYS",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:3,delayMaxTicks:5,candidates:[{requestId:"EVT_TRAVELER_CURSE",weight:2},{requestId:"EVT_TRAVELER_RETURNS",weight:1}]}]},{id:"EVT_TRAVELER_TEACHES",title:"Grateful Teacher",text:"The traveler reveals he is a scholar fleeing persecution. In gratitude for your hospitality, he offers to teach your citizens advanced techniques.",canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"ACCEPT HIS TEACHINGS",effects:{health:5,authority:2}},{text:"POLITELY DECLINE",effects:{}}]},{id:"EVT_TRAVELER_BETRAYS",title:"Saboteur Revealed",text:"The traveler was actually a spy! He has stolen valuable information and fled, leaving chaos in his wake.",canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"DAMAGE CONTROL",effects:{gold:-20,authority:-2}},{text:"ACCEPT THE LOSS",effects:{gold:-15,authority:-2,satisfaction:-2}}]},{id:"EVT_TRAVELER_CURSE",title:"Vengeful Wanderer",text:"The rejected traveler curses your village as he leaves. Strange misfortunes begin to occur.",canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"SEEK REMEDY",effects:{gold:-15,health:-3}},{text:"IGNORE SUPERSTITION",effects:{satisfaction:-4,health:-3}}]},{id:"EVT_TRAVELER_RETURNS",title:"Second Chance",text:"The traveler returns months later, having found success elsewhere. He remembers your rejection but is willing to forgive.",canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"APOLOGIZE",effects:{satisfaction:3}},{text:"MAINTAIN POSITION",effects:{authority:2}}]},{id:"CHAIN_BANDIT_TOLL_START",chainId:"bandit_toll",chainRole:"start",chainRestartCooldownTicks:80,maxTriggers:3,portraitId:"bandit",title:"Blocked Road",text:'A band of armed men has set up a barricade across the only trade road. Their leader steps forward: "Toll is ten gold per cart. Pay or fight."',options:[{text:"FIGHT THEM",effects:{}},{text:"PAY THE TOLL",effects:{gold:-10,authority:-1}}],combat:{enemyForces:5,prepDelayMinTicks:2,prepDelayMaxTicks:4,onWin:{gold:15,authority:2},onLose:{gold:-5,satisfaction:-3,authority:-2},followUpsOnWin:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_BANDIT_TOLL_LOOT",weight:3},{requestId:"CHAIN_BANDIT_TOLL_SURVIVOR",weight:2}]}],followUpsOnLose:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_BANDIT_TOLL_REGROUP",weight:1}]}]},followUps:[{triggerOnOptionIndex:1,delayMinTicks:4,delayMaxTicks:8,candidates:[{requestId:"CHAIN_BANDIT_TOLL_RETURN",weight:3},{requestId:"CHAIN_BANDIT_TOLL_END_PEACE",weight:1}]}]},{id:"CHAIN_BANDIT_TOLL_LOOT",chainId:"bandit_toll",chainRole:"member",canTriggerRandomly:!1,title:"Spoils of Battle",text:"The bandits are routed. Among their belongings your soldiers find stolen trade goods and a rough map of their hideout.",portraitId:"military_advisor",options:[{text:"RAID THE HIDEOUT",effects:{gold:20,landForces:-2}},{text:"BURN THE MAP",effects:{satisfaction:3}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:3,delayMaxTicks:5,candidates:[{requestId:"CHAIN_BANDIT_TOLL_END_VICTORY",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:3,delayMaxTicks:5,candidates:[{requestId:"CHAIN_BANDIT_TOLL_END_PEACE",weight:1}]}]},{id:"CHAIN_BANDIT_TOLL_SURVIVOR",chainId:"bandit_toll",chainRole:"member",canTriggerRandomly:!1,portraitId:"bandit",title:"A Bandit Speaks",text:"One of the bandits survived. He offers information about a larger gang in exchange for his life.",options:[{text:"SPARE HIM",effects:{authority:-1,satisfaction:2}},{text:"EXECUTE HIM",effects:{authority:1,satisfaction:-2}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:4,delayMaxTicks:6,candidates:[{requestId:"CHAIN_BANDIT_TOLL_END_PEACE",weight:2},{requestId:"CHAIN_BANDIT_TOLL_END_VICTORY",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:3,delayMaxTicks:5,candidates:[{requestId:"CHAIN_BANDIT_TOLL_END_VICTORY",weight:1}]}]},{id:"CHAIN_BANDIT_TOLL_REGROUP",chainId:"bandit_toll",chainRole:"member",canTriggerRandomly:!1,title:"Licking Wounds",text:"The bandits defeated your men but did not press the attack. Feldric advises rebuilding strength before they return.",portraitId:"military_advisor",options:[{text:"RECRUIT MORE",effects:{gold:-10,landForces:4}},{text:"NEGOTIATE PEACE",effects:{gold:-15,authority:-2}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:5,delayMaxTicks:8,candidates:[{requestId:"CHAIN_BANDIT_TOLL_RETURN",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:3,delayMaxTicks:5,candidates:[{requestId:"CHAIN_BANDIT_TOLL_END_PEACE",weight:1}]}]},{id:"CHAIN_BANDIT_TOLL_RETURN",chainId:"bandit_toll",chainRole:"member",canTriggerRandomly:!1,portraitId:"bandit",title:"They Are Back",text:"The bandits have returned with reinforcements. This time they demand double the toll or blood.",options:[{text:"FIGHT AGAIN",effects:{}},{text:"PAY DOUBLE",effects:{gold:-20,authority:-2}}],combat:{enemyForces:8,prepDelayMinTicks:2,prepDelayMaxTicks:3,onWin:{gold:25,authority:3,satisfaction:3},onLose:{gold:-15,satisfaction:-5,authority:-3},followUpsOnWin:[{triggerOnOptionIndex:0,delayMinTicks:1,delayMaxTicks:2,candidates:[{requestId:"CHAIN_BANDIT_TOLL_END_VICTORY",weight:1}]}],followUpsOnLose:[{triggerOnOptionIndex:0,delayMinTicks:1,delayMaxTicks:2,candidates:[{requestId:"CHAIN_BANDIT_TOLL_END_DEFEAT",weight:1}]}]},followUps:[{triggerOnOptionIndex:1,delayMinTicks:3,delayMaxTicks:5,candidates:[{requestId:"CHAIN_BANDIT_TOLL_END_PEACE",weight:1}]}]},{id:"CHAIN_BANDIT_TOLL_END_VICTORY",chainId:"bandit_toll",chainRole:"end",canTriggerRandomly:!1,title:"Road Secured",text:"The trade road is clear at last. Merchants return, and the village prospers from renewed commerce.",portraitId:"merchant",options:[{text:"CELEBRATE",effects:{satisfaction:5,gold:10}},{text:"FORTIFY THE ROAD",effects:{gold:-10,landForces:3}}]},{id:"CHAIN_BANDIT_TOLL_END_PEACE",chainId:"bandit_toll",chainRole:"end",canTriggerRandomly:!1,title:"Uneasy Truce",text:"The bandits move on to easier prey. The road reopens, though travelers remain wary.",portraitId:"advisor",options:[{text:"POST GUARDS",effects:{landForces:-1,satisfaction:3}},{text:"MOVE ON",effects:{satisfaction:1}}]},{id:"CHAIN_BANDIT_TOLL_END_DEFEAT",chainId:"bandit_toll",chainRole:"end",canTriggerRandomly:!1,title:"A Costly Lesson",text:"The bandits control the road now. Trade slows to a trickle and your people grow restless.",portraitId:"bandit",options:[{text:"SEEK ALLIES",effects:{gold:-5,authority:1}},{text:"ENDURE",effects:{satisfaction:-5}}]},{id:"CHAIN_MERCHANT_GUILD_START",chainId:"merchant_guild",chainRole:"start",chainRestartCooldownTicks:60,requires:["building:marketplace"],portraitId:"merchant",title:"Guild Proposal",text:"A delegation of merchants arrives at the marketplace. They propose forming a guild to regulate trade and share profits  for a founding fee.",options:[{text:"ACCEPT",effects:{gold:-15}},{text:"REJECT",effects:{}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:3,delayMaxTicks:6,candidates:[{requestId:"CHAIN_MERCHANT_GUILD_PROSPEROUS",weight:3},{requestId:"CHAIN_MERCHANT_GUILD_CORRUPT",weight:2}]},{triggerOnOptionIndex:1,delayMinTicks:5,delayMaxTicks:8,candidates:[{requestId:"CHAIN_MERCHANT_GUILD_SMUGGLERS",weight:1}]}]},{id:"CHAIN_MERCHANT_GUILD_PROSPEROUS",chainId:"merchant_guild",chainRole:"member",canTriggerRandomly:!1,portraitId:"merchant",title:"Thriving Commerce",text:"The guild is running smoothly. Goods flow, prices stabilize, and the treasury benefits. The guild master asks to expand operations.",options:[{text:"EXPAND",effects:{gold:-15}},{text:"KEEP CURRENT SIZE",effects:{}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:4,delayMaxTicks:7,candidates:[{requestId:"CHAIN_MERCHANT_GUILD_END_WEALTH",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:4,delayMaxTicks:7,candidates:[{requestId:"CHAIN_MERCHANT_GUILD_END_STABLE",weight:1}]}]},{id:"CHAIN_MERCHANT_GUILD_CORRUPT",chainId:"merchant_guild",chainRole:"member",canTriggerRandomly:!1,portraitId:"merchant",title:"Shady Dealings",text:"Reports surface that guild members are price-fixing and skimming profits. The guild master denies it flatly.",options:[{text:"INVESTIGATE",effects:{gold:-10,authority:1}},{text:"TURN A BLIND EYE",effects:{satisfaction:-3}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:3,delayMaxTicks:5,candidates:[{requestId:"CHAIN_MERCHANT_GUILD_END_REFORM",weight:2},{requestId:"CHAIN_MERCHANT_GUILD_END_STABLE",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:4,delayMaxTicks:6,candidates:[{requestId:"CHAIN_MERCHANT_GUILD_END_STABLE",weight:1}]}]},{id:"CHAIN_MERCHANT_GUILD_SMUGGLERS",chainId:"merchant_guild",chainRole:"member",canTriggerRandomly:!1,title:"Black Market",text:"Without a guild, smugglers fill the void. Cheap goods appear but quality is terrible and crime rises.",portraitId:"bandit",options:[{text:"CRACK DOWN",effects:{landForces:-3,authority:1}},{text:"TOLERATE IT",effects:{health:-2,satisfaction:-2}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:3,delayMaxTicks:5,candidates:[{requestId:"CHAIN_MERCHANT_GUILD_END_REFORM",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:3,delayMaxTicks:5,candidates:[{requestId:"CHAIN_MERCHANT_GUILD_END_STABLE",weight:1}]}]},{id:"CHAIN_MERCHANT_GUILD_END_WEALTH",chainId:"merchant_guild",chainRole:"end",canTriggerRandomly:!1,title:"Golden Age of Trade",text:"The expanded guild brings prosperity. Merchants from distant lands flock to your marketplace.",portraitId:"merchant",options:[{text:"HOST A TRADE FAIR",effects:{gold:45,satisfaction:2}},{text:"TAX THE PROFITS",effects:{gold:60,satisfaction:-3}}]},{id:"CHAIN_MERCHANT_GUILD_END_STABLE",chainId:"merchant_guild",chainRole:"end",canTriggerRandomly:!1,title:"Steady Trade",text:"Trade continues at a modest pace. The guild  or lack thereof  has settled into a routine.",portraitId:"merchant",options:[{text:"GOOD ENOUGH",effects:{gold:25}},{text:"TAX THE PROFITS",effects:{gold:35,satisfaction:-3}}]},{id:"CHAIN_MERCHANT_GUILD_END_REFORM",chainId:"merchant_guild",chainRole:"end",canTriggerRandomly:!1,title:"A Fresh Start",text:"With the corrupt elements removed, honest merchants return. The marketplace is cleaner and more trustworthy.",portraitId:"merchant",options:[{text:"CELEBRATE",effects:{satisfaction:3}},{text:"STAY VIGILANT",effects:{authority:2}}]},{id:"CHAIN_PLAGUE_RUMORS_START",chainId:"plague_rumors",chainRole:"start",chainRestartCooldownTicks:90,authorityMin:20,authorityMax:100,title:"Dark Whispers",text:"Travelers speak of a sickness spreading through neighboring settlements. Your healers urge precautions before it reaches your lands.",portraitId:"advisor",options:[{text:"QUARANTINE BORDERS",effects:{gold:-10,satisfaction:-3}},{text:"DISMISS THE RUMORS",effects:{}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:4,delayMaxTicks:7,candidates:[{requestId:"CHAIN_PLAGUE_RUMORS_CONTAINED",weight:3},{requestId:"CHAIN_PLAGUE_RUMORS_BREACH",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:3,delayMaxTicks:5,candidates:[{requestId:"CHAIN_PLAGUE_RUMORS_OUTBREAK",weight:3},{requestId:"CHAIN_PLAGUE_RUMORS_NOTHING",weight:2}]}]},{id:"CHAIN_PLAGUE_RUMORS_CONTAINED",chainId:"plague_rumors",chainRole:"member",canTriggerRandomly:!1,title:"Quarantine Holds",text:"The border quarantine is working. Sickness has not reached your village, but trade has slowed to a crawl.",portraitId:"advisor",options:[{text:"MAINTAIN QUARANTINE",effects:{gold:-10}},{text:"REOPEN BORDERS",effects:{gold:10}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:4,delayMaxTicks:6,candidates:[{requestId:"CHAIN_PLAGUE_RUMORS_END_SAFE",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:3,delayMaxTicks:5,candidates:[{requestId:"CHAIN_PLAGUE_RUMORS_END_SAFE",weight:2},{requestId:"CHAIN_PLAGUE_RUMORS_END_SICK",weight:1}]}]},{id:"CHAIN_PLAGUE_RUMORS_BREACH",chainId:"plague_rumors",chainRole:"member",canTriggerRandomly:!1,title:"Quarantine Breached",text:"Despite your efforts, a merchant slipped through the quarantine. Several villagers have fallen ill.",portraitId:"advisor",options:[{text:"TREAT THE SICK",effects:{gold:-15,health:3}},{text:"ISOLATE THEM",effects:{satisfaction:-3}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:3,delayMaxTicks:5,candidates:[{requestId:"CHAIN_PLAGUE_RUMORS_END_SAFE",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:3,delayMaxTicks:5,candidates:[{requestId:"CHAIN_PLAGUE_RUMORS_END_SICK",weight:1}]}]},{id:"CHAIN_PLAGUE_RUMORS_OUTBREAK",chainId:"plague_rumors",chainRole:"member",canTriggerRandomly:!1,title:"Plague Arrives",text:"The sickness has reached your village. People are falling ill rapidly. The healers plead for resources.",portraitId:"advisor",options:[{text:"FUND HEALERS",effects:{gold:-15,health:5}},{text:"PRAY FOR THE BEST",effects:{health:-5,farmers:-5}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:3,delayMaxTicks:6,candidates:[{requestId:"CHAIN_PLAGUE_RUMORS_END_SAFE",weight:2},{requestId:"CHAIN_PLAGUE_RUMORS_END_SICK",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:3,delayMaxTicks:5,candidates:[{requestId:"CHAIN_PLAGUE_RUMORS_END_SICK",weight:1}]}]},{id:"CHAIN_PLAGUE_RUMORS_NOTHING",chainId:"plague_rumors",chainRole:"end",canTriggerRandomly:!1,title:"False Alarm",text:"The rumors were overblown. No plague materialized and life continues as before.",portraitId:"advisor",options:[{text:"RELIEF",effects:{satisfaction:3}},{text:"STAY CAUTIOUS",effects:{authority:1}}]},{id:"CHAIN_PLAGUE_RUMORS_END_SAFE",chainId:"plague_rumors",chainRole:"end",canTriggerRandomly:!1,title:"Crisis Averted",text:"The sickness passes without major casualties. Your village emerges stronger and more resilient.",portraitId:"advisor",options:[{text:"CELEBRATE SURVIVAL",effects:{satisfaction:3,health:5}},{text:"BUILD AN INFIRMARY",effects:{gold:-10,health:8}}]},{id:"CHAIN_PLAGUE_RUMORS_END_SICK",chainId:"plague_rumors",chainRole:"end",canTriggerRandomly:!1,title:"Scars of Sickness",text:"The plague has taken its toll. Empty homes stand as reminders. Recovery will take time.",portraitId:"advisor",options:[{text:"MOURN AND REBUILD",effects:{farmers:-5,health:3}},{text:"BLAME YOUR HEALERS",effects:{farmers:-5,satisfaction:-3,health:3,authority:1}}]},{id:"CHAIN_NOBLE_FEUD_START",chainId:"noble_feud",chainRole:"start",chainRestartCooldownTicks:70,authorityMin:34,authorityMax:100,title:"The Rival Lord",text:"Lord Alden of a neighboring fief has laid claim to a strip of borderland that your farmers work. He demands you yield or face consequences.",portraitId:"council_member",options:[{text:"ASSERT YOUR CLAIM",effects:{},authorityCheck:{minCommit:5,maxCommit:20,followUpBoosts:[{targetRequestId:"CHAIN_NOBLE_FEUD_DIPLOMACY",boostType:"linear",boostValue:4,description:"Increases chance of diplomatic resolution"}]}},{text:"YIELD THE LAND",effects:{farmers:-3,authority:-2}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:3,delayMaxTicks:5,candidates:[{requestId:"CHAIN_NOBLE_FEUD_DIPLOMACY",weight:2},{requestId:"CHAIN_NOBLE_FEUD_ESCALATE",weight:3}]},{triggerOnOptionIndex:1,delayMinTicks:4,delayMaxTicks:7,candidates:[{requestId:"CHAIN_NOBLE_FEUD_END_YIELDED",weight:1}]}]},{id:"CHAIN_NOBLE_FEUD_DIPLOMACY",chainId:"noble_feud",chainRole:"member",canTriggerRandomly:!1,title:"A Reasonable Man",text:"Lord Alden agrees to meet. Surprisingly, he is open to negotiation. Perhaps this can be settled without bloodshed.",portraitId:"council_member",options:[{text:"OFFER COMPROMISE",effects:{gold:-10,authority:1}},{text:"DEMAND FULL RIGHTS",effects:{authority:2}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:3,delayMaxTicks:5,candidates:[{requestId:"CHAIN_NOBLE_FEUD_END_PEACE",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:3,delayMaxTicks:5,candidates:[{requestId:"CHAIN_NOBLE_FEUD_END_PEACE",weight:1},{requestId:"CHAIN_NOBLE_FEUD_ESCALATE",weight:2}]}]},{id:"CHAIN_NOBLE_FEUD_ESCALATE",chainId:"noble_feud",chainRole:"member",canTriggerRandomly:!1,title:"Swords Drawn",text:'Lord Alden has gathered his men. His banners appear on the borderland. Feldric readies the militia: "This is no bluff."',portraitId:"military_advisor",options:[{text:"DEFEND THE BORDER",effects:{}},{text:"OFFER TRIBUTE",effects:{gold:-20,authority:-1}}],combat:{enemyForces:6,prepDelayMinTicks:2,prepDelayMaxTicks:4,onWin:{authority:2},onLose:{farmers:-4,satisfaction:-3,authority:-2},followUpsOnWin:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_NOBLE_FEUD_END_TRIUMPH",weight:1}]}],followUpsOnLose:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_NOBLE_FEUD_END_YIELDED",weight:1}]}]},followUps:[{triggerOnOptionIndex:1,delayMinTicks:3,delayMaxTicks:5,candidates:[{requestId:"CHAIN_NOBLE_FEUD_END_YIELDED",weight:1}]}]},{id:"CHAIN_NOBLE_FEUD_END_PEACE",chainId:"noble_feud",chainRole:"end",canTriggerRandomly:!1,title:"Neighborly Accord",text:"You and Lord Alden reach a fair agreement. The border is settled and both fiefs benefit from cooperation.",portraitId:"council_member",options:[{text:"TOAST TO PEACE",effects:{satisfaction:3,gold:10}},{text:"FORMALIZE THE PACT",effects:{authority:2,gold:10}}]},{id:"CHAIN_NOBLE_FEUD_END_TRIUMPH",chainId:"noble_feud",chainRole:"end",canTriggerRandomly:!1,title:"The Border Stands",text:"Lord Alden retreats in defeat. The borderland remains yours. Your people cheer their victory.",portraitId:"military_advisor",options:[{text:"REWARD THE MILITIA",effects:{satisfaction:5}},{text:"FORTIFY THE BORDER",effects:{landForces:5}}]},{id:"CHAIN_NOBLE_FEUD_END_YIELDED",chainId:"noble_feud",chainRole:"end",canTriggerRandomly:!1,title:"Land Lost",text:"The borderland now belongs to Lord Alden. Your farmers must find new fields, and your authority has suffered.",portraitId:"council_member",options:[{text:"ACCEPT THE LOSS",effects:{gold:-15,authority:-1}},{text:"PLAN REVENGE",effects:{gold:-15,authority:1,satisfaction:-2}}]},{id:"CHAIN_HARVEST_FEST_START",chainId:"harvest_fest",chainRole:"start",chainRestartCooldownTicks:50,maxTriggers:2,requires:["building:brewery"],title:"Festival Season",text:"The harvest is in and the people want a grand festival. Brewers offer their finest ale if you fund the event.",portraitId:"farmer",options:[{text:"FUND THE FESTIVAL",effects:{gold:-15}},{text:"CANCEL IT",effects:{satisfaction:-3}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_HARVEST_FEST_GREAT",weight:3},{requestId:"CHAIN_HARVEST_FEST_TROUBLE",weight:2}]},{triggerOnOptionIndex:1,delayMinTicks:3,delayMaxTicks:5,candidates:[{requestId:"CHAIN_HARVEST_FEST_END_QUIET",weight:1}]}]},{id:"CHAIN_HARVEST_FEST_GREAT",chainId:"harvest_fest",chainRole:"member",canTriggerRandomly:!1,title:"Joy and Ale",text:"The festival is a roaring success! Music, dancing, and barrels of ale. But the crowd wants even more entertainment.",portraitId:"farmer",options:[{text:"HIRE PERFORMERS",effects:{gold:-10}},{text:"LET THEM ENJOY",effects:{}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:3,candidates:[{requestId:"CHAIN_HARVEST_FEST_END_GLORY",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:2,delayMaxTicks:3,candidates:[{requestId:"CHAIN_HARVEST_FEST_END_GOOD",weight:1}]}]},{id:"CHAIN_HARVEST_FEST_TROUBLE",chainId:"harvest_fest",chainRole:"member",canTriggerRandomly:!1,title:"Drunken Brawl",text:"Too much ale has led to a brawl between farmers. Fists fly and tables break. The festival could turn ugly.",portraitId:"farmer",options:[{text:"RESTORE ORDER",effects:{authority:2,satisfaction:-2}},{text:"LET THEM FIGHT",effects:{health:-3}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:3,candidates:[{requestId:"CHAIN_HARVEST_FEST_END_GOOD",weight:2},{requestId:"CHAIN_HARVEST_FEST_END_QUIET",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:2,delayMaxTicks:3,candidates:[{requestId:"CHAIN_HARVEST_FEST_END_QUIET",weight:1}]}]},{id:"CHAIN_HARVEST_FEST_END_GLORY",chainId:"harvest_fest",chainRole:"end",canTriggerRandomly:!1,title:"A Festival to Remember",text:"Songs are written about this festival. The people are united, and word of your generosity spreads far.",portraitId:"farmer",options:[{text:"BASK IN GLORY",effects:{satisfaction:3,authority:2}},{text:"PREPARE NEXT YEAR",effects:{satisfaction:6}}]},{id:"CHAIN_HARVEST_FEST_END_GOOD",chainId:"harvest_fest",chainRole:"end",canTriggerRandomly:!1,title:"Fond Memories",text:"The festival winds down peacefully. People head home with warm bellies and good cheer.",portraitId:"farmer",options:[{text:"REST WELL",effects:{satisfaction:2,health:2}},{text:"CLEAN UP",effects:{satisfaction:3}}]},{id:"CHAIN_HARVEST_FEST_END_QUIET",chainId:"harvest_fest",chainRole:"end",canTriggerRandomly:!1,title:"Back to Work",text:"Festival or not, the work continues. The village settles back into its daily routine.",portraitId:"farmer",options:[{text:"CARRY ON",effects:{}},{text:"PROMISE A BETTER ONE",effects:{satisfaction:2,gold:-10}}]},{id:"CHAIN_DISEASE_RUMOR_START",chainId:"disease_rumor",chainRole:"start",title:"Feverish Whispers",text:"A peddler collapses at the gate, shivering with fever. The village healer warns that an unknown sickness may already be spreading among the traders' carts.",canTriggerRandomly:!0,portraitId:"advisor",options:[{text:"QUARANTINE EARLY",effects:{gold:-8,satisfaction:-2}},{text:"WAIT",effects:{}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:1,delayMaxTicks:2,candidates:[{requestId:"CHAIN_DISEASE_CONTAINED",weight:3},{requestId:"CHAIN_DISEASE_SPREADS",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:1,delayMaxTicks:2,candidates:[{requestId:"CHAIN_DISEASE_SPREADS",weight:3},{requestId:"CHAIN_DISEASE_FALSE_ALARM",weight:1}]}]},{id:"CHAIN_DISEASE_CONTAINED",chainId:"disease_rumor",chainRole:"member",canTriggerRandomly:!1,title:"Quarantine Holds",text:"Your swift action paid off. The sick have been isolated and the village healer reports no new cases. The people praise your foresight.",portraitId:"advisor",options:[{text:"AS IT SHOULD BE",effects:{health:3,authority:1}},{text:"IMPROVE SANITATION",effects:{gold:-10,health:4}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:1,delayMaxTicks:1,candidates:[{requestId:"CHAIN_DISEASE_END",weight:1}]}]},{id:"CHAIN_DISEASE_SPREADS",chainId:"disease_rumor",chainRole:"member",canTriggerRandomly:!1,title:"Plague Creeps In",text:"The sickness has spread to several households. Coughing echoes through the streets and the healer begs for coin to set up treatment tents.",portraitId:"advisor",options:[{text:"SET UP HEALERS",effects:{gold:-15,health:-4}},{text:"DO NOTHING",effects:{health:-5,authority:-1}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:1,delayMaxTicks:2,candidates:[{requestId:"CHAIN_DISEASE_END",weight:1}]}]},{id:"CHAIN_DISEASE_FALSE_ALARM",chainId:"disease_rumor",chainRole:"member",canTriggerRandomly:!1,title:"Just a Cold",text:'The healer examines the last patient and shrugs. "Seasonal sniffles, nothing more." The village breathes a sigh of relief, though some grumble about the wasted panic.',portraitId:"advisor",options:[{text:"WHAT A RELIEF",effects:{}},{text:"SCOLD YOUR HEALER",effects:{satisfaction:-2,authority:1}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:1,delayMaxTicks:1,candidates:[{requestId:"CHAIN_DISEASE_END",weight:1}]}]},{id:"CHAIN_DISEASE_END",chainId:"disease_rumor",chainRole:"end",canTriggerRandomly:!1,chainRestartCooldownTicks:140,title:"The Fever Passes",text:"Whether by quarantine, treatment, or simple luck, the threat of disease has faded. Life returns to normal  for now.",portraitId:"advisor",options:[{text:"MOVE ON",effects:{}},{text:"STOCK HERBS",effects:{gold:-10,health:3}}]},{id:"CHAIN_PALISADE_START",chainId:"palisade",chainRole:"start",title:"Rotting Defenses",text:"The outer palisade has deteriorated badly. Gaps in the timber invite wolves and worse. Feldric urges an upgrade before the next raid season.",canTriggerRandomly:!0,portraitId:"military_advisor",options:[{text:"INVEST IN PALISADE",effects:{gold:-15}},{text:"DELAY",effects:{satisfaction:-1}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:1,delayMaxTicks:2,candidates:[{requestId:"CHAIN_PALISADE_HIRE_CARPENTERS",weight:100},{requestId:"CHAIN_PALISADE_LOCAL_BUILD",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:1,delayMaxTicks:2,candidates:[{requestId:"CHAIN_PALISADE_END_WEAKENED",weight:1}]}]},{id:"CHAIN_PALISADE_HIRE_CARPENTERS",chainId:"palisade",chainRole:"member",canTriggerRandomly:!1,requires:["building:marketplace"],title:"Guild Carpenters Available",text:"Thanks to the marketplace, a guild of skilled carpenters offers their services. Their work would be superior, but their rates are steep.",portraitId:"merchant",options:[{text:"PAY GUILD",effects:{gold:-15}},{text:"FARMERS ARE GOOD ENOUGH",effects:{satisfaction:-1}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:1,delayMaxTicks:1,candidates:[{requestId:"CHAIN_PALISADE_END_STRONG",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:1,delayMaxTicks:1,candidates:[{requestId:"CHAIN_PALISADE_LOCAL_BUILD",weight:1}]}]},{id:"CHAIN_PALISADE_LOCAL_BUILD",chainId:"palisade",chainRole:"member",canTriggerRandomly:!1,title:"Village Hands",text:"Without guild access, the villagers must do the work themselves. It will take longer, but the result is good, and it costs nothing beyond sweat.",portraitId:"farmer",options:[{text:"STANDARD WORKTIME",effects:{landForces:3,authority:1}},{text:"PAY OVERTIME",effects:{gold:-10,landForces:6}}]},{id:"CHAIN_PALISADE_END_WEAKENED",chainId:"palisade",chainRole:"end",canTriggerRandomly:!1,chainRestartCooldownTicks:90,title:"pallisades or ruins?",text:"You decided not investing into pallisade renovations. Now, they are barely more than a pile of pebble.",portraitId:"advisor",options:[{text:"TOO BAD",effects:{landForces:-3,authority:-1}}]},{id:"CHAIN_PALISADE_END_STRONG",chainId:"palisade",chainRole:"end",canTriggerRandomly:!1,chainRestartCooldownTicks:90,title:"Most shiny pallisades around",text:"The hired guild workers do excellent efforts. Your pallisades are not only strong as ever, but also beautiful.",portraitId:"advisor",options:[{text:"THANK THEM",effects:{landForces:10,authority:1,satisfaction:2}},{text:"SHOW OFF",effects:{landForces:10,authority:3}}]},{id:"CHAIN_ARKANAT_INSPECTOR_START",chainId:"arkanat_inspector",chainRole:"start",authorityMin:20,title:"The Arkanat Arrives",text:'A stern official from the Arkanat  the regional mage council  dismounts at your gate. He carries sealed writs and a cold expression. "I am here to audit your governance."',canTriggerRandomly:!0,portraitId:"council_member",options:[{text:"ASSERT JURISDICTION",effects:{},authorityCheck:{minCommit:0,maxCommit:25,followUpBoosts:[{targetRequestId:"CHAIN_ARKANAT_BACKS_DOWN",boostType:"stepped",boostValue:2,steps:3}]}},{text:"COOPERATE",effects:{authority:-1,gold:-5}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:1,delayMaxTicks:2,candidates:[{requestId:"CHAIN_ARKANAT_BACKS_DOWN",weight:1},{requestId:"CHAIN_ARKANAT_RETALIATES",weight:2}]},{triggerOnOptionIndex:1,delayMinTicks:1,delayMaxTicks:2,candidates:[{requestId:"CHAIN_ARKANAT_DEMANDS_FEES",weight:2},{requestId:"CHAIN_ARKANAT_MUTUAL_RESPECT",weight:1}]}]},{id:"CHAIN_ARKANAT_BACKS_DOWN",chainId:"arkanat_inspector",chainRole:"member",canTriggerRandomly:!1,title:"Inspector Relents",text:'Faced with your firm stance and the weight of your authority, the Arkanat inspector folds his writs. "Very well. Your records appear... adequate." He mounts his horse without another word.',portraitId:"council_member",options:[{text:"SEE HIM OUT",effects:{authority:1}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:0,delayMaxTicks:0,candidates:[{requestId:"CHAIN_ARKANAT_DEBRIEF",weight:1}]}]},{id:"CHAIN_ARKANAT_RETALIATES",chainId:"arkanat_inspector",chainRole:"member",canTriggerRandomly:!1,title:"Inspector Strikes Back",text:'The inspector was not bluffing. He produces a decree stripping you of certain privileges and levies a fine. "The Arkanat does not forget defiance."',portraitId:"council_member",options:[{text:"ACCEPT THE BLOW",effects:{authority:-3,satisfaction:-2}},{text:"PROTEST",effects:{}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:0,delayMaxTicks:0,candidates:[{requestId:"CHAIN_ARKANAT_DEBRIEF",weight:1}]}]},{id:"CHAIN_ARKANAT_DEMANDS_FEES",chainId:"arkanat_inspector",chainRole:"member",canTriggerRandomly:!1,title:"Administrative Fees",text:'The inspector smiles thinly. "Your cooperation is noted. However, administrative fees are still due." He slides a ledger across the table with an exorbitant sum circled in red.',portraitId:"council_member",options:[{text:"PAY",effects:{gold:-20}},{text:"REFUSE",effects:{authority:1,satisfaction:-1}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:0,delayMaxTicks:0,candidates:[{requestId:"CHAIN_ARKANAT_DEBRIEF",weight:1}]}]},{id:"CHAIN_ARKANAT_MUTUAL_RESPECT",chainId:"arkanat_inspector",chainRole:"member",canTriggerRandomly:!1,title:"Mutual Understanding",text:"Your willingness to cooperate impresses the inspector. Over ale, he shares useful information about regional trade routes and promises to speak well of you to the council.",portraitId:"council_member",options:[{text:"A GOOD OUTCOME",effects:{authority:1}},{text:"THANK HIM",effects:{}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:0,delayMaxTicks:0,candidates:[{requestId:"CHAIN_ARKANAT_DEBRIEF",weight:1}]}]},{id:"CHAIN_ARKANAT_DEBRIEF",chainId:"arkanat_inspector",chainRole:"end",canTriggerRandomly:!1,advancesTick:!1,chainRestartCooldownTicks:200,title:"Arkanat Debrief",text:"The inspector is gone. Feldric summarizes: the Arkanat will return eventually  they always do. But for now, the matter is settled.",portraitId:"advisor",options:[{text:"NOTED",effects:{}}]},{id:"CHAIN_EGO_INSULT_START",chainId:"ego_insult",chainRole:"start",title:"A Voice from the Crowd",text:'During a public address, a villager shouts: "You call yourself a leader? My goat governs better!" Laughter ripples through the crowd. All eyes turn to you.',canTriggerRandomly:!0,portraitId:"farmer",options:[{text:"PUNISH",effects:{authority:1,satisfaction:-2}},{text:"LAUGH IT OFF",effects:{satisfaction:1}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:1,delayMaxTicks:2,candidates:[{requestId:"CHAIN_EGO_PUNISH_BACKLASH",weight:1},{requestId:"CHAIN_EGO_PUNISH_RESPECT",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:1,delayMaxTicks:2,candidates:[{requestId:"CHAIN_EGO_LAUGH_EMBOLDENED",weight:1},{requestId:"CHAIN_EGO_LAUGH_RESPECT",weight:1}]}]},{id:"CHAIN_EGO_PUNISH_BACKLASH",chainId:"ego_insult",chainRole:"member",canTriggerRandomly:!1,title:"Heavy Hand Backfires",text:'The heckler is dragged away, but the crowd murmurs darkly. "He only spoke what we all think." Your show of force has made things worse.',portraitId:"farmer",options:[{text:"LEAVE THE SQUARE",effects:{authority:-1}},{text:"DISPERSE THE CROWD",effects:{satisfaction:-2,authority:1}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:3,delayMaxTicks:5,candidates:[{requestId:"CHAIN_EGO_END",weight:1}]}]},{id:"CHAIN_EGO_PUNISH_RESPECT",chainId:"ego_insult",chainRole:"member",canTriggerRandomly:!1,title:"Order Restored",text:"The crowd falls silent at first. Then a loud voice rings out: All hail! It isnt long before the whole square erupts in applause. Whether out of fear or awe, you cannot say.",portraitId:"farmer",options:[{text:"AS IT SHOULD BE",effects:{authority:1}},{text:"DEAL OUT COINS",effects:{gold:-5}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:3,delayMaxTicks:5,candidates:[{requestId:"CHAIN_EGO_END",weight:1}]}]},{id:"CHAIN_EGO_LAUGH_EMBOLDENED",chainId:"ego_insult",chainRole:"member",canTriggerRandomly:!1,title:"Mockery Spreads",text:'Your good humor emboldens others. Soon "the goat lord" becomes a street joke. Children bleat at you in the streets.',portraitId:"farmer",options:[{text:"IGNORE IT",effects:{authority:-1}},{text:"IMPRISON THEM",effects:{satisfaction:-5,farmers:-3,authority:1}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:1,delayMaxTicks:1,candidates:[{requestId:"CHAIN_EGO_END",weight:1}]}]},{id:"CHAIN_EGO_LAUGH_RESPECT",chainId:"ego_insult",chainRole:"member",canTriggerRandomly:!1,title:"Grace Under Fire",text:'Your laughter disarms the moment entirely. The heckler himself grins sheepishly. "Fair enough, my lord." The crowd warms to you  a leader who can take a joke is a leader worth following.',portraitId:"farmer",options:[{text:"WELL HANDLED",effects:{satisfaction:1}},{text:"BUY HIM AN ALE",effects:{gold:-5,satisfaction:1}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:3,delayMaxTicks:5,candidates:[{requestId:"CHAIN_EGO_END",weight:1}]}]},{id:"CHAIN_EGO_END",chainId:"ego_insult",chainRole:"end",canTriggerRandomly:!1,chainRestartCooldownTicks:100,title:"The Incident Fades",text:"Weeks pass and the incident is mostly forgotten  though some still smirk when they think you are not looking. Such is the burden of leadership.",portraitId:"advisor",options:[{text:"MOVE FORWARD",effects:{}}]},{id:"CHAIN_RIVER_PIRATES_START",chainId:"river_pirates",chainRole:"start",portraitId:"bandit",title:"Sails on the River",text:"Black-flagged longboats have been spotted on the river. A pirate fleet demands tribute or threatens to burn your docks and seize your coin.",canTriggerRandomly:!0,chainRestartCooldownTicks:80,combat:{enemyForces:10,prepDelayMinTicks:3,prepDelayMaxTicks:6,onWin:{authority:2},onLose:{authority:-2},followUpsOnWin:[{triggerOnOptionIndex:0,delayMinTicks:1,delayMaxTicks:2,candidates:[{requestId:"CHAIN_RIVER_PIRATES_AFTER_WIN",weight:1}]}],followUpsOnLose:[{triggerOnOptionIndex:0,delayMinTicks:1,delayMaxTicks:2,candidates:[{requestId:"CHAIN_RIVER_PIRATES_AFTER_LOSE",weight:1}]}]},options:[{text:"FIGHT",effects:{}},{text:"PAY TRIBUTE",effects:{gold:-15,authority:-1},authorityCheck:{minCommit:0,maxCommit:25,followUpBoosts:[{targetRequestId:"CHAIN_RIVER_PIRATES_TRIBUTE_LEAVES",boostType:"linear",boostValue:4}]}}],followUps:[{triggerOnOptionIndex:1,delayMinTicks:2,delayMaxTicks:3,candidates:[{requestId:"CHAIN_RIVER_PIRATES_TRIBUTE_LEAVES",weight:1},{requestId:"CHAIN_RIVER_PIRATES_TRIBUTE_RETURNS",weight:2}]}]},{id:"CHAIN_RIVER_PIRATES_AFTER_WIN",chainId:"river_pirates",chainRole:"member",canTriggerRandomly:!1,title:"River Cleared",text:"The pirate fleet burns on the riverbank. Your soldiers recover stolen goods from the wreckage. Word of the victory spreads downstream.",portraitId:"military_advisor",options:[{text:"SALVAGE WHAT WE CAN",effects:{gold:15}},{text:"CELEBRATE",effects:{satisfaction:3}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:1,delayMaxTicks:1,candidates:[{requestId:"CHAIN_RIVER_PIRATES_END",weight:1}]}]},{id:"CHAIN_RIVER_PIRATES_AFTER_LOSE",chainId:"river_pirates",chainRole:"member",canTriggerRandomly:!1,title:"Docks in Flames",text:"The pirates overwhelmed your defenses and march towards your treasury. Your villagers try to flee.",portraitId:"bandit",options:[{text:"PEASANTS, DEFEND MY TREASURY!",effects:{farmers:-10,satisfaction:-3}},{text:"RUN FOR YOUR LIVES!",effects:{gold:-20,satisfaction:3}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:1,delayMaxTicks:1,candidates:[{requestId:"CHAIN_RIVER_PIRATES_END",weight:1}]}]},{id:"CHAIN_RIVER_PIRATES_TRIBUTE_LEAVES",chainId:"river_pirates",chainRole:"member",canTriggerRandomly:!1,portraitId:"bandit",title:"Pirates Withdraw",text:'The pirate captain counts the tribute and nods. "Wise choice." The black sails disappear downriver. Perhaps your show of authority convinced them to seek easier prey.',options:[{text:"BRAG ABOUT IT",effects:{satisfaction:-1,authority:1}},{text:"SECURE THE RIVER",effects:{gold:-10,landForces:3}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:1,delayMaxTicks:1,candidates:[{requestId:"CHAIN_RIVER_PIRATES_END",weight:1}]}]},{id:"CHAIN_RIVER_PIRATES_TRIBUTE_RETURNS",chainId:"river_pirates",chainRole:"member",canTriggerRandomly:!1,portraitId:"bandit",title:"They Want More",text:'The pirates took the tribute  and came back for more. "give us your coin or we take your wives!" The crew jeers from the deck as their captain extends an open palm.',options:[{text:"GIVE COIN",effects:{gold:-10}},{text:"GIVE UP WIVES",effects:{farmers:-5,satisfaction:-5}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:1,delayMaxTicks:1,candidates:[{requestId:"CHAIN_RIVER_PIRATES_END",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:1,delayMaxTicks:1,candidates:[{requestId:"CHAIN_RIVER_PIRATES_END",weight:1}]}]},{id:"CHAIN_RIVER_PIRATES_END",chainId:"river_pirates",chainRole:"end",canTriggerRandomly:!1,chainRestartCooldownTicks:100,title:"The River Quiets",text:"The river pirate threat has passed. Fishermen cautiously return to their boats, and trade barges resume their routes.",portraitId:"advisor",options:[{text:"CURSE PIRATES",effects:{satisfaction:2,authority:-1}},{text:"SCOLD YOUR SOLDIERS",effects:{satisfaction:-2,authority:1}}]},{id:"CHAIN_HEALER_START",chainId:"wandering_healer",chainRole:"start",chainRestartCooldownTicks:30,title:"The Wandering Healer",text:'A woman in travel-worn robes approaches the gate, carrying bundles of dried herbs and a leather satchel of salves. She calls herself Maren, a healer from the eastern valleys. "Your people look pale," she says, studying the villagers. "I can help  for a fair price."',options:[{text:"HIRE HER",effects:{gold:-10}},{text:"SEND HER AWAY",effects:{satisfaction:-1}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_HEALER_TREAT",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_HEALER_REFUSE",weight:1}]}]},{id:"CHAIN_HEALER_TREAT",chainId:"wandering_healer",chainRole:"member",canTriggerRandomly:!1,title:"The Healer's Craft",text:'Maren has been working tirelessly among the sick. Fevers have broken and wounds are mending. But she approaches you now with a request: "I need rarer ingredients to finish my work  yarrow root and ghost-moss. I can purchase them, but the cost falls to you."',options:[{text:"PAY FOR INGREDIENTS",effects:{gold:-10,health:3}},{text:"USE LOCAL REMEDIES",effects:{farmers:-2,health:2}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_HEALER_END",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_HEALER_END",weight:1}]}]},{id:"CHAIN_HEALER_REFUSE",chainId:"wandering_healer",chainRole:"member",canTriggerRandomly:!1,title:"Sickness Lingers",text:`Without the healer's expertise, the village coughs grow worse. Your advisor pulls you aside: "My lord, the people are frightened. We must do something  quarantine the sick quarter, or at least gather what herbs we can from the forest."`,portraitId:"advisor",options:[{text:"QUARANTINE",effects:{health:-1,fireRisk:-2}},{text:"GATHER HERBS",effects:{gold:-5,health:1}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_HEALER_END",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_HEALER_END",weight:1}]}]},{id:"CHAIN_HEALER_END",chainId:"wandering_healer",chainRole:"end",canTriggerRandomly:!1,title:"Recovery",text:"The worst of the illness has passed. Color returns to the villagers' cheeks, and the settlement stirs back to life. Whether by healer's skill or village grit, your people endure.",portraitId:"advisor",options:[{text:"CELEBRATE RECOVERY",effects:{satisfaction:3,gold:-5}},{text:"BUILD A HERB GARDEN",effects:{health:3,fireRisk:-2,gold:-10}}]},{id:"CHAIN_SMUGGLER_START",chainId:"smugglers_offer",chainRole:"start",chainRestartCooldownTicks:35,title:"Whispers at the Gate",text:'A merchant pulls you aside at the market square, glancing over his shoulder. "My lord, there are men camped beyond the treeline  smugglers. They carry salt, iron, and cloth at half the guild price. Shall I arrange a meeting, or shall we report them to the watch?"',portraitId:"merchant",options:[{text:"ARRANGE A DEAL",effects:{gold:10,authority:-1}},{text:"REPORT TO WATCH",effects:{satisfaction:1,gold:-5}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_SMUGGLER_DEAL",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_SMUGGLER_REPORT",weight:1}]}]},{id:"CHAIN_SMUGGLER_DEAL",chainId:"smugglers_offer",chainRole:"member",canTriggerRandomly:!1,title:"The Midnight Exchange",text:'The smugglers delivered as promised  crates of goods now sit in your storehouse. But a guard on night patrol noticed the wagons. He stands before you, uncertain. "My lord, I saw unmarked carts at the south gate. Should I... forget what I saw?"',portraitId:"merchant",options:[{text:"HIDE THE GOODS",effects:{fireRisk:2,gold:5}},{text:"RETURN EVERYTHING",effects:{gold:-10,satisfaction:1}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_SMUGGLER_CAUGHT",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_SMUGGLER_END",weight:1}]}]},{id:"CHAIN_SMUGGLER_REPORT",chainId:"smugglers_offer",chainRole:"member",canTriggerRandomly:!1,title:"Justice at the Treeline",text:'Your watchmen tracked the smugglers to their camp and confronted them. The leader, a scarred man called Dettmer, spat at your guards but surrendered without a fight. "You could have profited, lord. Instead you chose the hard road." What do you do with the prisoners?',portraitId:"advisor",options:[{text:"ARREST THEM",effects:{authority:2,satisfaction:-1}},{text:"DRIVE THEM OFF",effects:{satisfaction:1}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_SMUGGLER_END",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_SMUGGLER_END",weight:1}]}]},{id:"CHAIN_SMUGGLER_CAUGHT",chainId:"smugglers_offer",chainRole:"member",canTriggerRandomly:!1,title:"A Council Inquiry",text:'Word has reached the village council about the unmarked goods. A council member stands before you with a ledger. "My lord, there are discrepancies in the storehouse inventory. The people deserve an explanation."',portraitId:"council_member",options:[{text:"PAY A FINE",effects:{gold:-15,authority:-1}},{text:"BLAME THE MERCHANT",effects:{satisfaction:-2,authority:1}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_SMUGGLER_END",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_SMUGGLER_END",weight:1}]}]},{id:"CHAIN_SMUGGLER_END",chainId:"smugglers_offer",chainRole:"end",canTriggerRandomly:!1,title:"The Dust Settles",text:"The smuggler affair fades from memory as new concerns take hold. Your storehouse is stocked  or not  and the village moves on. Lessons were learned about the cost of shortcuts.",portraitId:"advisor",options:[{text:"TIGHTEN PATROLS",effects:{gold:-5,fireRisk:-3}},{text:"OPEN MARKETS WIDER",effects:{gold:5,satisfaction:2}}]},{id:"CHAIN_LOST_CHILD_START",chainId:"lost_child",chainRole:"start",chainRestartCooldownTicks:25,title:"A Child Gone Missing",text:'A farmer bursts into the hall, breathless and wild-eyed. "My lord, my daughter  she was playing near the forest edge and never came home! The sun is setting and wolves howl in those woods at night. Please, you must help!"',portraitId:"farmer",options:[{text:"SEND SEARCH PARTY",effects:{gold:-5,farmers:-3}},{text:"WAIT UNTIL DAWN",effects:{satisfaction:-2}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_LOST_CHILD_SEARCH",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_LOST_CHILD_WAIT",weight:1}]}]},{id:"CHAIN_LOST_CHILD_SEARCH",chainId:"lost_child",chainRole:"member",canTriggerRandomly:!1,title:"Into the Dark Woods",text:"Your search party pushes deeper into the forest with torches held high. They find small footprints near a stream, heading toward the old ruins. The trail is fresh but the woods grow thick. Press on, or set up camp and call out?",portraitId:"farmer",options:[{text:"PRESS DEEPER",effects:{health:-1,gold:-5}},{text:"CAMP AND CALL OUT",effects:{satisfaction:-1}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:3,candidates:[{requestId:"CHAIN_LOST_CHILD_END",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_LOST_CHILD_END",weight:1}]}]},{id:"CHAIN_LOST_CHILD_WAIT",chainId:"lost_child",chainRole:"member",canTriggerRandomly:!1,title:"A Long Night",text:'The village holds its breath through the night. The father paces by the gate, refusing food or rest. At first light, your advisor approaches. "My lord, we could light bonfires at the forest edge to guide the child home  though the fire risk concerns me. Or we continue to wait and trust in providence."',portraitId:"advisor",options:[{text:"LIGHT BONFIRES",effects:{fireRisk:3,gold:-5}},{text:"KEEP WAITING",effects:{satisfaction:-2}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:3,candidates:[{requestId:"CHAIN_LOST_CHILD_END",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:3,delayMaxTicks:5,candidates:[{requestId:"CHAIN_LOST_CHILD_END",weight:1}]}]},{id:"CHAIN_LOST_CHILD_END",chainId:"lost_child",chainRole:"end",canTriggerRandomly:!1,title:"Found",text:"The child is found  muddy, frightened, but alive  huddled beneath a fallen oak. The father weeps with relief as he carries her home. The village gathers around them, and for a moment, the hardships of frontier life feel lighter.",portraitId:"farmer",options:[{text:"CELEBRATE",effects:{satisfaction:3,gold:-5}},{text:"POST FOREST WATCH",effects:{authority:2,gold:-10}}]},{id:"CHAIN_ENVOY_START",chainId:"foreign_envoy",chainRole:"start",chainRestartCooldownTicks:50,title:"Riders on the Road",text:'A column of riders appears on the eastern road, bearing the banner of the March of Valdren  a silver stag on blue. A herald dismounts and bows. "My lords send greetings and request an audience. They wish to discuss matters of mutual benefit." Your council watches and waits for your response.',portraitId:"council_member",options:[{text:"HOST A FEAST",effects:{gold:-10,satisfaction:1}},{text:"DENY ENTRY",effects:{authority:1,satisfaction:-1}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_ENVOY_FEAST",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_ENVOY_REBUFF",weight:1}]}]},{id:"CHAIN_ENVOY_FEAST",chainId:"foreign_envoy",chainRole:"member",canTriggerRandomly:!1,title:"The Envoy's Toast",text:'Wine flows and the envoy  a sharp-eyed woman called Lady Sigrun  raises her cup. "To friendship between our marches," she says. Over roasted venison, she leans closer. "But friendship requires investment, does it not? I have a proposal  hear me out before you judge."',options:[{text:"HEAR THE PROPOSAL",effects:{gold:-5}},{text:"DEMAND GIFTS FIRST",effects:{authority:1,gold:5}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:3,candidates:[{requestId:"CHAIN_ENVOY_PROPOSAL",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_ENVOY_PROPOSAL",weight:1}]}]},{id:"CHAIN_ENVOY_REBUFF",chainId:"foreign_envoy",chainRole:"member",canTriggerRandomly:!1,title:"An Insult Remembered",text:`The envoy's herald rides back to the column, face flushed. From the gate, you watch the riders confer  then the column turns not east toward home, but south toward the river crossing. Your advisor frowns. "They are heading toward our trade routes, my lord. This may not be the last we hear of Valdren."`,portraitId:"advisor",options:[{text:"SEND AN APOLOGY",effects:{gold:-10,authority:-2}},{text:"LET THEM STEW",effects:{authority:2,satisfaction:-2}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:3,delayMaxTicks:5,candidates:[{requestId:"CHAIN_ENVOY_TENSIONS",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:3,delayMaxTicks:5,candidates:[{requestId:"CHAIN_ENVOY_TENSIONS",weight:1}]}]},{id:"CHAIN_ENVOY_PROPOSAL",chainId:"foreign_envoy",chainRole:"member",canTriggerRandomly:!1,title:"The Valdren Accord",text:'Lady Sigrun unrolls a parchment across the table. "Valdren proposes a trade pact: your grain and timber for our iron and horses. We would also station a small garrison at the river ford  for mutual protection, of course." The terms are generous, but the garrison clause raises eyebrows among your council.',portraitId:"council_member",options:[{text:"ACCEPT FULL TERMS",effects:{gold:-15,satisfaction:2}},{text:"COUNTER WITHOUT GARRISON",effects:{authority:-2}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_ENVOY_END_ALLIANCE",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_ENVOY_END_TRADE",weight:1}]}]},{id:"CHAIN_ENVOY_TENSIONS",chainId:"foreign_envoy",chainRole:"member",canTriggerRandomly:!1,title:"Border Tensions",text:"Merchants returning from the south bring troubling news. Valdren riders have been seen near your border villages, questioning farmers about grain stores and troop movements. Whether this is intimidation or preparation, the message is clear: Valdren has not forgotten.",portraitId:"merchant",options:[{text:"FORTIFY THE BORDER",effects:{gold:-15,authority:1}},{text:"SEEK DIPLOMACY",effects:{gold:-5,satisfaction:1}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:3,delayMaxTicks:5,candidates:[{requestId:"CHAIN_ENVOY_END_HOSTILE",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:3,delayMaxTicks:5,candidates:[{requestId:"CHAIN_ENVOY_END_TRADE",weight:1}]}]},{id:"CHAIN_ENVOY_END_ALLIANCE",chainId:"foreign_envoy",chainRole:"end",canTriggerRandomly:!1,title:"The Silver Stag Pact",text:'The Valdren Accord is signed with great ceremony. Lady Sigrun clasps your hand. "Today marks a new era for both our peoples." Iron and horses begin flowing into your settlement, and the Valdren garrison at the ford keeps the road safe. Time will tell if this friendship holds.',portraitId:"advisor",options:[{text:"CELEBRATE THE PACT",effects:{satisfaction:4,gold:15}},{text:"INVEST IN TRADE ROUTE",effects:{gold:-5,farmers:4}}]},{id:"CHAIN_ENVOY_END_TRADE",chainId:"foreign_envoy",chainRole:"end",canTriggerRandomly:!1,title:"A Cautious Agreement",text:"After weeks of negotiation, a modest trade agreement is reached. No garrison, no grand alliance  just goods exchanged at fair prices. Your council calls it prudent. Lady Sigrun calls it disappointing. Either way, the wagons roll.",portraitId:"merchant",options:[{text:"ACCEPT THE DEAL",effects:{gold:10,satisfaction:1}},{text:"PUSH FOR BETTER TERMS",effects:{authority:2,gold:5}}]},{id:"CHAIN_ENVOY_END_HOSTILE",chainId:"foreign_envoy",chainRole:"end",canTriggerRandomly:!1,title:"A Cold Border",text:"The Valdren riders withdraw, but the damage is done. Trade with the east has slowed to a trickle, and your border villages report sleepless nights. You have preserved your independence  but at the cost of a neighbor's goodwill.",portraitId:"military_advisor",options:[{text:"STRENGTHEN DEFENSES",effects:{gold:-10,landForces:3}},{text:"SEEK OTHER ALLIES",effects:{satisfaction:-1,authority:-1}}]},{id:"CHAIN_DESERTER_START",chainId:"deserters",chainRole:"start",chainRestartCooldownTicks:45,title:"Empty Bunks",text:'Your military advisor strides into the hall with a grim expression. "My lord, six soldiers slipped out of the barracks last night. They took weapons, rations, and a mule. Tracks lead south into the marshes. Desertion  plain and simple." He pauses. "Do we hunt them, or let word spread that we forgive cowardice?"',portraitId:"military_advisor",options:[{text:"HUNT THEM DOWN",effects:{gold:-5,authority:1}},{text:"OFFER PARDON",effects:{authority:-2,satisfaction:1}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_DESERTER_HUNT",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_DESERTER_PARDON",weight:1}]}]},{id:"CHAIN_DESERTER_HUNT",chainId:"deserters",chainRole:"member",canTriggerRandomly:!1,title:"Tracks in the Marsh",text:`Your scouts locate the deserters in an abandoned woodcutter's cabin near the marsh. They have barricaded the door and are armed. Your military advisor studies the position. "We can storm them  it will be quick but bloody. Or we can call out terms and try to talk them back."`,portraitId:"military_advisor",combat:{enemyForces:4,prepDelayMinTicks:1,prepDelayMaxTicks:2,onWin:{authority:2},onLose:{satisfaction:-2,authority:-1},followUpsOnWin:[{triggerOnOptionIndex:0,delayMinTicks:1,delayMaxTicks:2,candidates:[{requestId:"CHAIN_DESERTER_CAPTURED",weight:1}]}],followUpsOnLose:[{triggerOnOptionIndex:0,delayMinTicks:1,delayMaxTicks:2,candidates:[{requestId:"CHAIN_DESERTER_CAPTURED",weight:1}]}]},options:[{text:"STORM THE CABIN",effects:{}},{text:"NEGOTIATE SURRENDER",effects:{gold:-10,satisfaction:1}}],followUps:[{triggerOnOptionIndex:1,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_DESERTER_END_JUSTICE",weight:1}]}]},{id:"CHAIN_DESERTER_CAPTURED",chainId:"deserters",chainRole:"member",canTriggerRandomly:!1,title:"The Prisoners",text:'The deserters are brought back in chains, bruised and silent. The village watches as they are marched through the gate. Your military advisor waits for your judgment. "The men await sentencing, my lord. A harsh example, or measured justice?"',portraitId:"military_advisor",options:[{text:"HARSH PUNISHMENT",effects:{authority:2,satisfaction:-2}},{text:"FAIR TRIAL",effects:{gold:-5,satisfaction:1}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:3,candidates:[{requestId:"CHAIN_DESERTER_END_JUSTICE",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:2,delayMaxTicks:3,candidates:[{requestId:"CHAIN_DESERTER_END_JUSTICE",weight:1}]}]},{id:"CHAIN_DESERTER_PARDON",chainId:"deserters",chainRole:"member",canTriggerRandomly:!1,title:"The Pardon Proclaimed",text:`Word of the pardon spreads. Within days, four of the six deserters slink back through the gate, heads bowed. But the remaining two are nowhere to be seen. The returned soldiers look thin and ashamed. A farmer's wife spits at them. Your advisor asks, "How shall we receive them, my lord?"`,portraitId:"farmer",options:[{text:"PROMISE BETTER CONDITIONS",effects:{gold:-10,satisfaction:2}},{text:"SET A DEADLINE FOR OTHERS",effects:{authority:1,satisfaction:-1}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_DESERTER_REINTEGRATE",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_DESERTER_REINTEGRATE",weight:1}]}]},{id:"CHAIN_DESERTER_REINTEGRATE",chainId:"deserters",chainRole:"member",canTriggerRandomly:!1,title:"New Beginnings",text:"The pardoned soldiers stand before you, waiting for assignment. Some are farmers' sons who never wanted to fight. Others were veterans who simply broke under the weight of endless duty. Your advisor lays out two paths: send them to the fields, or back to the barracks.",portraitId:"advisor",options:[{text:"ASSIGN TO FARMS",effects:{farmers:3,satisfaction:1}},{text:"RETURN TO MILITIA",effects:{landForces:3,authority:1}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_DESERTER_END_MERCY",weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:"CHAIN_DESERTER_END_MERCY",weight:1}]}]},{id:"CHAIN_DESERTER_END_JUSTICE",chainId:"deserters",chainRole:"end",canTriggerRandomly:!1,title:"Order Restored",text:"The deserter affair is settled. Whether by blade or by law, the message is clear: duty is not optional. The remaining soldiers stand straighter at their posts, and the village watches with a mix of fear and respect.",portraitId:"military_advisor",options:[{text:"MAKE AN EXAMPLE",effects:{authority:3,satisfaction:-3}},{text:"SHOW RESTRAINT",effects:{satisfaction:2,authority:1}}]},{id:"CHAIN_DESERTER_END_MERCY",chainId:"deserters",chainRole:"end",canTriggerRandomly:!1,title:"The Village Whole",text:"The pardoned men have settled into their new roles. Some till the fields with renewed purpose; others stand guard with a quieter resolve. The village is whole again  not because of punishment, but because of a second chance.",portraitId:"advisor",options:[{text:"CELEBRATE UNITY",effects:{satisfaction:3,gold:-5}},{text:"INVEST IN TRAINING",effects:{landForces:2,gold:-10}}]}],dl=[{id:"INFO_TRADE_SUCCESS",title:"Negotiation Victory",text:"Your firm negotiating stance paid off. The merchant guild agrees to your terms, and your authority remains intact.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"EXCELLENT",effects:{}}]},{id:"INFO_TRADE_FAILURE",title:"Negotiation Failure",text:"The merchants walked away from the table, insulted by your overreach. The deal is lost and your reputation damaged.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"ACCEPT DEFEAT",effects:{}}]},{id:"INFO_RIOT_SUCCESS",title:"Crisis Averted",text:"Your words resonated with the crowd. They disperse peacefully, moved by your leadership and vision.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"WELL DONE",effects:{}}]},{id:"INFO_RIOT_FAILURE",title:"Riot Erupts",text:"The crowd jeered and threw stones. Violence broke out, and guards had to intervene forcefully. Your authority was not enough.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"REGRET IT",effects:{}}]},{id:"INFO_JUSTICE_SUCCESS",title:"Justice Served",text:"Both families accept your judgment. Your authority has brought peace and order to the dispute.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"GOOD",effects:{}}]},{id:"INFO_JUSTICE_FAILURE",title:"Justice Rejected",text:"The families reject your ruling, calling you weak and incompetent. The feud intensifies.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"UNFORTUNATE",effects:{}}]},{id:"INFO_REFORM_SUCCESS",title:"Reforms Implemented",text:"Despite resistance, your authority prevails. The military is reorganized and strengthened under new leadership.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"PROCEED",effects:{}}]},{id:"INFO_REFORM_FAILURE",title:"Reforms Rejected",text:"The old guard refuses your changes. Some officers even resign in protest, weakening your forces.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"ACCEPT IT",effects:{}}]},{id:"INFO_BANDIT_SUCCESS",title:"Bandits Recruited",text:"The bandit chief kneels before you, swearing loyalty. His warriors are now yours to command.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"WELCOME THEM",effects:{}}]},{id:"INFO_BANDIT_FAILURE",title:"Bandits Betray",text:"The bandits laugh at your offer and raid your settlement. Your weakness has cost you dearly.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"CURSE THEM",effects:{}}]},{id:"INFO_TAX_SUCCESS",title:"Tax Reform Succeeds",text:"Your authority overcomes the corrupt officials. The new tax system is efficient and fair, filling the coffers.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"CELEBRATE",effects:{}}]},{id:"INFO_TAX_FAILURE",title:"Tax Reform Fails",text:"The entrenched interests sabotage your reforms. Tax collection collapses into chaos and resentment.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"REGROUP",effects:{}}]},{id:"INFO_RELIGIOUS_SUCCESS",title:"Unity Achieved",text:"Your decree brings religious harmony. The people unite under your wisdom and authority.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"BLESSED",effects:{}}]},{id:"INFO_RELIGIOUS_FAILURE",title:"Religious Schism",text:"Your decree inflames the dispute. Families are torn apart, and some flee the settlement in protest.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"DAMAGE DONE",effects:{}}]},{id:"INFO_BORDER_SUCCESS",title:"Territory Secured",text:"Your claim is recognized. The contested lands are now yours, bringing new farmers and resources.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"EXPAND",effects:{}}]},{id:"INFO_BORDER_FAILURE",title:"Border War",text:"Your neighbor rejects your claim with force. A brief but bloody skirmish costs you dearly.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"RETREAT",effects:{}}]},{id:"INFO_CORRUPT_SUCCESS",title:"Corruption Rooted Out",text:"The corrupt official is punished publicly. The recovered funds and restored integrity boost morale.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"JUSTICE",effects:{}}]},{id:"INFO_CORRUPT_FAILURE",title:"Corruption Persists",text:"The official's allies strike back. Your prosecution fails, and the corrupt network retaliates.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"FAILED",effects:{}}]},{id:"INFO_SUCCESSION_SUCCESS",title:"Succession Secured",text:"Your chosen claimant takes power, grateful for your support. Rich rewards and alliance follow.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"PROFIT",effects:{}}]},{id:"INFO_SUCCESSION_FAILURE",title:"Succession War",text:"Your candidate loses. The victorious claimant remembers your opposition with hostility.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"COSTLY",effects:{}}]},{id:"INFO_GUILD_SUCCESS",title:"Guild United",text:"Your choice stands. The favored guild prospers, and trade flourishes under clear leadership.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"PROSPER",effects:{}}]},{id:"INFO_GUILD_FAILURE",title:"Guild Chaos",text:"Both guilds reject your decision. Trade war erupts, damaging the economy and your standing.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"CHAOS",effects:{}}]},{id:"INFO_ENVOY_SUCCESS",title:"Equal Partnership",text:"The foreign kingdom accepts your terms. A profitable alliance is formed on equal footing.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"ALLIANCE",effects:{}}]},{id:"INFO_ENVOY_FAILURE",title:"Diplomatic Insult",text:"The envoy leaves in anger. Your overreach is seen as arrogance, damaging foreign relations.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"ISOLATION",effects:{}}]},{id:"INFO_LAND_SUCCESS",title:"Land Reform Success",text:"Despite noble resistance, your authority carries the day. Land is redistributed fairly, and the poor rejoice.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"REFORM",effects:{}}]},{id:"INFO_LAND_FAILURE",title:"Land Reform Disaster",text:"The nobles revolt against your reforms. Chaos ensues as farmers flee and the economy collapses.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"DISASTER",effects:{}}]},{id:"INFO_TRADITION_SUCCESS",title:"Tradition Abolished",text:"Your authority is sufficient. The harmful tradition ends, and a new era of progress begins.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"PROGRESS",effects:{}}]},{id:"INFO_TRADITION_FAILURE",title:"Tradition Defended",text:"The people reject your decree. You are branded a heretic, and the tradition continues stronger than ever.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"DEFEATED",effects:{}}]},{id:"INFO_PIRATE_SUCCESS",title:"Pirates Tamed",text:"The pirates serve you now. River trade is yours to control, bringing gold and security.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"COMMAND",effects:{}}]},{id:"INFO_PIRATE_FAILURE",title:"Pirates Raid",text:"The pirates scoff at your authority. They raid your docks and escape with your gold.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"LOSSES",effects:{gold:-15}}]},{id:"INFO_MARRIAGE_SUCCESS",title:"Marriage Sealed",text:"The alliance is formed on favorable terms. Wealth, troops, and prestige flow from the union.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"ALLIANCE",effects:{}}]},{id:"INFO_MARRIAGE_FAILURE",title:"Marriage Broken",text:"The family withdraws the offer, insulted by your demands. The alliance opportunity is lost.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"LOST",effects:{}}]},{id:"INFO_LOW_PLEA_SUCCESS",title:"Merchant Impressed",text:`The merchant sees potential in you. "Perhaps you're worth investing in after all," he says, handing over coins and words of support.`,advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"GRATEFUL",effects:{}}]},{id:"INFO_LOW_PLEA_FAILURE",title:"Merchant Dismisses You",text:`The merchant shakes his head. "You lack the standing I need. Come back when you're a real leader." He walks away.`,advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"HUMILIATED",effects:{}}]},{id:"INFO_LOW_GUARD_SUCCESS",title:"Guards Rallied",text:`Your words strike a chord. The guards stand straighter, remembering their oaths. "We'll stand with you, lord," their captain declares.`,advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"UNITED",effects:{}}]},{id:"INFO_LOW_GUARD_FAILURE",title:"Guards Desert",text:"Your speech falls flat. The guards exchange glances and begin walking away. Some leave the settlement entirely.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"ABANDONED",effects:{}}]},{id:"INFO_LOW_RESPECT_SUCCESS",title:"Respect Earned",text:"The villagers see your determination and courage. Slowly, they begin to believe in you again. You've turned a corner.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"RENEWED",effects:{}}]},{id:"INFO_LOW_RESPECT_FAILURE",title:"Respect Lost",text:"Your attempt to assert yourself backfires spectacularly. Villagers laugh openly, and some pack their belongings to leave.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"MOCKED",effects:{}}]},{id:"INFO_LOW_DEBT_SUCCESS",title:"Debt Reduced",text:"Your negotiating skill surprises the creditors. They agree to reduced terms, impressed by your resolve despite your circumstances.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"RELIEVED",effects:{}}]},{id:"INFO_LOW_DEBT_FAILURE",title:"Debt Enforced",text:"The creditors laugh at your weak position. They seize assets and spread word of your incompetence throughout the region.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"CRUSHED",effects:{}}]},{id:"INFO_TRAVELER_INVESTIGATED",title:"Investigation Success",text:"Your investigation reveals the traveler is indeed a respected scholar. Your cautious approach is seen as wise leadership.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"VINDICATED",effects:{}}]},{id:"INFO_TRAVELER_INVESTIGATION_FAILED",title:"Investigation Failed",text:"Your investigation found nothing, but the traveler is offended by your suspicion. Word spreads that you are paranoid and unwelcoming.",advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"EMBARRASSED",effects:{}}]},{id:"REMINDER_FARMSTEAD",title:"The Bailiff Urges: Housing",text:'Your bailiff steps forward with a worried expression: "My lord, our farmers are living in makeshift camps. The camps are a fire hazard and disease is spreading. We desperately need more farmsteads!"',advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"Understood",effects:{}}]},{id:"REMINDER_MARKETPLACE",title:"The Bailiff Suggests: Marketplace",text:'Your bailiff approaches you respectfully: "My lord, the settlement has grown beyond what informal trade can sustain. A proper marketplace would bring order to commerce and attract new merchants."',advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"Understood",effects:{}}]},{id:"REMINDER_BAKERY",title:"The Bailiff Suggests: Bakery",text:'Your bailiff raises a concern: "My lord, our growing population needs a reliable food supply. A bakery would not only feed our people but draw settlers who seek the comfort of fresh bread."',advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"Understood",effects:{}}]},{id:"REMINDER_BREWERY",title:"The Bailiff Suggests: Brewery",text:'Your bailiff clears his throat: "My lord, the workers toil hard and their morale suffers without proper leisure. A brewery would lift spirits and give them a reason to stay."',advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"Understood",effects:{}}]},{id:"REMINDER_FIREWOOD",title:"The Bailiff Warns: Firewood",text:'Your bailiff speaks with urgency: "My lord, without an organized firewood supply, people are collecting wood haphazardly. The fire risk is growing  one spark could burn down the entire settlement!"',advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"Understood",effects:{}}]},{id:"REMINDER_WELL",title:"The Bailiff Warns: Sanitation",text:'Your bailiff approaches with grave concern: "My lord, the people are drinking from stagnant ponds and muddy streams. Without a proper central well, disease will spread unchecked through our settlement."',advancesTick:!1,canTriggerRandomly:!1,portraitId:"advisor",options:[{text:"Understood",effects:{}}]}];function Lg(){const s=[];for(let u=1;u<=10;u++){const y=`CHAIN_FIRE_SLOT_${u}`;s.push({id:`FIRE_S${u}_START`,title:` Fire! (Slot ${u})`,text:"A fire has broken out in part of the settlement! Smoke rises and panic spreads among the villagers.",canTriggerRandomly:!1,advancesTick:!1,portraitId:"advisor",chainId:y,chainRole:"start",options:[{text:"Assess the situation",effects:{}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:`FIRE_S${u}_DECISION`,weight:1}]}]}),s.push({id:`FIRE_S${u}_DECISION`,title:` Fire Response (Slot ${u})`,text:"The fire rages on. You must decide how to respond before it spreads further.",canTriggerRandomly:!1,advancesTick:!1,portraitId:"advisor",chainId:y,chainRole:"member",options:[{text:"Send a bucket brigade",effects:{satisfaction:-5}},{text:"Let it burn, focus elsewhere",effects:{fireRisk:5}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:`FIRE_S${u}_ESCALATE`,weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:2,delayMaxTicks:4,candidates:[{requestId:`FIRE_S${u}_ESCALATE`,weight:1}]}]}),s.push({id:`FIRE_S${u}_ESCALATE`,title:` Fire Spreads (Slot ${u})`,text:"The fire has spread to nearby structures! The situation is becoming dire.",canTriggerRandomly:!1,advancesTick:!1,portraitId:"advisor",chainId:y,chainRole:"member",options:[{text:"Mobilize all hands",effects:{gold:-10,health:-2}},{text:"Salvage what you can",effects:{fireRisk:10}}],followUps:[{triggerOnOptionIndex:0,delayMinTicks:2,delayMaxTicks:3,candidates:[{requestId:`FIRE_S${u}_END`,weight:1}]},{triggerOnOptionIndex:1,delayMinTicks:2,delayMaxTicks:3,candidates:[{requestId:`FIRE_S${u}_END`,weight:1}]}]}),s.push({id:`FIRE_S${u}_END`,title:` Fire Resolved (Slot ${u})`,text:"The fire is finally under control. Now is the time to deal with the aftermath.",canTriggerRandomly:!1,advancesTick:!0,portraitId:"advisor",chainId:y,chainRole:"end",options:[{text:"Standard cleanup",effects:{fireRisk:-10}},{text:"Invest in prevention",effects:{fireRisk:-20,gold:-30}}]})}return s}const fl=Lg();function Ug(s){const y=[...ul,...dl,...Ot,...fl].find(c=>c.id===s);if(!y)return s;if(y.title)return y.title;if(y.text){const c=y.text.split(/[.!?]\s+/)[0].trim();return c.length>50?c.substring(0,47)+"...":c}return s}class dh{seed;constructor(u=Date.now()){this.seed=u%2147483647,this.seed<=0&&(this.seed+=2147483646)}next(){return this.seed=this.seed*16807%2147483647,(this.seed-1)/2147483646}nextInt(u){return Math.floor(this.next()*u)}setSeed(u){this.seed=u%2147483647,this.seed<=0&&(this.seed+=2147483646)}}let _i=new dh;function Hg(){_i=new dh(Date.now())}function Pt(){return _i.next()}function hn(s){if(s.length===0)return null;const u=s.reduce((I,g)=>I+g.weight,0);if(u<=0)return null;const y=_i.next()*u;let c=0;for(const I of s)if(c+=I.weight,y<c)return I;return s[s.length-1]}function ah(s,u){return s.authorityMin===void 0&&s.authorityMax===void 0?!0:!(s.authorityMin!==void 0&&u<s.authorityMin||s.authorityMax!==void 0&&u>s.authorityMax)}function ti(s,u,y){let c,I,g=0,b=[],N={},p={},T=null;if("tick"in s){if(c=s.stats,I=s.lastRequestId,g=s.tick,b=s.scheduledEvents||[],N=s.chainStatus||{},p=s.requestTriggerCounts||{},T=s,s.activeCombat){const B=s.activeCombat,V=B.round+1;let ue=`Your Forces: ${B.committedRemaining}
Enemy Forces: ${B.enemyRemaining}`;return B.lastRound&&(ue+=`

Last Round:
Your Losses: ${B.lastRound.playerLosses}
Enemy Losses: ${B.lastRound.enemyLosses}`),{id:`COMBAT_ROUND::${B.combatId}`,title:`Battle  Round ${V}`,text:ue,options:[{text:"Continue Fighting",effects:{}},{text:"Withdraw",effects:{}}],advancesTick:!1}}}else c=s,I=y;const x=B=>{if(B.maxTriggers!==void 0&&(p[B.id]||0)>=B.maxTriggers)return!1;if(B.chainId&&B.chainRole==="start"){const V=N[B.chainId];if(V&&V.active||V&&!V.active&&V.completedTick!==void 0&&B.chainRestartCooldownTicks!==void 0&&g-V.completedTick<B.chainRestartCooldownTicks)return!1}return!0},U=B=>T!==null&&!jg(T,B),k=b.filter(B=>B.targetTick<=g);if(k.length>0){const B=k.filter(oe=>oe.priority==="info"),V=k.filter(oe=>oe.priority==="normal"||oe.priority===void 0),ue=oe=>{oe.sort((F,te)=>F.scheduledAtTick===te.scheduledAtTick?F.targetTick-te.targetTick:F.scheduledAtTick-te.scheduledAtTick);for(const F of oe){if(F.requestId.startsWith("COMBAT_REPORT::"))try{const Q=F.requestId.split("::");if(!Q[2])throw new Error("Missing report data in combat report ID");const Ae=decodeURIComponent(Q[2]),Oe=JSON.parse(Ae);if(!Oe.outcome||!Oe.statDeltas)throw new Error("Invalid report data structure");let He="";Oe.outcome==="win"?He="Victory!":Oe.outcome==="withdraw"?He="Withdrawal":He="Defeat";const we=`Casualties:
You: ${Oe.playerLosses||0}
Enemy: ${Oe.enemyLosses||0}`,ze={gold:"Gold",satisfaction:"Satisfaction",health:"Health",fireRisk:"Fire Risk",farmers:"Farmers",landForces:"Land Forces"},Ve=[];for(const[$,he]of Object.entries(ze)){const fe=Oe.statDeltas[$];fe!==void 0&&fe!==0&&Ve.push(`${he}: ${fe>0?"+":""}${fe}`)}const M=Ve.length>0?`

Consequences:
${Ve.join(`
`)}`:"";return{id:F.requestId,title:"Battle Report",text:`${He}

${we}${M}`,options:[{text:"Continue",effects:{}}],advancesTick:!1}}catch(Q){return console.error("Failed to parse combat report data:",Q),{id:F.requestId,title:"Battle Report",text:"The battle has ended.",options:[{text:"Continue",effects:{}}],advancesTick:!1}}const te=[...ul,...dl,...Ot,...fl].find(Q=>Q.id===F.requestId);if(te){if(te.maxTriggers!==void 0&&(p[te.id]||0)>=te.maxTriggers||U(te))continue;return te}}return null};if(B.length>0){const oe=ue(B);if(oe)return oe}if(V.length>0){const oe=ue(V);if(oe)return oe}}const X=()=>{if(c.health<30){const B=Ot.find(V=>V.id==="EVT_CRISIS_DISEASE");if(B&&B.id!==I)return B}if(c.satisfaction<30){const B=Ot.find(V=>V.id==="EVT_CRISIS_UNREST");if(B&&B.id!==I)return B}return null},Y=T&&T.scheduledCombats?T.scheduledCombats.filter(B=>B.dueTick<=g):[];if(Y.length>0){const B=X();if(B)return B;Y.sort((F,te)=>F.scheduledAtTick-te.scheduledAtTick);const V=Y[0];console.log("[Combat Selection] Selected combat for start:",{combatId:V.combatId,scheduledAtTick:V.scheduledAtTick,dueTick:V.dueTick,committedForces:V.committedForces,totalDueCombats:Y.length});const ue=Ug(V.originRequestId);return{id:`COMBAT_START::${V.combatId}`,title:"Battle Begins",text:`Your forces are ready. The battle is about to commence!

This is the battle from: ${ue}`,options:[{text:"Begin Battle",effects:{}}],advancesTick:!1}}const P=X();if(P)return P;const Ee=["EVT_CRISIS_FIRE","EVT_CRISIS_DISEASE","EVT_CRISIS_UNREST"],se=Ot.filter(B=>B.id!==I&&!Ee.includes(B.id)&&B.canTriggerRandomly!==!1&&x(B)&&!U(B)&&ah(B,c.authority));if(se.length>0)return se[_i.nextInt(se.length)];const Ie=Ot.filter(B=>!Ee.includes(B.id)&&B.canTriggerRandomly!==!1&&x(B)&&!U(B)&&ah(B,c.authority));if(Ie.length===0){console.warn("[pickNextRequest] No eligible events found with strict filters. Using emergency fallback.");const B=Ot.filter(V=>!Ee.includes(V.id));if(B.length>0)return console.warn("[pickNextRequest] Returning non-crisis event from emergency fallback:",B.map(V=>V.id)),B[_i.nextInt(B.length)];if(Ot.length>0)return console.warn("[pickNextRequest] No non-crisis events available. Returning any event from emergency fallback."),Ot[_i.nextInt(Ot.length)];throw new Error("No event requests available in the game")}return Ie[_i.nextInt(Ie.length)]}const $t=[{id:"farmstead",displayName:"Farmstead",icon:"",description:"A sturdy homestead that houses farmers. Without enough farmsteads, excess population resorts to makeshift camps.",unlockThreshold:0,cost:10,populationPerBuilding:20,benefitId:"farmstead",benefitDescription:"Houses farmers",reminderRequestId:"REMINDER_FARMSTEAD",reminderDelayTicks:8,sortOrder:0},{id:"marketplace",displayName:"Marketplace",icon:"",description:"A bustling center of trade where goods and gossip flow freely.",unlockThreshold:30,cost:20,populationPerBuilding:100,benefitId:"marketplace",benefitDescription:'Unlocks event "Market Day"',unlockToken:"building:marketplace",firstBuildInfoRequestId:"INFO_NEED_MARKETPLACE",reminderRequestId:"REMINDER_MARKETPLACE",reminderDelayTicks:10,sortOrder:1},{id:"bakery",displayName:"Bakery",icon:"",description:"Fresh bread feeds the soul and draws new settlers to the village.",unlockThreshold:60,cost:40,populationPerBuilding:120,benefitId:"bakery",benefitDescription:"10% chance per tick for +1 farmer growth",firstBuildInfoRequestId:"INFO_NEED_BREAD",reminderRequestId:"REMINDER_BAKERY",reminderDelayTicks:10,sortOrder:2},{id:"brewery",displayName:"Brewery",icon:"",description:"A place where fine ale is brewed, lifting spirits and fostering camaraderie.",unlockThreshold:100,cost:70,populationPerBuilding:150,benefitId:"brewery",benefitDescription:'Unlocks event "Tavern After Work"',unlockToken:"building:brewery",firstBuildInfoRequestId:"INFO_NEED_BEER",reminderRequestId:"REMINDER_BREWERY",reminderDelayTicks:12,sortOrder:3},{id:"firewood",displayName:"Firewood Supply",icon:"",description:"An organized supply of firewood reduces the risk of uncontrolled blazes.",unlockThreshold:170,cost:200,populationPerBuilding:180,benefitId:"firewood",benefitDescription:"25% chance to halve fire risk increases",firstBuildInfoRequestId:"INFO_NEED_FIREWOOD",reminderRequestId:"REMINDER_FIREWOOD",reminderDelayTicks:12,sortOrder:4},{id:"well",displayName:"Central Well",icon:"",description:"Clean water from a deep well keeps disease at bay and the population healthy.",unlockThreshold:250,cost:300,populationPerBuilding:200,benefitId:"well",benefitDescription:"50% chance for +1 health on health gains",firstBuildInfoRequestId:"INFO_NEED_WELL",reminderRequestId:"REMINDER_WELL",reminderDelayTicks:15,sortOrder:5}];function Ls(s,u){return(s[u]?.buildingCount??0)>0}function ii(s,u){return u<s.unlockThreshold?0:s.populationPerBuilding?1+Math.floor((u-s.unlockThreshold)/s.populationPerBuilding):1}function gn(s){return $t.find(u=>u.id===s)}function wg(){const s={};for(const u of $t)s[u.id]={buildingCount:u.id==="farmstead"?2:0,onFireCount:0,destroyedCount:0,onStrikeCount:0,reminderScheduled:!1,reminderCooldownUntil:0};return s}function mn(s){return Math.max(0,s.buildingCount-s.onFireCount-s.destroyedCount-s.onStrikeCount)}function fh(s){return s.onFireCount>0||s.destroyedCount>0||s.onStrikeCount>0}const Bg=(s,u,y,c)=>{const I={...c},g=[];if(!Ls(s.buildingTracking,"firewood"))return{delta:I,extraChanges:g};if(I.fireRisk&&I.fireRisk>0&&Math.random()<.25){const b=I.fireRisk,N=Math.floor(b/2),p=b-N;I.fireRisk=N,g.push({stat:"fireRisk",amount:-p,source:"building:firewood",note:`Firewood supply reduced fire risk increase from ${b} to ${N}`})}return{delta:I,extraChanges:g}},qg=(s,u,y,c)=>{const I={...c},g=[];return Ls(s.buildingTracking,"well")?(I.health&&I.health>0&&Math.random()<.5&&(I.health=I.health+1,g.push({stat:"health",amount:1,source:"building:well",note:"Well provided additional health benefit"})),{delta:I,extraChanges:g}):{delta:I,extraChanges:g}},Fg=[Bg,qg];function Gg(){return Array.from({length:10},(s,u)=>({slotIndex:u+1,active:!1}))}const ba={baseOffset:-10,factor:.5,chanceMin:0,chanceMax:40,maxConcurrentChainsByRisk:[{minRisk:0,maxRisk:30,maxChains:1},{minRisk:31,maxRisk:60,maxChains:2},{minRisk:61,maxRisk:80,maxChains:3},{minRisk:81,maxRisk:100,maxChains:5}],spreadChancePerBurningBuilding:.1,destroyChancePerBurningBuilding:.08,repairCostPercentOfBuildCost:.75,extinguishCost:{gold:-15,satisfaction:-3},tierRules:[{tier:"minor",minFireRisk:0,maxFireRisk:40,weight:6,initialOnFireMin:1,initialOnFireMax:1},{tier:"major",minFireRisk:30,maxFireRisk:75,weight:3,initialOnFireMin:1,initialOnFireMax:2},{tier:"catastrophic",minFireRisk:60,maxFireRisk:100,weight:1,initialOnFireMin:2,initialOnFireMax:3}]},ih={tick:0,stats:{gold:50,satisfaction:60,health:60,fireRisk:20,farmers:20,landForces:5,authority:20},buildingTracking:wg(),newlyUnlockedBuilding:null,currentRequestId:"",lastRequestId:"",log:[],gameOver:!1,scheduledEvents:[],chainStatus:{},requestTriggerCounts:{},unlocks:{},scheduledCombats:[],pendingAuthorityChecks:[],fire:{slots:Gg(),pendingInfoQueue:[]}};function Ds(s,u,y){return Math.max(u,Math.min(y,s))}function Yg(s){const y=[...ul,...dl,...Ot,...fl].find(c=>c.id===s);if(!y)return s;if(y.title)return y.title;if(y.text){const c=y.text.split(/[.!?]\s+/)[0].trim();return c.length>50?c.substring(0,47)+"...":c}return s}function Ht(s){return{...s,satisfaction:Ds(s.satisfaction,0,100),health:Ds(s.health,0,100),fireRisk:Ds(s.fireRisk,0,100),gold:Math.max(-50,s.gold),farmers:Math.max(0,s.farmers),landForces:Math.max(0,s.landForces),authority:Ds(s.authority,0,999.999)}}function ai(s,u){const y={...s};return u.gold!==void 0&&(y.gold+=u.gold),u.satisfaction!==void 0&&(y.satisfaction+=u.satisfaction),u.health!==void 0&&(y.health+=u.health),u.fireRisk!==void 0&&(y.fireRisk+=u.fireRisk),u.farmers!==void 0&&(y.farmers+=u.farmers),u.landForces!==void 0&&(y.landForces+=u.landForces),u.authority!==void 0&&(y.authority+=u.authority),y}function Pr(s,u,y,c=[]){let g={...u.options[y].effects};const b=[];for(const x of c){const U=x(s,u,y,g,b);g=U.delta,b.push(...U.extraChanges)}const N=ai(s.stats,g),p=["gold","satisfaction","health","fireRisk","farmers","landForces","authority"];for(const x of p)g[x]!==void 0&&g[x]!==0&&b.push({stat:x,amount:g[x],source:"base"});return{stats:Ht(N),appliedChanges:b}}function zg(s,u){return s.unlocks[u]===!0}function jg(s,u){return!u.requires||u.requires.length===0?!0:u.requires.every(y=>zg(s,y))}function nh(s,u){const y={...u};for(const c of $t)c.unlockToken&&(Ls(s,c.id)?y[c.unlockToken]=!0:delete y[c.unlockToken]);return y}function Vg(s,u){for(const y of $t){const c=s>=y.unlockThreshold,I=u>=y.unlockThreshold;if(!c&&I)return y.id}return null}function Kg(s,u){const y=u.farmstead,I=(y?mn(y):0)*20,g=Math.max(0,s.farmers-I);if(g===0)return{stats:s,changes:[]};let b,N,p;g<=10?(b=-1,N=-1,p=1):g<=25?(b=-2,N=-2,p=2):(b=-3,N=-3,p=3);const T={...s,health:s.health+b,satisfaction:s.satisfaction+N,fireRisk:s.fireRisk+p},x=[{stat:"health",amount:b,source:"overcrowding",note:`${g} farmers in makeshift camps`},{stat:"satisfaction",amount:N,source:"overcrowding",note:`${g} farmers in makeshift camps`},{stat:"fireRisk",amount:p,source:"overcrowding",note:`${g} farmers in makeshift camps`}];return{stats:T,changes:x}}function Xg(s,u,y){const c={},I={},g=$t.filter(p=>(s[p.id]?.onFireCount??0)>0);if(g.length===0)return u;for(const p of g){const T=s[p.id];if(!T)continue;const x=T.onFireCount;for(let U=0;U<x;U++){if(Pt()<y.spreadChancePerBurningBuilding){const k=$t.filter(X=>{const Y=s[X.id];return Y&&mn(Y)>0});if(k.length>0){const X=Math.floor(Pt()*k.length),Y=k[X],P=s[Y.id];P&&P.onFireCount+P.destroyedCount+P.onStrikeCount<P.buildingCount&&(s[Y.id]={...P,onFireCount:P.onFireCount+1},c[Y.id]=(c[Y.id]||0)+1)}}if(Pt()<y.destroyChancePerBurningBuilding){const k=s[p.id];k&&k.onFireCount>0&&(s[p.id]={...k,onFireCount:k.onFireCount-1,destroyedCount:k.destroyedCount+1},I[p.id]=(I[p.id]||0)+1)}}}const b=Object.keys(c).length>0,N=Object.keys(I).length>0;return b||N?{...u,pendingInfoQueue:[...u.pendingInfoQueue,{type:"SPREAD_OR_DESTROY",newOnFireByBuildingId:b?c:void 0,newDestroyedByBuildingId:N?I:void 0}]}:u}function Qg(s,u,y,c,I,g){const b=u.slots.filter(Q=>Q.active).length,N=c.maxConcurrentChainsByRisk.find(Q=>I>=Q.minRisk&&I<=Q.maxRisk),p=N?N.maxChains:0;if(b>=p)return{fireState:u,scheduledEvents:y};const T=u.slots.find(Q=>!Q.active);if(!T)return{fireState:u,scheduledEvents:y};const x=$t.filter(Q=>{const Ae=s[Q.id];return Ae&&mn(Ae)>0});if(x.length===0)return{fireState:u,scheduledEvents:y};const U=Math.max(c.chanceMin,Math.min(c.chanceMax,(I+c.baseOffset)*c.factor));if(Pt()*100>=U)return{fireState:u,scheduledEvents:y};const X=c.tierRules.filter(Q=>I>=Q.minFireRisk&&I<=Q.maxFireRisk);if(X.length===0)return{fireState:u,scheduledEvents:y};const Y=hn(X);if(!Y)return{fireState:u,scheduledEvents:y};const P=x.map(Q=>({def:Q,weight:mn(s[Q.id])})),Ee=hn(P);if(!Ee)return{fireState:u,scheduledEvents:y};const se=Ee.def,Ie=s[se.id],B=mn(Ie),V=Y.initialOnFireMax-Y.initialOnFireMin+1;let ue=Y.initialOnFireMin+Math.floor(Pt()*V);if(ue=Math.min(ue,B),ue<=0)return{fireState:u,scheduledEvents:y};s[se.id]={...Ie,onFireCount:Ie.onFireCount+ue};const oe=u.slots.map(Q=>Q.slotIndex===T.slotIndex?{...Q,active:!0,tier:Y.tier,targetBuildingId:se.id,startedTick:g,initialOnFireApplied:ue,abortedByManualExtinguish:!1}:Q),F=`FIRE_S${T.slotIndex}_START`,te=[...y,{targetTick:g+1,requestId:F,scheduledAtTick:g,priority:"normal"}];return{fireState:{...u,slots:oe},scheduledEvents:te}}function Wg(s,u,y,c){const I={...y},g=[...c];for(const b of $t){if(!b.reminderRequestId)continue;const N=I[b.id];if(!N||u.farmers<b.unlockThreshold)continue;const p=ii(b,u.farmers);if(N.buildingCount>=p){I[b.id]={...N,reminderScheduled:!1};continue}if(N.lastRequirementTick===void 0){I[b.id]={...N,lastRequirementTick:s};continue}N.reminderScheduled||s<N.reminderCooldownUntil||s-N.lastRequirementTick<b.reminderDelayTicks||(g.push({targetTick:s+1,requestId:b.reminderRequestId,scheduledAtTick:s,priority:"normal"}),I[b.id]={...N,reminderScheduled:!0,reminderCooldownUntil:s+15})}return{buildingTracking:I,scheduledEvents:g}}function Zg(s){const u=Math.floor(.1*(s.farmers*((s.satisfaction-10)/100))),y=Math.floor((s.health-25)/20);return{...s,gold:s.gold+u,farmers:s.farmers+y}}function fn(s,u,y,c,I,g,b){const N={};return g.gold!==I.gold&&(N.gold=g.gold-I.gold),g.satisfaction!==I.satisfaction&&(N.satisfaction=g.satisfaction-I.satisfaction),g.health!==I.health&&(N.health=g.health-I.health),g.fireRisk!==I.fireRisk&&(N.fireRisk=g.fireRisk-I.fireRisk),g.farmers!==I.farmers&&(N.farmers=g.farmers-I.farmers),g.landForces!==I.landForces&&(N.landForces=g.landForces-I.landForces),g.authority!==I.authority&&(N.authority=g.authority-I.authority),{tick:s,requestId:u,optionText:y,source:c,deltas:N,appliedChanges:b}}function Jg(s,u,y,c,I){const g=s.map(N=>({...N})),b=c>0?y/c:0;for(const N of u){const p=g.find(x=>x.requestId===N.targetRequestId);if(!p){console.warn(`[Authority Boost] Target not found in candidates: ${N.targetRequestId}`);continue}let T=0;switch(N.boostType){case"linear":T=b*N.boostValue;break;case"threshold":{T=y>=I?N.boostValue:0;break}case"stepped":{const U=1/Math.max(1,N.steps??3);T=Math.floor(b/U)*N.boostValue;break}default:console.warn(`[Authority Boost] Unknown boost type: ${N.boostType}`);continue}p.weight=p.weight+Math.max(0,T),T>0&&console.log(`[Authority Boost] ${N.targetRequestId}: +${T.toFixed(2)} weight (${N.boostType}, committed: ${y}/${c})`)}return g}function Pg(s,u,y,c,I,g){const b=[...I];if(!s.followUps)return b;const N=s.followUps.filter(p=>p.triggerOnOptionIndex===y);for(const p of N){let T=p.candidates;const x=new Set;g!==void 0&&g>0&&u.authorityCheck?.followUpBoosts&&u.authorityCheck.followUpBoosts.length>0&&(u.authorityCheck.followUpBoosts.forEach(k=>{x.add(k.targetRequestId)}),T=Jg(p.candidates,u.authorityCheck.followUpBoosts,g,u.authorityCheck.maxCommit,u.authorityCheck.threshold??0),console.log(`[Follow-Up Scheduling] Authority commit of ${g} applied boosts to follow-up candidates`));const U=hn(T);if(U){const k=p.delayMaxTicks-p.delayMinTicks,X=p.delayMinTicks+Math.floor(Pt()*(k+1)),Y=x.has(U.requestId);b.push({targetTick:c+1+X,requestId:U.requestId,scheduledAtTick:c,authorityCommitContext:g!==void 0&&g>0&&Y?{committed:g,originRequestId:s.id}:void 0})}}return b}function lh(s,u,y){const c=s.findIndex(I=>I.requestId===u&&I.targetTick<=y);return c>=0?[...s.slice(0,c),...s.slice(c+1)]:s}function sh(s,u,y,c,I,g){const b=[...g],N=s.initialCommittedForces-s.committedRemaining,p=s.initialEnemyForces-s.enemyRemaining,T={outcome:u,playerLosses:N,enemyLosses:p,statDeltas:{gold:c.gold-y.gold,satisfaction:c.satisfaction-y.satisfaction,health:c.health-y.health,fireRisk:c.fireRisk-y.fireRisk,farmers:c.farmers-y.farmers,landForces:c.landForces-y.landForces}},x=`COMBAT_REPORT::${s.combatId}::${encodeURIComponent(JSON.stringify(T))}`;return b.push({targetTick:I,requestId:x,scheduledAtTick:I,priority:"info"}),b}function ks(s,u,y){const c=s.scheduledCombats.reduce((N,p)=>N+p.committedForces,0),I=s.activeCombat?s.activeCombat.committedRemaining:0,g=s.stats.landForces+c+I;let b;if(y){const N=y.scheduledCombats.reduce((T,x)=>T+x.committedForces,0),p=y.activeCombat?y.activeCombat.committedRemaining:0;b=y.stats.landForces+N+p}if(console.log(`[Force Accounting] ${u}:`,{available:s.stats.landForces,reservedInScheduled:c,reservedInActive:I,totalForces:g,previousTotal:b,delta:b!==void 0?g-b:"N/A",scheduledCombatsCount:s.scheduledCombats.length,hasActiveCombat:!!s.activeCombat}),s.stats.landForces<0){const N=`[Force Accounting ERROR] Negative landForces detected at ${u}: ${s.stats.landForces}`;console.error(N),console.trace("Negative landForces stack trace:")}if(b!==void 0&&Math.abs(g-b)>.1){const N=g-b;N>0&&console.warn(`[Force Accounting WARNING] Total forces INCREASED unexpectedly at ${u}. Previous: ${b}, Current: ${g}, Delta: ${N}`)}}function $g(s){const u=s.config,y=s.committed;if(!!!(u.onSuccess||u.onFailure))return{success:!0,committed:y,refunded:0,totalLoss:0,appliedEffects:void 0,feedbackRequestId:void 0};if(u.minSuccessChance===void 0||u.maxSuccessChance===void 0){const Y=[u.minSuccessChance===void 0?"minSuccessChance":"",u.maxSuccessChance===void 0?"maxSuccessChance":""].filter(Boolean).join(", ");console.error(`Authority check missing ${Y}:`,s.originRequestId)}const I=(u.minSuccessChance??50)/100,g=(u.maxSuccessChance??50)/100,b=u.maxCommit>0?y/u.maxCommit:0,N=I+b*(g-I),p=Math.random()<N,T=p?u.refundOnSuccessPercent??100:0,x=Math.floor(y*T/100);let U=y-x;if(!p){const Y=u.extraLossOnFailure??0;U+=Y}const k=p?u.onSuccess:u.onFailure,X=p?u.successFeedbackRequestId:u.failureFeedbackRequestId;return{success:p,committed:y,refunded:x,totalLoss:U,appliedEffects:k,feedbackRequestId:X}}function ey(s,u){if(u.type==="CHOOSE_OPTION"){if(s.gameOver)return s;if(s.currentRequestId.startsWith("COMBAT_START::")){const v=s.currentRequestId.replace("COMBAT_START::","");ks(s,`Before Combat Start (${v})`);const A=s.scheduledCombats.find(de=>de.combatId===v);if(!A)return console.error("Combat start failed: scheduled combat not found for ID:",v,". Maintaining current state."),s;console.log(`[Combat Start] Starting combat ${v}:`,{committedForces:A.committedForces,enemyForces:A.enemyForces,dueTick:A.dueTick,scheduledAtTick:A.scheduledAtTick});const z={combatId:A.combatId,originRequestId:A.originRequestId,enemyRemaining:A.enemyForces,committedRemaining:A.committedForces,initialEnemyForces:A.enemyForces,initialCommittedForces:A.committedForces,round:0,onWin:A.onWin,onLose:A.onLose,followUpsOnWin:A.followUpsOnWin,followUpsOnLose:A.followUpsOnLose},Z=s.scheduledCombats.filter(de=>de.combatId!==v);Z.length!==s.scheduledCombats.length-1&&console.error(`[Combat Start ERROR] Failed to remove scheduled combat ${v}. Before: ${s.scheduledCombats.length}, After: ${Z.length}`);const ae=ti({...s,tick:s.tick,activeCombat:z,scheduledCombats:Z}),ve={...s,currentRequestId:ae.id,lastRequestId:s.currentRequestId,activeCombat:z,scheduledCombats:Z};return ks(ve,`After Combat Start (${v})`,s),ve}if(s.currentRequestId.startsWith("COMBAT_REPORT::")){const v=lh(s.scheduledEvents,s.currentRequestId,s.tick),A=ti({...s,tick:s.tick,scheduledEvents:v});return{...s,tick:s.tick,currentRequestId:A.id,lastRequestId:s.currentRequestId,scheduledEvents:v}}if(s.currentRequestId.startsWith("COMBAT_ROUND::")){const v=s.currentRequestId.replace("COMBAT_ROUND::","");if(!s.activeCombat||s.activeCombat.combatId!==v)return console.error("Combat round failed: no matching active combat for ID:",v,". Maintaining current state."),s;const A=s.activeCombat;if(u.optionIndex===1){console.log(`[Combat Withdraw] Combat ${A.combatId}:`,{committedRemaining:A.committedRemaining,returningForces:A.committedRemaining});const nt={...s.stats};let Se={...s.stats},Be=[...s.scheduledEvents];if(A.committedRemaining>0&&(Se.landForces+=A.committedRemaining,console.log(`[Combat Withdraw] Returned ${A.committedRemaining} forces to landForces. New total: ${Se.landForces}`)),A.onLose&&(Se=ai(Se,A.onLose)),Se=Ht(Se),A.followUpsOnLose)for(const ea of A.followUpsOnLose){const ft=hn(ea.candidates);if(ft){const ht=ea.delayMaxTicks-ea.delayMinTicks,Bt=ea.delayMinTicks+Math.floor(Pt()*(ht+1));Be.push({targetTick:s.tick+Bt,requestId:ft.requestId,scheduledAtTick:s.tick})}}Be=sh(A,"withdraw",nt,Se,s.tick,Be);const wt=ti({...s,tick:s.tick,stats:Se,activeCombat:void 0,scheduledEvents:Be}),la={...s,tick:s.tick,stats:Se,currentRequestId:wt.id,lastRequestId:s.currentRequestId,activeCombat:void 0,scheduledEvents:Be};return ks(la,`After Combat Withdraw (${A.combatId})`,s),la}const z=Math.min(A.committedRemaining,A.enemyRemaining);let Z=0,ae=0;for(let nt=0;nt<z;nt++){const Se=Math.floor(Pt()*6)+1,Be=Math.floor(Pt()*6)+1;Se>Be?ae++:Be>Se&&Z++}const ve=Math.max(0,A.committedRemaining-Z),de=Math.max(0,A.enemyRemaining-ae);let Tt=!1,Et=!1;if(ve<=0&&de<=0||ve<=0?(Tt=!0,Et=!1):de<=0&&(Tt=!0,Et=!0),Tt){const nt={...s.stats};let Se={...s.stats},Be=[...s.scheduledEvents];const wt={...A,committedRemaining:ve,enemyRemaining:de};if(Et){const ft=ve;if(Se.landForces+=ft,console.log(`[Combat End - WIN] Combat ${A.combatId}:`,{survivorsReturned:ft,initialCommittedForces:A.initialCommittedForces,playerLosses:A.initialCommittedForces-ft,enemyLosses:A.initialEnemyForces,newLandForces:Se.landForces}),A.onWin&&(Se=ai(Se,A.onWin)),A.followUpsOnWin)for(const ht of A.followUpsOnWin){const Bt=hn(ht.candidates);if(Bt){const ua=ht.delayMaxTicks-ht.delayMinTicks,Ii=ht.delayMinTicks+Math.floor(Pt()*(ua+1));Be.push({targetTick:s.tick+Ii,requestId:Bt.requestId,scheduledAtTick:s.tick})}}}else if(console.log(`[Combat End - LOSE] Combat ${A.combatId}:`,{survivorsReturned:0,initialCommittedForces:A.initialCommittedForces,playerLosses:A.initialCommittedForces,enemyLosses:A.initialEnemyForces-de}),A.onLose&&(Se=ai(Se,A.onLose)),A.followUpsOnLose)for(const ft of A.followUpsOnLose){const ht=hn(ft.candidates);if(ht){const Bt=ft.delayMaxTicks-ft.delayMinTicks,ua=ft.delayMinTicks+Math.floor(Pt()*(Bt+1));Be.push({targetTick:s.tick+ua,requestId:ht.requestId,scheduledAtTick:s.tick})}}Se=Ht(Se),Be=sh(wt,Et?"win":"lose",nt,Se,s.tick,Be);const la=ti({...s,tick:s.tick,stats:Se,activeCombat:void 0,scheduledEvents:Be}),ea={...s,tick:s.tick,stats:Se,currentRequestId:la.id,lastRequestId:s.currentRequestId,activeCombat:void 0,scheduledEvents:Be};return ks(ea,`After Combat End (${A.combatId})`,s),ea}else{const nt={...A,committedRemaining:ve,enemyRemaining:de,round:A.round+1,lastRound:{playerLosses:Z,enemyLosses:ae}},Se=ti({...s,tick:s.tick,activeCombat:nt});return{...s,tick:s.tick,currentRequestId:Se.id,lastRequestId:s.currentRequestId,activeCombat:nt}}}const g=[...ul,...dl,...Ot,...fl].find(v=>v.id===s.currentRequestId);if(!g)return console.error("Current request not found:",s.currentRequestId),s;const b=g.options[u.optionIndex];if(!b)return console.error("Invalid option index:",u.optionIndex),s;const N={...s.stats},p=[],T=[...s.scheduledCombats];let x={...s.stats},U=[];const X=Ot.some(v=>v.id===s.currentRequestId)?Fg:[];if(g.combat&&u.optionIndex===0){const v=u.combatCommit;if(!v||v<1||v>s.stats.landForces)return console.error("Invalid combatCommit:",v,"Available forces:",s.stats.landForces),s;const A=s.stats.landForces-v,{prepDelayMinTicks:z,prepDelayMaxTicks:Z}=g.combat,ae=Z-z,ve=z+Math.floor(Pt()*(ae+1)),de=s.tick+ve,Et={combatId:`${g.id}-${s.tick}-${Date.now()}`,originRequestId:g.id,dueTick:de,scheduledAtTick:s.tick,enemyForces:g.combat.enemyForces,committedForces:v,onWin:g.combat.onWin,onLose:g.combat.onLose,followUpsOnWin:g.combat.followUpsOnWin,followUpsOnLose:g.combat.followUpsOnLose};T.push(Et),p.push({tick:s.tick,requestId:g.id,optionText:b.text,source:"Combat Commit",deltas:{landForces:-v}});const nt=Pr(s,g,u.optionIndex,X);x={...nt.stats,landForces:A},U=nt.appliedChanges}else if(b.authorityCheck&&u.authorityCommit!==void 0){const v=b.authorityCheck,A=u.authorityCommit;if(A<v.minCommit||A>v.maxCommit||A>s.stats.authority)return console.error("Invalid authorityCommit:",A,"Range:",v.minCommit,"-",v.maxCommit,"Available:",s.stats.authority),s;const z=s.stats.authority-A,ae={checkId:`${g.id}-${s.tick}-${Date.now()}`,initiatedTick:s.tick,resolveTick:s.tick+1,originRequestId:g.id,optionIndex:u.optionIndex,committed:A,config:v},ve=[...s.pendingAuthorityChecks,ae],de=Pr(s,g,u.optionIndex,X);x={...de.stats,authority:z},U=de.appliedChanges,s={...s,pendingAuthorityChecks:ve}}else{const v=Pr(s,g,u.optionIndex,X);x=v.stats,U=v.appliedChanges}const Y=nh(s.buildingTracking,s.unlocks),P={...s.chainStatus},Ee={...s.requestTriggerCounts};Ee[s.currentRequestId]=(Ee[s.currentRequestId]||0)+1,g.chainId&&g.chainRole&&(g.chainRole==="start"?P[g.chainId]={active:!0}:g.chainRole==="end"&&(P[g.chainId]={active:!1,completedTick:s.tick}));let se=s.buildingTracking,Ie=s.fire;const B=s.currentRequestId.match(/^FIRE_S(\d+)_END$/);if(B){const v=parseInt(B[1],10),A=s.fire.slots.find(z=>z.slotIndex===v);if(A&&A.active&&A.targetBuildingId&&A.initialOnFireApplied){const z={...s.buildingTracking},Z=z[A.targetBuildingId];if(Z){const ae=Math.min(Z.onFireCount,A.initialOnFireApplied);z[A.targetBuildingId]={...Z,onFireCount:Z.onFireCount-ae}}se=z,Ie={...s.fire,slots:s.fire.slots.map(ae=>ae.slotIndex===v?{slotIndex:v,active:!1}:ae)}}}if(!(g.combat&&u.optionIndex===0)){const v=U.filter(z=>z.source.startsWith("need:")),A=fn(s.tick,s.currentRequestId,b.text,"Request Decision",N,x,v.length>0?v:void 0);Object.keys(A.deltas).length>0&&p.push(A)}let V=Pg(g,b,u.optionIndex,s.tick,s.scheduledEvents,u.authorityCommit);if(V=lh(V,s.currentRequestId,s.tick),x.gold<=-50)return{tick:s.tick+1,stats:x,buildingTracking:se,newlyUnlockedBuilding:null,currentRequestId:s.currentRequestId,lastRequestId:s.currentRequestId,log:[...s.log,...p],gameOver:!0,gameOverReason:"Bankruptcy! Your gold has reached -50 or below.",scheduledEvents:V,chainStatus:P,requestTriggerCounts:Ee,unlocks:Y,scheduledCombats:T,pendingAuthorityChecks:s.pendingAuthorityChecks,fire:Ie};if(g.advancesTick===!1){const v=ti({tick:s.tick,stats:x,buildingTracking:se,newlyUnlockedBuilding:null,currentRequestId:s.currentRequestId,lastRequestId:s.currentRequestId,log:s.log,gameOver:!1,scheduledEvents:V,chainStatus:P,requestTriggerCounts:Ee,unlocks:Y,scheduledCombats:T,pendingAuthorityChecks:s.pendingAuthorityChecks,fire:Ie});return{tick:s.tick,stats:x,buildingTracking:se,newlyUnlockedBuilding:null,currentRequestId:v.id,lastRequestId:s.currentRequestId,log:[...s.log,...p],gameOver:!1,scheduledEvents:V,chainStatus:P,requestTriggerCounts:Ee,unlocks:Y,scheduledCombats:T,pendingAuthorityChecks:s.pendingAuthorityChecks,fire:Ie}}const ue={...x},oe=x.farmers;x=Zg(x),x=Ht(x);const F=x.farmers,te=Vg(oe,F),Q=x.gold-ue.gold,Ae=x.farmers-ue.farmers;if(Q!==0&&p.push(fn(s.tick,s.currentRequestId,"","Tax Income",ue,{...ue,gold:x.gold})),Ae!==0&&p.push(fn(s.tick,s.currentRequestId,"","Population Growth",{...ue,gold:x.gold},x)),Ls(se,"bakery")&&Math.random()<.1){const v={...x};if(x.farmers+=1,x=Ht(x),x.farmers>v.farmers){const A={stat:"farmers",amount:1,source:"building:bakery",note:"Bakery boosted population growth"};p.push(fn(s.tick,s.currentRequestId,"","Population Growth",v,x,[A]))}}const Oe={...x},He=Kg(x,se);x=Ht(He.stats),He.changes.length>0&&p.push(fn(s.tick,s.currentRequestId,"","Overcrowding",Oe,x,He.changes));let we={...se};if(te){const v=we[te];v&&v.unlockedAtTick===void 0&&(we[te]={...v,unlockedAtTick:s.tick+1})}for(const v of $t){const A=we[v.id];if(!A)continue;const z=ii(v,oe),Z=ii(v,F);Z>z&&Z>A.buildingCount&&(we[v.id]={...A,lastRequirementTick:s.tick+1})}let ze=Xg(we,Ie,ba);const Ve=Qg(we,ze,V,ba,x.fireRisk,s.tick);if(ze=Ve.fireState,V=Ve.scheduledEvents,x.gold<=-50)return{tick:s.tick+1,stats:x,buildingTracking:we,newlyUnlockedBuilding:te,currentRequestId:s.currentRequestId,lastRequestId:s.currentRequestId,log:[...s.log,...p],gameOver:!0,gameOverReason:"Bankruptcy! Your gold has reached -50 or below.",scheduledEvents:V,chainStatus:P,requestTriggerCounts:Ee,unlocks:Y,scheduledCombats:T,pendingAuthorityChecks:s.pendingAuthorityChecks,fire:ze};let M=[...s.pendingAuthorityChecks];const q=s.tick+1,$=M.filter(v=>v.resolveTick===q);for(const v of $){const A=$g(v);if(A.refunded>0&&(x.authority+=A.refunded,x=Ht(x)),A.appliedEffects&&(x=Ht(ai(x,A.appliedEffects))),A.feedbackRequestId){const z={targetTick:q,requestId:A.feedbackRequestId,scheduledAtTick:s.tick,priority:"normal"};V.push(z)}M=M.filter(z=>z.checkId!==v.checkId)}const he=Wg(s.tick+1,x,we,V);if(we=he.buildingTracking,V=he.scheduledEvents,ze.pendingInfoQueue.length>0){for(const v of ze.pendingInfoQueue){let A;if(v.type==="SPREAD_OR_DESTROY"){const z={newOnFireByBuildingId:v.newOnFireByBuildingId||{},newDestroyedByBuildingId:v.newDestroyedByBuildingId||{}};A=`FIRE_INFO::SPREAD_OR_DESTROY::${encodeURIComponent(JSON.stringify(z))}`}else A="FIRE_INFO::ALL_EXTINGUISHED_ABORT";V.push({targetTick:s.tick+1,requestId:A,scheduledAtTick:s.tick,priority:"info"})}ze={...ze,pendingInfoQueue:[]}}const fe=ti({tick:s.tick+1,stats:x,buildingTracking:we,newlyUnlockedBuilding:te,currentRequestId:s.currentRequestId,lastRequestId:s.currentRequestId,log:s.log,gameOver:!1,scheduledEvents:V,chainStatus:P,requestTriggerCounts:Ee,unlocks:Y,scheduledCombats:T,pendingAuthorityChecks:M,fire:ze}),m=V.filter(v=>v.requestId===fe.id&&v.targetTick<=s.tick+1);m.sort((v,A)=>v.scheduledAtTick===A.scheduledAtTick?v.targetTick-A.targetTick:v.scheduledAtTick-A.scheduledAtTick);const H=m[0];if(H?.authorityCommitContext){const v=H.authorityCommitContext.committed;console.log(`[Authority Refund] Refunding ${v} authority from successful follow-up: ${fe.id}`),x.authority+=v,x=Ht(x)}return{tick:s.tick+1,stats:x,buildingTracking:we,newlyUnlockedBuilding:te,currentRequestId:fe.id,lastRequestId:s.currentRequestId,log:[...s.log,...p],gameOver:!1,scheduledEvents:V,chainStatus:P,requestTriggerCounts:Ee,unlocks:Y,scheduledCombats:T,pendingAuthorityChecks:M,fire:ze}}if(u.type==="BUILD_BUILDING"){if(s.gameOver)return s;const y=gn(u.buildingId);if(!y)return console.error("Unknown building ID:",u.buildingId),s;if(s.stats.farmers<y.unlockThreshold)return console.error("Building not unlocked:",u.buildingId,"Need",y.unlockThreshold,"farmers, have",s.stats.farmers),s;const c=s.buildingTracking[u.buildingId];if(c&&fh(c))return console.error("Build locked: building has active state:",u.buildingId,{onFireCount:c.onFireCount,destroyedCount:c.destroyedCount,onStrikeCount:c.onStrikeCount}),s;if(s.stats.gold<y.cost)return console.error("Not enough gold for:",u.buildingId,"Need",y.cost,"have",s.stats.gold),s;const I=Ht({...s.stats,gold:s.stats.gold-y.cost}),g=s.buildingTracking[u.buildingId]??{buildingCount:0,onFireCount:0,destroyedCount:0,onStrikeCount:0,reminderScheduled:!1,reminderCooldownUntil:0},b=g.buildingCount===0,N={...g,buildingCount:g.buildingCount+1,reminderScheduled:!1},p={...s.buildingTracking,[u.buildingId]:N},T=[...s.scheduledEvents];b&&y.firstBuildInfoRequestId&&(T.some(Y=>Y.requestId===y.firstBuildInfoRequestId&&Y.targetTick===s.tick+1)||T.push({targetTick:s.tick+1,requestId:y.firstBuildInfoRequestId,scheduledAtTick:s.tick,priority:"info"}));const x=nh(p,s.unlocks),U=s.stats,k=fn(s.tick,`BUILD_${u.buildingId.toUpperCase()}`,`Built ${y.displayName}`,"Building Constructed",U,I);return{...s,stats:I,buildingTracking:p,unlocks:x,scheduledEvents:T,log:[...s.log,k]}}if(u.type==="EXTINGUISH_ONE"){if(s.gameOver)return s;const y=s.buildingTracking[u.buildingId];if(!y||y.onFireCount<=0)return console.error("Cannot extinguish: no on-fire units for",u.buildingId),s;const c=ba.extinguishCost;if(c.gold!==void 0&&s.stats.gold<Math.abs(c.gold))return console.error("Not enough gold to extinguish:",u.buildingId,"Need",Math.abs(c.gold),"have",s.stats.gold),s;const I=Ht(ai(s.stats,c)),g={...y,onFireCount:y.onFireCount-1},b={...s.buildingTracking,[u.buildingId]:g},N=Object.values(b).reduce((T,x)=>T+x.onFireCount,0);let p={...s.fire};return N===0&&(p={...p,slots:p.slots.map(T=>T.active?{...T,active:!1,abortedByManualExtinguish:!0}:T),pendingInfoQueue:[...p.pendingInfoQueue,{type:"ALL_EXTINGUISHED_ABORT"}]}),{...s,stats:I,buildingTracking:b,fire:p}}if(u.type==="REPAIR_ONE"){if(s.gameOver)return s;const y=s.buildingTracking[u.buildingId];if(!y||y.destroyedCount<=0)return console.error("Cannot repair: no destroyed units for",u.buildingId),s;let c;if(ba.repairCostOverride){const b=ba.repairCostOverride.gold;if(b!==void 0&&s.stats.gold<Math.abs(b))return console.error("Not enough gold to repair:",u.buildingId,"Need",Math.abs(b),"have",s.stats.gold),s;c=Ht(ai(s.stats,ba.repairCostOverride))}else{const b=gn(u.buildingId);if(!b)return console.error("Unknown building ID for repair:",u.buildingId),s;const N=Math.ceil(b.cost*ba.repairCostPercentOfBuildCost);if(s.stats.gold<N)return console.error("Not enough gold to repair:",u.buildingId,"Need",N,"have",s.stats.gold),s;c=Ht(ai(s.stats,{gold:-N}))}const I={...y,destroyedCount:y.destroyedCount-1},g={...s.buildingTracking,[u.buildingId]:I};return{...s,stats:c,buildingTracking:g}}return s}function oh(s){if(s.currentRequestId.startsWith("COMBAT_ROUND::")){if(!s.activeCombat)return null;const u=s.activeCombat,y=u.round+1;let c=`Your Forces: ${u.committedRemaining}
Enemy Forces: ${u.enemyRemaining}`;return u.lastRound&&(c+=`

Last Round:
Your Losses: ${u.lastRound.playerLosses}
Enemy Losses: ${u.lastRound.enemyLosses}`),{id:s.currentRequestId,title:`Battle  Round ${y}`,text:c,options:[{text:"Continue Fighting",effects:{}},{text:"Withdraw",effects:{}}],advancesTick:!1}}if(s.currentRequestId.startsWith("COMBAT_START::")){const u=s.currentRequestId.substring(14),y=s.scheduledCombats.find(I=>I.combatId===u);let c="Your forces are ready. The battle is about to commence!";if(y){const I=Yg(y.originRequestId);c+=`

This is the battle from: ${I}`}return{id:s.currentRequestId,title:"Battle Begins",text:c,options:[{text:"Begin Battle",effects:{}}],advancesTick:!1}}if(s.currentRequestId.startsWith("COMBAT_REPORT::"))try{const u=s.currentRequestId.split("::");if(!u[2])throw new Error("Missing report data");const y=decodeURIComponent(u[2]),c=JSON.parse(y);if(!c.outcome||!c.statDeltas)throw new Error("Invalid report data");let I="";c.outcome==="win"?I="Victory!":c.outcome==="withdraw"?I="Withdrawal":I="Defeat";const g=`Casualties:
You: ${c.playerLosses||0}
Enemy: ${c.enemyLosses||0}`,b={gold:"Gold",satisfaction:"Satisfaction",health:"Health",fireRisk:"Fire Risk",farmers:"Farmers",landForces:"Land Forces"},N=[];for(const[T,x]of Object.entries(b)){const U=c.statDeltas[T];U!==void 0&&U!==0&&N.push(`${x}: ${U>0?"+":""}${U}`)}const p=N.length>0?`

Consequences:
${N.join(`
`)}`:"";return{id:s.currentRequestId,title:"Battle Report",text:`${I}

${g}${p}`,options:[{text:"Continue",effects:{}}],advancesTick:!1}}catch(u){return console.error("Failed to parse combat report:",u),{id:s.currentRequestId,title:"Battle Report",text:"The battle has ended.",options:[{text:"Continue",effects:{}}],advancesTick:!1}}return s.currentRequestId.startsWith("FIRE_INFO::")?ty(s.currentRequestId):[...ul,...dl,...Ot,...fl].find(u=>u.id===s.currentRequestId)||null}function ty(s){const u=s.split("::");if(u[1]==="SPREAD_OR_DESTROY")try{const c=JSON.parse(decodeURIComponent(u[2]||"{}")),I=c.newOnFireByBuildingId||{},g=c.newDestroyedByBuildingId||{},b=[],N=Object.entries(I).filter(([,T])=>T>0);if(N.length>0){b.push("New fires:");for(const[T,x]of N){const U=gn(T),k=U?`${U.icon} ${U.displayName}`:T;b.push(`   ${k}: ${x}`)}}const p=Object.entries(g).filter(([,T])=>T>0);if(p.length>0){b.length>0&&b.push(""),b.push("Newly destroyed:");for(const[T,x]of p){const U=gn(T),k=U?`${U.icon} ${U.displayName}`:T;b.push(`   ${k}: ${x}`)}}return{id:s,title:" The fire is spreading",text:b.length>0?b.join(`
`):"The fire rages on.",options:[{text:"To Construction",effects:{}},{text:"Continue",effects:{}}],advancesTick:!1}}catch(c){return console.error("Failed to parse fire info request:",c),{id:s,title:" The fire is spreading",text:"The fire rages on.",options:[{text:"To Construction",effects:{}},{text:"Continue",effects:{}}],advancesTick:!1}}return{id:s,title:"The situation calms down",text:"All fires have been manually extinguished. All fire chains have been ended.",options:[{text:"OK",effects:{}},{text:"To Construction",effects:{}}],advancesTick:!1}}function ay(){Hg();const s=ti(ih);return{...ih,currentRequestId:s.id}}const iy="/MarkenKaledruns/assets/advisor-CsWJ3Mmj.webp",ny="/MarkenKaledruns/assets/bandit-DpDb95iP.webp",ly="/MarkenKaledruns/assets/council_member-C5R12YF7.webp",sy="/MarkenKaledruns/assets/farmer-DxYQewRJ.webp",oy="/MarkenKaledruns/assets/merchant-C7OP1Sby.webp",ry="/MarkenKaledruns/assets/military_advisor-D1qAIgtO.webp",rh={advisor:iy,bandit:ny,council_member:ly,farmer:sy,merchant:oy,military_advisor:ry},cy=1e3,ch=600;function uy({definition:s,tracking:u,farmers:y,gold:c,requiredCount:I,status:g,isHighlighted:b=!1,onBuild:N,onBuildMultiple:p,onExtinguish:T,onRepair:x}){const U=u.buildingCount,k=Math.max(0,I-U),X=g!=="locked"&&c>=s.cost,[Y,P]=le.useState(!1),[Ee,se]=le.useState(!1),Ie=le.useRef(U);le.useEffect(()=>{U>Ie.current&&(P(!0),setTimeout(()=>P(!1),cy)),Ie.current=U},[U]);const B=I>0?U/I*100:100,V=()=>{switch(g){case"locked":return"LOCKED";case"available":return"AVAILABLE";case"needed":return"NEEDED!";case"no-gold":return"NO GOLD";case"fulfilled":return"FULFILLED"}},ue=()=>B<33?"progress-low":B<67?"progress-medium":"progress-high",oe=()=>{X?N(s.id):(se(!0),setTimeout(()=>se(!1),ch))},F=()=>{X&&p?p(s.id):(se(!0),setTimeout(()=>se(!1),ch))},te=["building-card",`building-${g}`,b?"building-highlighted":"",Y?"building-success-flash":"",Ee?"building-error-shake":""].filter(Boolean).join(" ");return d.jsxs("div",{className:te,children:[d.jsxs("div",{className:"building-card-header",children:[d.jsxs("span",{className:"building-card-name",children:[s.icon," ",s.displayName]}),d.jsx("span",{className:`building-status-badge status-${g}`,children:V()})]}),d.jsx("div",{className:"building-card-description",children:s.description}),g==="locked"?d.jsxs("div",{className:"building-locked-message",children:[" Unlocks at ",s.unlockThreshold," farmers"]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"building-card-stats",children:[s.id==="farmstead"&&s.populationPerBuilding?d.jsxs("div",{className:"building-stat",children:[" Capacity: ",U*s.populationPerBuilding," / ",y," farmers"]}):d.jsxs("div",{className:"building-stat",children:[" Built: ",U," / Required: ",I,k>0&&d.jsxs("span",{className:"shortage-indicator",children:[" (Shortage: ",k,")"]})]}),d.jsxs("div",{className:"building-stat",children:[" Benefit: ",s.benefitDescription]}),d.jsxs("div",{className:"building-stat",children:[" Cost: ",s.cost," Gold per building"]})]}),I>0&&d.jsxs("div",{className:"building-progress-section",children:[d.jsx("div",{className:"building-progress-bar",children:d.jsx("div",{className:`building-progress-fill ${ue()}`,style:{width:`${Math.min(100,B)}%`}})}),d.jsxs("div",{className:"building-progress-label",children:[Math.round(B),"% Complete"]})]}),d.jsx("div",{className:"building-card-actions",children:fh(u)?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"building-state-status",children:[u.onFireCount>0&&d.jsxs("span",{className:"state-tag state-fire",children:[" ",u.onFireCount]}),u.destroyedCount>0&&d.jsxs("span",{className:"state-tag state-destroyed",children:[" ",u.destroyedCount]}),u.onStrikeCount>0&&d.jsxs("span",{className:"state-tag state-strike",children:[" ",u.onStrikeCount]}),d.jsxs("span",{className:"state-effective",children:["Effective: ",mn(u)," / ",u.buildingCount]})]}),u.onFireCount>0?(()=>{const Q=Math.abs(ba.extinguishCost.gold??0),Ae=c>=Q;return d.jsxs("button",{className:`building-state-action-button state-action-fire${Ae?"":" state-action-disabled"}`,onClick:()=>Ae&&T?.(s.id),disabled:!Ae,children:[" Extinguish Fire (1)  ",Q,"g",!Ae&&d.jsx("span",{className:"state-action-no-gold",children:" (not enough gold)"})]})})():u.destroyedCount>0?(()=>{const Q=Math.ceil(s.cost*ba.repairCostPercentOfBuildCost),Ae=c>=Q;return d.jsxs("button",{className:`building-state-action-button state-action-repair${Ae?"":" state-action-disabled"}`,onClick:()=>Ae&&x?.(s.id),disabled:!Ae,children:[" Repair (1)  ",Q,"g",!Ae&&d.jsx("span",{className:"state-action-no-gold",children:" (not enough gold)"})]})})():u.onStrikeCount>0?d.jsx("button",{className:"building-state-action-button state-action-strike",disabled:!0,children:" End Strike (1)  not implemented"}):null]}):d.jsxs(d.Fragment,{children:[d.jsxs("button",{className:"building-build-button",onClick:oe,children:["BUILD ",s.displayName.toUpperCase()]}),k>1&&p&&d.jsx("button",{className:"building-build-multiple-button",onClick:F,children:"BUILD MULTIPLE..."})]})})]})]})}function dy({isOpen:s,onClose:u,building:y,currentGold:c,shortage:I,onConfirm:g}){const[b,N]=le.useState(1),p=y?Math.floor(c/y.cost):0,T=Math.min(p,I,10);if(le.useEffect(()=>{s&&y&&N(Math.min(1,T))},[s,y,T]),le.useEffect(()=>{if(!s)return;const P=Ee=>{Ee.key==="Escape"&&u()};return window.addEventListener("keydown",P),()=>window.removeEventListener("keydown",P)},[s,u]),!s||!y)return null;const x=b*y.cost,U=c-x,k=()=>{b>1&&N(b-1)},X=()=>{b<T&&N(b+1)},Y=()=>{g(y.id,b),u()};return d.jsx("div",{className:"build-multiple-overlay",onClick:u,children:d.jsxs("div",{className:"build-multiple-modal",onClick:P=>P.stopPropagation(),children:[d.jsx("button",{className:"build-multiple-close",onClick:u,children:""}),d.jsxs("h2",{className:"build-multiple-title",children:["Build Multiple ",y.displayName,"s"]}),d.jsxs("div",{className:"build-multiple-content",children:[d.jsx("p",{className:"build-multiple-question",children:"How many would you like to build?"}),d.jsxs("div",{className:"build-multiple-stepper",children:[d.jsx("button",{className:"stepper-button",onClick:k,disabled:b<=1,children:"<"}),d.jsx("div",{className:"stepper-value",children:b}),d.jsx("button",{className:"stepper-button",onClick:X,disabled:b>=T,children:">"})]}),d.jsxs("div",{className:"build-multiple-cost",children:[d.jsxs("div",{className:"cost-line",children:[d.jsx("span",{children:"Total Cost:"}),d.jsxs("span",{className:"cost-value",children:[x," Gold"]})]}),d.jsxs("div",{className:"cost-line",children:[d.jsx("span",{children:"Gold After:"}),d.jsxs("span",{className:"cost-value",children:[c,"  ",U]})]})]}),d.jsxs("div",{className:"build-multiple-warning",children:[" This will build ",b," ",y.displayName,b>1?"s":""]}),d.jsxs("div",{className:"build-multiple-actions",children:[d.jsx("button",{className:"confirm-button",onClick:Y,children:"CONFIRM"}),d.jsx("button",{className:"cancel-button",onClick:u,children:"CANCEL"})]})]})]})})}function fy({isOpen:s,onClose:u,farmers:y,gold:c,buildingTracking:I,highlightedBuilding:g,onBuild:b,onExtinguish:N,onRepair:p}){const T=le.useRef(null),[x,U]=le.useState(!1),[k,X]=le.useState(null),Y=k?gn(k)??null:null,P=k?I[k]:null,Ee=Y?ii(Y,y):0,se=P?Math.max(0,Ee-P.buildingCount):0;le.useEffect(()=>{if(!s)return;const F=te=>{te.key==="Escape"&&u()};return window.addEventListener("keydown",F),()=>window.removeEventListener("keydown",F)},[s,u]),le.useEffect(()=>{s&&g&&T.current&&setTimeout(()=>{T.current?.scrollIntoView({behavior:"smooth",block:"center"})},100)},[s,g]);const Ie=F=>{X(F),U(!0)},B=()=>{U(!1),X(null)},V=(F,te)=>{for(let Q=0;Q<te;Q++)b(F);B()},ue=F=>{const te=I[F.id];if(!te||y<F.unlockThreshold)return"locked";const Q=ii(F,y);return te.buildingCount<Q?c>=F.cost?"needed":"no-gold":"fulfilled"},oe=le.useMemo(()=>{const F={needed:1,"no-gold":2,available:3,fulfilled:4,locked:5};return[...$t.map(Q=>({definition:Q,status:ue(Q)}))].sort((Q,Ae)=>{const Oe=F[Q.status]-F[Ae.status];return Oe!==0?Oe:Q.definition.sortOrder-Ae.definition.sortOrder})},[I,y,c]);return s?d.jsxs("div",{className:"construction-screen-overlay",onClick:u,children:[d.jsxs("div",{className:"construction-screen-panel",onClick:F=>F.stopPropagation(),children:[d.jsx("button",{className:"construction-close-btn",onClick:u,children:""}),d.jsxs("div",{className:"construction-header",children:[d.jsx("h2",{children:" Settlement Construction"}),d.jsxs("div",{className:"construction-stats",children:[d.jsxs("span",{children:[" Farmers: ",y]}),d.jsxs("span",{children:[" Gold: ",c]})]})]}),d.jsx("div",{className:"construction-content",children:oe.map(({definition:F,status:te})=>{const Q=I[F.id];if(!Q)return null;const Ae=ii(F,y),Oe=g===F.id;return d.jsx("div",{id:`building-card-${F.id}`,ref:Oe?T:null,children:d.jsx(uy,{definition:F,tracking:Q,farmers:y,gold:c,requiredCount:Ae,status:te,isHighlighted:Oe,onBuild:b,onBuildMultiple:Ie,onExtinguish:N,onRepair:p})},F.id)})})]}),d.jsx(dy,{isOpen:x,onClose:B,building:Y,currentGold:c,shortage:se,onConfirm:V})]}):null}function hy({isOpen:s,onClose:u,log:y}){if(le.useEffect(()=>{if(!s)return;const g=b=>{b.key==="Escape"&&u()};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[s,u]),!s)return null;const c=g=>g===0?"0":g>0?`+${g}`:`${g}`,I=[...y].reverse();return d.jsx("div",{className:"log-screen-overlay",onClick:u,children:d.jsxs("div",{className:"log-screen-panel",onClick:g=>g.stopPropagation(),children:[d.jsx("button",{className:"log-close-btn",onClick:u,children:""}),d.jsxs("div",{className:"log-header-section",children:[d.jsx("h2",{children:" Decision Log"}),d.jsx("p",{className:"log-subtitle",children:"History of all your choices and their effects"})]}),d.jsx("div",{className:"log-content",children:I.length===0?d.jsxs("div",{className:"log-empty-state",children:[d.jsx("p",{children:"No decisions made yet"}),d.jsx("p",{className:"log-empty-hint",children:"Your choices and their effects will appear here"})]}):I.map((g,b)=>d.jsxs("div",{className:"log-entry",children:[d.jsxs("div",{className:"log-entry-header",children:[d.jsxs("span",{className:"log-tick",children:["Tick ",g.tick]}),d.jsx("span",{className:`log-source log-source-${g.source.toLowerCase().replace(/\s+/g,"-")}`,children:g.source})]}),g.optionText&&d.jsxs("div",{className:"log-choice",children:[d.jsx("span",{className:"log-choice-label",children:"Choice:"}),d.jsx("span",{className:"log-choice-text",children:g.optionText})]}),d.jsx("div",{className:"log-deltas",children:Object.entries(g.deltas).map(([N,p])=>{const T=c(p);return d.jsxs("span",{className:`delta ${p>0?"positive":"negative"}`,children:[N,": ",T]},N)})}),g.appliedChanges&&g.appliedChanges.length>0&&d.jsx("div",{className:"log-modifiers",children:g.appliedChanges.map((N,p)=>{const T={"building:firewood":"","building:well":"","building:bakery":"",overcrowding:""},x={"building:firewood":"Firewood","building:well":"Well","building:bakery":"Bakery",overcrowding:"Overcrowding"},U=T[N.source]||"",k=x[N.source]||N.source,X=c(N.amount);return d.jsxs("div",{className:"modifier-effect",children:[d.jsx("span",{className:"modifier-icon",children:U}),d.jsxs("span",{className:"modifier-label",children:[k,":"]}),d.jsxs("span",{className:`modifier-value ${N.amount>0?"positive":"negative"}`,children:[N.stat,": ",X]}),N.note&&d.jsx("span",{className:"modifier-note",title:N.note,children:""})]},p)})})]},`${g.tick}-${g.source}-${b}`))})]})})}function my(){const[s,u]=le.useReducer(ey,void 0,ay),[y,c]=le.useState(!1),[I,g]=le.useState(null),[b,N]=le.useState(!1),[p,T]=le.useState(oh(s)),[x,U]=le.useState(!1),k=p,X=s.stats.landForces,[Y,P]=le.useState(Math.min(5,X)),Ee=s.stats.authority,[se,Ie]=le.useState(10),[B,V]=le.useState(null),[ue,oe]=le.useState({}),[F,te]=le.useState(s.tick);le.useEffect(()=>{s.tick!==F&&(oe({}),te(s.tick))},[s.tick,F]),le.useEffect(()=>(y||b?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[y,b]);const[Q,Ae]=le.useState([]),[Oe,He]=le.useState(s.stats.health),[we,ze]=le.useState(s.stats.satisfaction),[Ve,M]=le.useState(s.stats.fireRisk),[q,$]=le.useState(s.stats.authority),[he,fe]=le.useState(s.stats.gold),[m,H]=le.useState(s.stats.farmers),[v,A]=le.useState(s.stats.landForces),[z,Z]=le.useState(s.activeCombat?.round??-1),[ae,ve]=le.useState([]),de=le.useRef([]),Tt=le.useRef(null);le.useEffect(()=>{const C=[],j=s.stats.health,G=j-Oe;G!==0&&Oe!==0&&C.push({stat:"health",delta:G}),He(j);const ie=s.stats.satisfaction,Me=ie-we;Me!==0&&we!==0&&C.push({stat:"satisfaction",delta:Me}),ze(ie);const Ze=s.stats.fireRisk,at=Ze-Ve;at!==0&&Ve!==0&&C.push({stat:"fireRisk",delta:at}),M(Ze);const Ge=s.stats.authority,qt=Ge-q;qt!==0&&q!==0&&C.push({stat:"authority",delta:qt}),$(Ge);const je=s.stats.gold,Je=je-he;Je!==0&&he!==0&&C.push({stat:"gold",delta:Je}),fe(je);const At=s.stats.farmers,Ce=At-m;Ce!==0&&m!==0&&C.push({stat:"farmers",delta:Ce}),H(At);const mt=s.stats.landForces,ta=mt-v;if(ta!==0&&v!==0&&C.push({stat:"landForces",delta:ta}),A(mt),C.length>0){const Ft=Date.now(),yl=C.map(Gt=>({stat:Gt.stat,delta:Gt.delta,timestamp:Ft}));Ae(Gt=>[...Gt,...yl]),setTimeout(()=>{Ae(Gt=>Gt.filter(Ci=>Ci.timestamp!==Ft))},2e3)}},[s.stats.health,s.stats.satisfaction,s.stats.fireRisk,s.stats.authority,s.stats.gold,s.stats.farmers,s.stats.landForces,Oe,we,Ve,q,he,m,v]),le.useEffect(()=>{const C=oh(s);if(x)return;const j=C?.id!==p?.id,G=s.activeCombat?.round??-1,ie=s.activeCombat&&p?.id.startsWith("COMBAT_ROUND::")&&C?.id.startsWith("COMBAT_ROUND::")&&C?.id===p?.id&&G!==z;if(G!==z&&Z(G),j||ie)if(p!==null){U(!0);const Me=setTimeout(()=>{T(C),U(!1)},500);return()=>clearTimeout(Me)}else T(C)},[s.currentRequestId,s.tick,s.activeCombat?.round]),le.useEffect(()=>{const C=Math.max(1,X),j=Math.min(5,C);Y>C?P(C):k?.combat&&Y===0&&P(j)},[X,k?.id,k?.combat,Y]),le.useEffect(()=>{if(k?.options.some(j=>j.authorityCheck)){const j=k?.options.find(G=>G.authorityCheck);if(j?.authorityCheck){const G=j.authorityCheck,ie=Math.max(G.minCommit,Math.min(G.maxCommit,Math.floor(Ee)));(se<G.minCommit||se>G.maxCommit)&&Ie(ie)}}},[Ee,k?.id,se,k?.options]);const Et=(C,j)=>{const G=de.current[C],ie=Tt.current;if(!G||!ie)return;const Me=G.getBoundingClientRect(),Ze=[],at=Date.now();let Ge=at;["satisfaction","health","fireRisk","authority"].forEach(je=>{const Je=j[je];if(Je===void 0||Je===0||typeof Je!="number")return;const At=ie.querySelector(`[data-stat="${je}"]`);if(!At)return;const Ce=At.getBoundingClientRect(),mt=Ce.left+Ce.width/2,ta=Me.top+Me.height/2;Ze.push({id:Ge++,resourceType:je,value:Je,startX:mt,startY:ta,timestamp:at})}),Ze.length>0&&(ve(je=>[...je,...Ze]),setTimeout(()=>{ve(je=>je.filter(Je=>Je.timestamp!==at))},2e3))},nt=C=>{const j=k?.options[C];j&&Et(C,j.effects);const ie=s.currentRequestId.startsWith("FIRE_INFO::")&&j?.text==="To Construction";if(k?.combat&&C===0)u({type:"CHOOSE_OPTION",optionIndex:C,combatCommit:Y});else if(j?.authorityCheck){const Me=ue[C]??0;u({type:"CHOOSE_OPTION",optionIndex:C,authorityCommit:Me})}else u({type:"CHOOSE_OPTION",optionIndex:C});ie&&wt()},Se=C=>{const j=k?.options[C];if(!j?.authorityCheck)return;const ie=ue[C]??j.authorityCheck.minCommit;Ie(ie),V(C)},Be=()=>{B!==null&&(oe(C=>({...C,[B]:se})),V(null))},wt=C=>{c(!0),g(C??null)},la=()=>{c(!1),g(null)},ea=()=>{N(!0)},ft=()=>{N(!1)},ht=k?.id.startsWith("EVT_CRISIS_")??!1,Bt=s.stats.gold<0&&s.stats.gold>-50,ua=C=>{const j=s.buildingTracking[C.id];if(!j||s.stats.farmers<C.unlockThreshold)return"locked";const G=ii(C,s.stats.farmers);return j.buildingCount<G?s.stats.gold>=C.cost?"needed":"no-gold":(s.stats.gold>=C.cost,"fulfilled")},Ii=$t.filter(C=>{const j=ua(C);return j==="needed"||j==="no-gold"}).map(C=>{const G=s.buildingTracking[C.id]?.buildingCount??0,ie=ii(C,s.stats.farmers),Me=Math.max(0,ie-G);return{id:C.id,name:C.displayName,icon:C.icon,shortage:Me}}),vi=Ii.length,hl=(s.buildingTracking.farmstead?.buildingCount??0)*20,yn=Math.max(0,s.stats.farmers-hl),ml=C=>C.farmers!==void 0&&s.stats.farmers+C.farmers<0?{disabled:!0,reason:"Not enough farmers"}:C.landForces!==void 0&&s.stats.landForces+C.landForces<0?{disabled:!0,reason:"Not enough land forces"}:{disabled:!1},Si=C=>`${C>0?"+":""}${C}`,Us=C=>({gold:"",satisfaction:"",health:"",fireRisk:"",farmers:"",landForces:"",authority:""})[C],gl={Gold:"",Satisfaction:"",Health:"","Fire Risk":"",Farmers:"","Land Forces":"",Authority:""},Tn=(C,j=!1,G=!1)=>{const ie=[];return C.gold!==void 0&&ie.push({label:"Gold",value:C.gold,isPositive:C.gold>0}),C.satisfaction!==void 0&&!G&&ie.push({label:"Satisfaction",value:C.satisfaction,isPositive:C.satisfaction>0}),C.health!==void 0&&!G&&ie.push({label:"Health",value:C.health,isPositive:C.health>0}),C.fireRisk!==void 0&&!G&&ie.push({label:"Fire Risk",value:C.fireRisk,isPositive:C.fireRisk<0}),C.farmers!==void 0&&ie.push({label:"Farmers",value:C.farmers,isPositive:C.farmers>0}),C.landForces!==void 0&&ie.push({label:"Land Forces",value:C.landForces,isPositive:C.landForces>0}),C.authority!==void 0&&!j&&ie.push({label:"Authority",value:C.authority,isPositive:C.authority>0}),ie},da=C=>{const j=Q.find(ie=>ie.stat===C);return j?(C==="fireRisk"?j.delta>0:j.delta<0)?"stat-animate-worse":"stat-animate-better":""},ni=()=>d.jsxs("div",{className:`panel request-panel ${ht?"crisis-panel":""}`,children:[ht&&d.jsx("div",{className:"crisis-banner",children:" CRISIS EVENT "}),k?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"request-panel__header",children:[d.jsx("div",{className:"request-panel__portrait",children:k.portraitId&&rh[k.portraitId]?d.jsx("img",{className:"request-panel__portrait-img",src:rh[k.portraitId],alt:k.portraitId}):d.jsx("div",{className:"request-panel__portrait-placeholder",children:""})}),d.jsxs("div",{className:"request-panel__content",children:[k.chainId&&d.jsx("div",{className:"request-panel__chainTitle",children:k.chainId}),(()=>{const C=s.currentRequestId.match(/^FIRE_S(\d+)_(START|DECISION|ESCALATE|END)$/);if(!C)return null;const j=parseInt(C[1],10),ie=s.fire.slots.find(at=>at.slotIndex===j)?.targetBuildingId,Me=ie?gn(ie):null,Ze=ie?s.buildingTracking[ie]:null;return d.jsxs("div",{className:"request-panel__fireContext fire-chain-info",children:[d.jsxs("div",{className:"fire-chain-tag",children:[" Fire (Slot ",j,")"]}),Me&&Ze&&d.jsxs("div",{className:"fire-chain-context",children:["Affected: ",Me.icon," ",Me.displayName," |  ",Ze.onFireCount," |  ",Ze.destroyedCount]})]})})(),d.jsx("h3",{className:"request-panel__title",children:k.title}),d.jsx("div",{className:"request-panel__text",children:k.text})]})]}),k.combat&&d.jsxs("div",{className:"combat-slider-container",children:[d.jsxs("div",{className:"combat-info",children:[d.jsxs("span",{children:["Deploy: ",Y," Land Forces"]}),d.jsxs("span",{children:["Enemy: ",k.combat.enemyForces]})]}),d.jsx("input",{type:"range",min:"1",max:Math.max(1,X),value:Y,onChange:C=>P(Number(C.target.value)),disabled:X<1,className:"combat-slider"})]}),d.jsxs("div",{className:"request-panel__options",children:[k.options.map((C,j)=>{const G=Tn(C.effects,!0,!0);let{disabled:ie,reason:Me}=ml(C.effects);k.combat&&j===0&&X<1&&(ie=!0,Me="No land forces available");const Ze=!!C.authorityCheck,at=ue[j];return d.jsxs("div",{className:"option-row",children:[d.jsxs("button",{ref:Ge=>{de.current[j]=Ge},className:`decision-card ${ie?"decision-card--disabled":""}`,onClick:()=>!ie&&nt(j),disabled:ie,children:[d.jsx("div",{className:"decision-card__label",children:C.text}),G.length>0&&d.jsx("div",{className:"decision-card__effects",children:G.map((Ge,qt)=>{const je=gl[Ge.label],Je=je?d.jsx("span",{className:"consequence__icon",children:je}):null;return d.jsxs("span",{className:`consequence ${Ge.isPositive?"positive":"negative"}`,children:[typeof Ge.value=="number"&&Ge.value!==0&&d.jsxs(d.Fragment,{children:[Je,Ge.label,": ",Ge.value>0?"+":"",Ge.value]}),Ge.value===""&&d.jsxs(d.Fragment,{children:[Je,Ge.label]})]},qt)})}),ie&&Me&&d.jsx("div",{className:"option-disabled-reason",children:Me})]}),Ze&&d.jsx("button",{className:"authority-button",onClick:()=>Se(j),children:at!==void 0?` ${at}`:"Use "})]},j)}),k.id.startsWith("REMINDER_")&&(()=>{const C=k.id.replace("REMINDER_","").toLowerCase();return $t.some(G=>G.id===C)?d.jsx("div",{className:"option-row",children:d.jsx("button",{className:"decision-card",onClick:()=>{u({type:"CHOOSE_OPTION",optionIndex:0}),wt(C)},children:d.jsx("div",{className:"decision-card__label",children:" Go to Construction"})})}):(console.warn(`Building ID "${C}" extracted from reminder "${k.id}" does not exist`),null)})()]})]}):d.jsx("p",{className:"request-panel__text",children:"No request available"})]});return d.jsx("div",{className:"app",children:d.jsxs("div",{className:"game-container",children:[d.jsxs("div",{className:"stats-bar",ref:Tt,children:[d.jsxs("div",{className:`stat-compact ${da("gold")}`,"data-stat":"gold",children:[d.jsx("span",{className:"stat-icon",children:""}),d.jsx("span",{className:"stat-value",children:s.stats.gold})]}),d.jsxs("div",{className:`stat-compact ${da("satisfaction")}`,"data-stat":"satisfaction",children:[d.jsx("span",{className:"stat-icon",children:""}),d.jsx("span",{className:"stat-value",children:s.stats.satisfaction})]}),d.jsxs("div",{className:`stat-compact ${da("health")}`,"data-stat":"health",children:[d.jsx("span",{className:"stat-icon",children:""}),d.jsx("span",{className:"stat-value",children:s.stats.health})]}),d.jsxs("div",{className:`stat-compact stat-warning ${da("fireRisk")}`,"data-stat":"fireRisk",children:[d.jsx("span",{className:"stat-icon",children:""}),d.jsx("span",{className:"stat-value",children:s.stats.fireRisk})]}),d.jsxs("div",{className:`stat-compact ${da("farmers")}${yn>0?" farmer-overflow":""}`,"data-stat":"farmers",children:[d.jsx("span",{className:"stat-icon",children:""}),d.jsx("span",{className:"stat-value",children:yn>0?`${s.stats.farmers}/${hl}`:s.stats.farmers})]}),d.jsxs("div",{className:`stat-compact ${da("landForces")}`,"data-stat":"landForces",children:[d.jsx("span",{className:"stat-icon",children:""}),d.jsx("span",{className:"stat-value",children:s.stats.landForces})]}),d.jsxs("div",{className:`stat-compact stat-authority ${da("authority")}`,"data-stat":"authority",children:[d.jsx("span",{className:"stat-icon",children:""}),d.jsx("span",{className:"stat-value",children:Math.floor(s.stats.authority)})]})]}),Bt&&!s.gameOver&&d.jsx("div",{className:"bankruptcy-warning",children:" Bankruptcy imminent "}),vi>0&&!s.gameOver&&!y&&d.jsxs("div",{className:"building-shortage-banner",onClick:()=>wt(),children:[d.jsx("span",{className:"shortage-icon",children:""}),d.jsxs("span",{className:"shortage-text",children:[Ii.map((C,j)=>d.jsxs("span",{children:[j>0&&", ",C.shortage," ",C.icon," ",C.name]},C.id))," needed"]}),d.jsx("span",{className:"shortage-action",children:" Click to build"})]}),s.gameOver?d.jsxs("div",{className:"panel game-over-panel",children:[d.jsx("h2",{children:"Game Over"}),d.jsx("p",{className:"game-over-message",children:s.gameOverReason}),d.jsx("p",{className:"game-over-stats",children:"Final Stats:"}),d.jsxs("div",{className:"game-over-stats-grid",children:[d.jsxs("div",{children:[" Gold: ",s.stats.gold]}),d.jsxs("div",{children:[" Satisfaction: ",s.stats.satisfaction]}),d.jsxs("div",{children:[" Health: ",s.stats.health]}),d.jsxs("div",{children:[" Fire Risk: ",s.stats.fireRisk]}),d.jsxs("div",{children:[" Farmers: ",s.stats.farmers]}),d.jsxs("div",{children:[" Land Forces: ",s.stats.landForces]}),d.jsxs("div",{children:[" Authority: ",Math.floor(s.stats.authority)]})]}),d.jsx("button",{className:"restart-button",onClick:()=>window.location.reload(),children:"Restart Game"})]}):ni(),d.jsx("div",{className:"bottom-bar",children:d.jsxs("div",{className:"toggle-buttons",children:[d.jsx("button",{className:"toggle-btn",onClick:ea,children:" Log"}),d.jsxs("button",{className:`toggle-btn${vi>0?" toggle-btn-notify":""}`,onClick:()=>wt(),children:[" Construction",vi>0&&d.jsx("span",{className:"notification-badge",children:vi})]})]})}),B!==null&&k&&d.jsx("div",{className:"modal-overlay",onClick:C=>C.target===C.currentTarget&&null,children:d.jsx("div",{className:"modal-content authority-modal",children:(()=>{const C=B,j=k.options[C];if(!j?.authorityCheck)return null;const G=j.authorityCheck,ie=Math.floor(Ee),Me=Math.min(se,ie),Ze=!!(G.onSuccess||G.onFailure),at=!!(G.followUpBoosts&&G.followUpBoosts.length>0),Ge=G.minSuccessChance??50,qt=G.maxSuccessChance??50,je=G.maxCommit>0?Me/G.maxCommit:0,Je=Math.floor(Ge+je*(qt-Ge));let At=0;if(at&&!Ze&&k.followUps){const Ce=k.followUps.find(mt=>mt.triggerOnOptionIndex===C);if(Ce&&G.followUpBoosts&&G.followUpBoosts.length>0){const mt=G.followUpBoosts[0],ta=Ce.candidates.find(Ft=>Ft.requestId===mt.targetRequestId);if(ta){const Ft=Ce.candidates.reduce((En,pl)=>En+pl.weight,0),Gt=(G.maxCommit>0?Me/G.maxCommit:0)*mt.boostValue,Ci=ta.weight+Gt,Tl=Ft+Gt;At=Ci/Tl*100}}}return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"authority-header",children:[d.jsxs("div",{className:"authority-title",children:[d.jsx("span",{className:"authority-icon",children:""}),d.jsx("span",{children:"Authority Commitment"})]}),Ze&&d.jsxs("div",{className:"authority-outcome uncertain",children:[" UNCERTAIN (",Je,"%)"]})]}),d.jsxs("div",{className:"authority-commit-display",children:[d.jsxs("div",{className:"commit-value",children:[d.jsx("span",{className:"commit-label",children:"Committing:"}),d.jsx("span",{className:"commit-amount",children:Me})]}),Ze&&d.jsxs("div",{className:"commit-probability uncertain",children:[d.jsx("span",{className:"probability-label",children:"Chance:"}),d.jsxs("span",{className:"probability-amount",children:[Je,"%"]})]}),at&&!Ze&&d.jsxs("div",{className:"commit-boost-info",children:[d.jsxs("div",{className:"boost-impact",children:[d.jsx("span",{className:"impact-label",children:"Outcome chance:"}),d.jsxs("span",{className:"impact-amount",children:[At.toFixed(0),"%"]})]}),G.followUpBoosts?.map(Ce=>d.jsx("div",{className:"boost-description",children:Ce.description||`Affects follow-up: ${Ce.targetRequestId}`},Ce.targetRequestId))]})]}),d.jsx("input",{type:"range",min:G.minCommit,max:Math.min(G.maxCommit,ie),value:Me,onChange:Ce=>Ie(Number(Ce.target.value)),className:"authority-slider uncertain"}),d.jsxs("div",{className:"authority-range-labels",children:[d.jsxs("span",{children:[G.minCommit," min"]}),d.jsxs("span",{children:[Math.min(G.maxCommit,ie)," max"]})]}),Ze&&d.jsxs("div",{className:"authority-fork-preview",children:[d.jsxs("div",{className:"fork-section fork-success",children:[d.jsxs("div",{className:"fork-header",children:[d.jsx("span",{className:"fork-icon",children:""}),d.jsx("span",{className:"fork-title",children:"On Success:"})]}),d.jsxs("div",{className:"fork-effects",children:[j.effects&&Object.keys(j.effects).length>0&&d.jsx("span",{className:"fork-effect",children:"Base effects apply"}),G.onSuccess&&Tn(G.onSuccess).map((Ce,mt)=>d.jsxs("span",{className:`fork-effect ${Ce.isPositive?"positive":"negative"}`,children:[Ce.label,": ",typeof Ce.value=="number"?(Ce.value>0?"+":"")+Ce.value:Ce.value]},mt)),G.refundOnSuccessPercent!==void 0&&G.refundOnSuccessPercent>0&&d.jsxs("span",{className:"fork-effect positive",children:["Refund: ",G.refundOnSuccessPercent,"% (",Math.floor(Me*G.refundOnSuccessPercent/100)," authority)"]})]})]}),d.jsxs("div",{className:"fork-section fork-failure",children:[d.jsxs("div",{className:"fork-header",children:[d.jsx("span",{className:"fork-icon",children:""}),d.jsx("span",{className:"fork-title",children:"On Failure:"})]}),d.jsxs("div",{className:"fork-effects",children:[j.effects&&Object.keys(j.effects).length>0&&d.jsx("span",{className:"fork-effect",children:"Base effects apply"}),G.onFailure&&Tn(G.onFailure).map((Ce,mt)=>d.jsxs("span",{className:`fork-effect ${Ce.isPositive?"positive":"negative"}`,children:[Ce.label,": ",typeof Ce.value=="number"?(Ce.value>0?"+":"")+Ce.value:Ce.value]},mt)),d.jsxs("span",{className:"fork-effect negative",children:["Authority Lost: ",Me]}),G.extraLossOnFailure!==void 0&&G.extraLossOnFailure>0&&d.jsxs("span",{className:"fork-effect negative",children:["Extra Loss: ",G.extraLossOnFailure," authority"]})]})]})]}),d.jsx("button",{className:"confirm-button",onClick:Be,children:"Confirm"})]})})()})}),ae.map(C=>{const j=Us(C.resourceType),G=Si(C.value),ie=C.resourceType==="fireRisk"?C.value<0:C.value>0;return d.jsxs("div",{className:`flying-delta ${ie?"positive":"negative"}`,style:{left:`${C.startX}px`,top:`${C.startY}px`},children:[j," ",G]},C.id)}),d.jsx(fy,{isOpen:y,onClose:la,farmers:s.stats.farmers,gold:s.stats.gold,buildingTracking:s.buildingTracking,highlightedBuilding:I??void 0,onBuild:C=>u({type:"BUILD_BUILDING",buildingId:C}),onExtinguish:C=>u({type:"EXTINGUISH_ONE",buildingId:C}),onRepair:C=>u({type:"REPAIR_ONE",buildingId:C})}),d.jsx(hy,{isOpen:b,onClose:ft,log:s.log}),d.jsxs("div",{className:"version-footer",children:["v","1.1.15"," (","main",")"]})]})})}const gy="modulepreload",yy=function(s){return"/MarkenKaledruns/"+s},uh={},Ty=function(u,y,c){let I=Promise.resolve();if(y&&y.length>0){let T=function(x){return Promise.all(x.map(U=>Promise.resolve(U).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};var b=T;document.getElementsByTagName("link");const N=document.querySelector("meta[property=csp-nonce]"),p=N?.nonce||N?.getAttribute("nonce");I=T(y.map(x=>{if(x=yy(x),x in uh)return;uh[x]=!0;const U=x.endsWith(".css"),k=U?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${k}`))return;const X=document.createElement("link");if(X.rel=U?"stylesheet":gy,U||(X.as="script"),X.crossOrigin="",X.href=x,p&&X.setAttribute("nonce",p),document.head.appendChild(X),U)return new Promise((Y,P)=>{X.addEventListener("load",Y),X.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${x}`)))})}))}function g(N){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=N,window.dispatchEvent(p),!p.defaultPrevented)throw N}return I.then(N=>{for(const p of N||[])p.status==="rejected"&&g(p.reason);return u().catch(g)})};function Ey(s={}){const{immediate:u=!1,onNeedRefresh:y,onOfflineReady:c,onRegistered:I,onRegisteredSW:g,onRegisterError:b}=s;let N,p,T;const x=async(k=!0)=>{await p,T?.()};async function U(){if("serviceWorker"in navigator){if(N=await Ty(async()=>{const{Workbox:k}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:k}},[]).then(({Workbox:k})=>new k("/MarkenKaledruns/sw.js",{scope:"/MarkenKaledruns/",type:"classic"})).catch(k=>{b?.(k)}),!N)return;T=()=>{N?.messageSkipWaiting()};{let k=!1;const X=()=>{k=!0,N?.addEventListener("controlling",Y=>{Y.isUpdate&&window.location.reload()}),y?.()};N.addEventListener("installed",Y=>{typeof Y.isUpdate>"u"?typeof Y.isExternal<"u"&&Y.isExternal?X():!k&&c?.():Y.isUpdate||c?.()}),N.addEventListener("waiting",X)}N.register({immediate:u}).then(k=>{g?g("/MarkenKaledruns/sw.js",k):I?.(k)}).catch(k=>{b?.(k)})}}return p=U(),x}Ey({immediate:!0,onNeedRefresh(){window.location.reload()},onOfflineReady(){console.log("App ready to work offline")}});kg.createRoot(document.getElementById("root")).render(d.jsx(le.StrictMode,{children:d.jsx(my,{})}));
